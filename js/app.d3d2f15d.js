(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)o=r[d],a[o]&&m.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"003a":function(t,e,n){"use strict";var s=n("d662"),a=n.n(s);a.a},"034f":function(t,e,n){"use strict";var s=n("c21b"),a=n.n(s);a.a},"088d":function(t,e,n){},"08bb":function(t,e,n){"use strict";var s=n("4444"),a=n.n(s);a.a},"0a31":function(t,e,n){},"0e58":function(t,e,n){},"0e93":function(t,e,n){"use strict";var s=n("1b68"),a=n.n(s);a.a},1:function(t,e){},"178d":function(t,e,n){"use strict";var s=n("da9c"),a=n.n(s);a.a},"1b68":function(t,e,n){},2:function(t,e){},3:function(t,e){},"33ad":function(t,e,n){},"366c":function(t,e,n){"use strict";var s=n("9be0"),a=n.n(s);a.a},4:function(t,e){},4444:function(t,e,n){},"44f7":function(t,e,n){},"48bb":function(t,e,n){"use strict";var s=n("088d"),a=n.n(s);a.a},"4d3c":function(t,e,n){"use strict";var s=n("b7fe"),a=n.n(s);a.a},"52be":function(t,e,n){"use strict";var s=n("d8f1"),a=n.n(s);a.a},"52db":function(t,e,n){"use strict";var s=n("c742"),a=n.n(s);a.a},5582:function(t,e,n){"use strict";var s=n("ee67"),a=n.n(s);a.a},5669:function(t,e,n){"use strict";var s=n("0e58"),a=n.n(s);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("6762"),n("2fdb"),n("28a5"),n("cadf"),n("551c"),n("097d");var s=n("2b0e"),a=n("a925"),i=n("c16e"),o=n.n(i),r=n("2b52"),c=n("85ff"),l=n.n(c),u=(n("d06d"),n("0874")),d=n("f78c"),m=n.n(d),v=n("31bd"),p=n("8a03"),f=n.n(p),b=(n("5abe"),n("da28")),h=n.n(b),g=(n("4418"),n("55ab"),n("2ef0")),C=n.n(g),_=n("e508"),w=n("9483");Object(w["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mdl-layout mdl-js-layout mdl-layout--fixed-header",attrs:{id:"app"}},[n("router-view",{attrs:{name:"hdr"}}),n("main",{staticClass:"mdl-layout__content"},[n("div",{staticClass:"page-content"},[n("router-view")],1)])],1)},x=[],O=(n("ac6a"),console.log);function k(t){return Array.prototype.slice.call(document.querySelectorAll(t),0)}function E(){var t=k(".navbar-item.has-dropdown:not(.is-hoverable)"),e=k(".burger");function n(){t.forEach(function(t){t.classList.remove("is-active")})}t.length>0&&(t.forEach(function(t){t.addEventListener("click",function(e){e.stopPropagation(),t.classList.toggle("is-active")})}),document.addEventListener("click",function(t){n()})),document.addEventListener("keydown",function(t){var e=t||window.event;27===e.keyCode&&n()}),e.length>0?(O("--- We haz ".concat(e.length," burgers. ---")),O(e),e.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.target,n=document.getElementById(e);t.classList.toggle("is-active"),n.classList.toggle("is-active")})})):O("--- Yes! We haz no burgers ---")}function P(){k(".burger").forEach(function(t){return t.classList.remove("is-active")}),k(".burger-bar").forEach(function(t){return t.classList.remove("is-active")})}O("        ############# Responsive menu event handling installed #############");var D={name:"app",data:function(){return{}},created:function(){document.addEventListener("DOMContentLoaded",E)}},I=D,S=(n("034f"),n("2877")),j=Object(S["a"])(I,y,x,!1,null,null,null);j.options.__file="App.vue";var T=j.exports,A=n("c93e"),R=n("2f62"),L=(n("f751"),n("aef6"),n("a481"),n("68d3")),$=n.n(L),N=function(t){var e="_";return t.replace(/[Áá]/g,"a").replace(/[Éé]/g,"e").replace(/[Íí]/g,"i").replace(/[Ôó]/g,"o").replace(/[Úú]/g,"u").replace(/[ñÑ]/g,"n").replace(/[a-z][A-Z]/g,function(t){return"".concat(t[0]," ").concat(e," ").concat(t[1].toLowerCase())}).replace(/\W$/g,"").replace(/\W/g,"_").replace(/_{1,}/g,"_").replace(/[A-Z]/g,function(t){return t.toLowerCase()})},U=function(t){return t.map(function(t){return N(t)})},M=(n("1c4c"),n("4f7f"),n("456d"),n("7f7f"),n("9393")),F=(n("ffc1"),n("4b58")),B="Person",Y="person",q="persons",V="persons/list",z={};z[B]=[Y,q,V];var Q=z,J=Object.assign({},Q),K="Product",G="products",W="products/list",H={};H[K]=[G,W];var Z=H,X="Invoice",tt="invoices/list",et="invoices",nt="invoice",st={};st[X]=[et,nt,tt];var at=st,it=Object.assign({},Z,at),ot="Example",rt="protected",ct="classified",lt={};lt[ot]=[rt,ct];var ut=lt,dt=Object.assign({},ut),mt="Bottle",vt="bottles/test",pt="bottles/list",ft="bottles",bt="bottle",ht={};ht[mt]=[ft,bt,pt,vt];for(var gt=ht,Ct=Object.assign({},gt),_t=Object.assign({},J,it,dt,Ct),wt=(console.log,Object.assign({},_t)),yt=(console.log,["reassign","delete","edit","view","none"]),xt=function(t){var e=t.map(function(t){return t.toLowerCase().split(" ").join("_")}),n=0,s={};while(n<yt.length-1)s[yt[n]]=Array.from(e),n+=1,e.pop();return s},Ot=["Do Nothing","Only View","Comment","Alter","Assign"],kt={},Et=[],Pt=0;Pt<Ot.length;Pt+=1){var Dt=Ot[Pt],It=Dt.toUpperCase().split(" ").join("_");kt[It]=Pt,Et.push({name:Dt,value:Pt,id:Pt,label:Dt})}kt.alvls=Ot,kt.options=Et,kt.olvls=Array.from(Ot,function(t,e){return{id:e,axs:t}}),kt.aliases=xt(Ot),kt.idxAliases=yt.reverse();var St=kt,jt=console.log;St.idxAliases.forEach(function(t){"none"!==t&&F["a"].addAlias(t,St.aliases[t])});var Tt=F["b"].define(function(t){Object.entries(wt).forEach(function(e){var n=Object(M["a"])(e,2),s=(n[0],n[1]);t("do_nothing",s)})}),At=function(t,e,n){return window.ability&&window.ability.can?"home"===t.name?null:!!window.ability.can("only_view",t.name)&&null:null},Rt=[At],Lt={user:{permissions:{Example:St.VIEW_ONLY,Invoice:St.VIEW_ONLY,Person:St.OWN,Product:St.VIEW_ONLY,Bottle:St.VIEW_ONLY}}},$t={getUserPermissions:function(t){return t.user.permissions}},Nt={changePermission:function(t,e){window.lgr.debug('Access Control (mutation) :: changePermissions of "'.concat(e.resource,'"')),t.user.permissions[e.resource]=e.setting}},Ut={resetPermissions:function(t,e){var n=e.payload,s=e.ability,a=JSON.parse(n.permissions.replace(/'/g,'"'));Object.keys(a).forEach(function(e){var n={resource:e,setting:a[e]};jt(n),t.dispatch("changePermissions",{change:n,ability:s})}),jt("\n\n      Permissions reset >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n    ")},changePermissions:function(t,e){var n=e.change,s=e.ability;t.commit("changePermission",n);var a=[];s.rules.map(function(t){var e=!1;return t.subject.forEach(function(t){e||(e=wt[n.resource].includes(t))}),e?a.push({actions:St.idxAliases[n.setting],subject:wt[n.resource]}):a.push(t),t}),s.update(a)}},Mt={namespaced:!0,state:Lt,getters:$t,mutations:Nt,actions:Ut},Ft=new Set;Object.keys(wt).forEach(function(t){Ft.add(t)});var Bt=Array.from(Ft),Yt=(console.log,{server:"https://wt-a0a68818c7b34a465e865e888dc419c9-0.sandbox.auth0-extend.com/webtasksso",authPath:"/authentication/google/start",tokenTimeToLive:2e4,tokenName:"tkn",activityName:"actv",authName:"authd",returnRouteName:"retRoute",localStorageNameSpace:"vuesppwa-",productionTip:!1,testAuthUrlEnvVar:"AUTH_TEST_URL",logger:{logLevel:"info",stringifyArguments:!0,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0},version:"0.0.94",dbServerProtocol:"https",dbServerURI:"yourdb.yourpublic.work",databaseName:"ib2018_103"}),qt=(console.log,{text:function(t){return t},integer:function(t){return t},title:function(t){return t},percent:function(t,e){var n="number"===typeof t?t:parseFloat(t);return{raw:parseFloat((n||0).toFixed(4)),str:"".concat((100*(n||0)).toFixed(e||1),"%")}},boolean:function(t){return"si"===t},JSON1:function(t,e){return e.JSON1.fn(e.JSON1.vl)},foreignKey1:function(t,e){var n=e.foreignKey1.fn(e.foreignKey1.vl);return n},usd:function(t){return{raw:(t||0).toFixed(2),str:"$ ".concat((t||0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))}},date:function(t){if(t.length<10)return t;var e=new Date(Date.parse(t)).toISOString().split("T")[0];return e}}),Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isBusy,canCancel:!0},on:{"update:active":function(e){t.isBusy=e}}}),n("b-table",{attrs:{data:t.isEmpty?[]:t.persons,columns:t.columns,striped:!0,paginated:"","per-page":5,"current-page":1,"opened-detailed":t.defaultOpenedDetails,detailed:"","detail-key":"codigo",focusable:""},on:{"details-open":function(e,n){return t.$toast.open("Expanded "+e.nombre)}},scopedSlots:t._u([{key:"header",fn:function(e){return[n("b-tooltip",{attrs:{position:"is-left",active:!!e.column.meta,label:e.column.meta,dashed:""}},[t._v("\n        "+t._s(e.column.label)+"\n      ")])]}},{key:"detail",fn:function(t){var e=t.row;return[n("person-detail",{attrs:{id:e.codigo}})]}}])},[n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered",staticStyle:{"font-size":"large"}},[n("icon",{attrs:{scale:"3",name:"thumbs-down"}}),n("p",[t._v("No results")])],1)])])],2),n("div",{staticClass:"block"},[n("button",{staticClass:"button is-small is-primary",on:{click:function(e){t.columnSelectorOpen=!t.columnSelectorOpen}}},[t._v("\n          Column Selection\n      ")])]),n("b-collapse",{staticClass:"panel",attrs:{open:t.columnSelectorOpen},on:{"update:open":function(e){t.columnSelectorOpen=e}}},[n("ul",[n("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.columns,function(e,s){return n("div",{key:s,staticClass:"control"},[n("li",[n("b-checkbox",{model:{value:e.visible,callback:function(n){t.$set(e,"visible",n)},expression:"column.visible"}},[t._v("\n              "+t._s(e.meta)+"\n            ")])],1)])}))],1)])],1)},zt=[],Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("nav",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[n("span",{staticClass:"is-size-6"},[t._v("Registro #"+t._s(t.p(t.id).codigo))])]),n("b-tabs",{model:{value:t.activeSubTab,callback:function(e){t.activeSubTab=e},expression:"activeSubTab"}},[n("b-tab-item",[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-outlined"},[n("b-icon",{attrs:{icon:"eye"}})],1)]),n("person-record",{attrs:{pers:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAlter()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-info is-outlined"},[n("b-icon",{attrs:{icon:"edit"}})],1)]),n("person-update",{attrs:{pers:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-warning has-text-weight-bold is-outlined"},[n("b-icon",{attrs:{icon:"lock"}})],1)]),n("person-auth",{attrs:{pers:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-danger is-outlined"},[n("b-icon",{attrs:{icon:"trash"}})],1)]),t._v('\n        The record for "'+t._s(t.p(t.id).nombre)+'" will be marked for deletion, will no longer appear in the persons list, but will be kept for historical purposes.\n\n        '),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-info",on:{click:function(e){t.activeSubTab=0}}},[t._v("Go back")])])]),n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-danger"},[t._v("Yes, Delete")])])])])],2)],1)],1)])},Jt=[],Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v(t._s(t.pers.tipo_de_documento))]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.pers.ruc_cedula))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Nombre")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.pers.nombre))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Telefono")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.pers.telefono))])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Direccion")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.pers.direccion))])])])]),n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Mail")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.pers.email))])])])]),n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",{class:["si"===t.pers.distribuidor?"":"strike-out"]},[t._v("\n            Distribuidor\n          ")])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",{class:["si"===t.pers.retencion?"":"strike-out"]},[t._v("\n            Retencion\n          ")])])])])])},Gt=[],Wt={props:{pers:{type:Object,required:!0,default:function(){return{codigo:9999,ruc_cedula:"34-4545",nombre:"asdf asdf asdf asdf",telefono:"23452345",direccion:"asdfasdf",distribuidor:"si",retencion:"no",tipo_de_documento:"RUC"}}}}},Ht=Wt,Zt=(n("7df5"),Object(S["a"])(Ht,Kt,Gt,!1,null,"7a5f59bc",null));Zt.options.__file="Retrieve.vue";var Xt=Zt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isUpdating,canCancel:!0},on:{"update:active":function(e){t.isUpdating=e}}}),t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.pers},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Person")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Nombre")]),n("formulate-element",{attrs:{name:"nombre",type:"text",placeholder:"Nombre y Appellidos"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Tipo de Identificación")]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:"tipo",type:"select",initial:"cedula",options:t.typesId}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Identificación")]),n("formulate-element",{attrs:{name:"ruc_cedula",type:"text",placeholder:"Codigo de identificación"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Telefono")]),n("formulate-element",{attrs:{name:"telefono",type:"tel",placeholder:"# de telefono"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Dirección")]),n("formulate-element",{attrs:{name:"direccion",type:"text",placeholder:"Dirección"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Distribuidor?")]),n("formulate-element",{attrs:{type:"checkbox",label:"  ",name:"distribuidor"}})],1),n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Retencion?")]),n("formulate-element",{attrs:{type:"checkbox",label:"  ",name:"retencion"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Correos Electronicos")]),n("formulate-element",{attrs:{name:"email",type:"text",placeholder:"Correos Electronicos"}})],1)]),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])])],1)],1)},ee=[],ne=(console.log,{props:["pers"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(R["c"])("person",{enums:"getEnums"}),Object(R["d"])("person",{isUpdating:"isUpdating"}),{formUid:function(){return"pers_".concat(this.pers.codigo)},typesId:function(){var t=[],e=this.enums.DocTypeLookup||{};return Object.keys(e).forEach(function(n){var s=e[n];t.push({name:s,value:n,id:n,label:s})}),t}}),methods:Object(A["a"])({},Object(R["b"])("person",{saveForm:"saveForm"}))}),se=ne,ae=(n("643d"),Object(S["a"])(se,te,ee,!1,null,null,null));ae.options.__file="Update.vue";var ie=ae.exports,oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.permissionsField},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",[t._v(t._s(t.pers.nombre))]),n("h5",[t._v("Sus Permisos por Recurso")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[t._l(t.resources,function(e){return n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v(t._s(e))]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:e,type:"select",initial:"0",options:t.levels}})],1)])}),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],2)])],1)],1)},re=[],ce=console.log,le={props:["pers"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(R["c"])("person",{enums:"getEnums"}),{permissionsField:function(){return ce("xxxxxxxxxxxxxxxxxxx this.pers xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"),ce(this.pers),ce(this.pers.permissions),this.pers.permissions?this.pers.permissions:{}},formUid:function(){return"pers_".concat(this.pers.codigo)},levels:function(){return St.options},resources:function(){return ce("Resources"),ce(Bt),Bt}}),methods:Object(A["a"])({},Object(R["b"])("person",{saveForm:"saveForm"}))},ue=le,de=(n("178d"),Object(S["a"])(ue,oe,re,!1,null,null,null));de.options.__file="Permissions.vue";var me=de.exports,ve=(console.log,{name:"RUDcards",props:["id"],data:function(){return{activeSubTab:0}},components:{"person-record":Xt,"person-update":ie,"person-auth":me},computed:Object(A["a"])({},Object(R["c"])("person",{p:"getPerson"})),methods:{canAlter:function(){return this.$can("alter","person")},canAssign:function(){return this.$can("assign","person")}}}),pe=ve,fe=Object(S["a"])(pe,Qt,Jt,!1,null,null,null);fe.options.__file="RUDcards.vue";var be=fe.exports,he=console.log,ge={name:"PersonList",beforeMount:function(){he("\n * * Ready to fetch persons * * \n"),this.isLoading||this.persons.length>0||this.onFetchPersons()},props:{tst:"passed in with props"},data:function(){var t=[];return{anObj:{tst:"passed in as data"},isLoading:!0,isFullPage:!1,isEmpty:!1,defaultOpenedDetails:[123],selected:t[1],columnSelectorOpen:!1}},components:{"person-detail":be},computed:Object(A["a"])({},Object(R["c"])("person",{persons:"list",columns:"getColumns"}),Object(R["d"])("person",{isLoadingList:"isFetchingList",isUpdating:"isUpdating",isCreating:"isCreating"}),{isBusy:function(){return this.isLoadingList||this.isUpdating||this.isCreating}}),methods:Object(A["a"])({},Object(R["b"])("person",{fetchPersons:"fetchAll"}),{onFetchPersons:function(){he(" * * Try to fetch persons * *"),this.fetchPersons()}})},Ce=ge,_e=Object(S["a"])(Ce,Vt,zt,!1,null,null,null);_e.options.__file="List.vue";var we=_e.exports,ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("b-tab-item",{attrs:{label:"Add Person"}},[n("Create")],1),n("b-tab-item",{attrs:{visible:t.canEdit(),label:"Persons"}},[n("router-view",{attrs:{name:"personsList"}})],1)],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1)],1)},xe=[],Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isCreating,canCancel:!0},on:{"update:active":function(e){t.isCreating=e}}}),n("formulate",{staticClass:"my-form",attrs:{name:"createPerson"},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Person")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Nombre")]),n("formulate-element",{attrs:{name:"nombre",type:"text",initial:"Joe Bloggs",placeholder:"Nombre y Appellidos"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Tipo de Identificación")]),n("formulate-element",{staticClass:"select is-small",attrs:{name:"tipo",type:"select",initial:"_05",options:t.typesId}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Identificación")]),n("formulate-element",{attrs:{name:"ruc_cedula",type:"text",initial:"1713931416",placeholder:"Codigo de identificación"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Correos Electronicos")]),n("formulate-element",{attrs:{name:"email",type:"text",initial:"a@b.cd",placeholder:"Correos Electronicos"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Distribuidor?")]),n("formulate-element",{attrs:{type:"checkbox",label:"  ",name:"distribuidor"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Retencion?")]),n("formulate-element",{attrs:{type:"checkbox",label:"  ",name:"retencion"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Telefono")]),n("formulate-element",{attrs:{name:"telefono",type:"tel",initial:"4444719",placeholder:"# de telefono"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Dirección")]),n("formulate-element",{attrs:{name:"direccion",initial:"#1 1st St., Here, There, Everywhere",type:"text",placeholder:"Dirección"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("formulate-element",{attrs:{name:"Person",initial:"0",type:"text"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("formulate-element",{attrs:{name:"Example",initial:"3",type:"text"}})],1)]),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])])],1)],1)},ke=[],Ee=console.log,Pe={props:["pers"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(R["c"])("person",{enums:"getEnums"}),Object(R["d"])("person",{isCreating:"isCreating"}),{typesId:function(){Ee("CC %%%%%%%%%%%%%%%%%%");var t=[],e=this.enums.DocTypeLookup;return e?Object.keys(e).forEach(function(n){var s=e[n];t.push({name:s,value:n,id:n,label:s})}):t.push({name:"aa",value:"AA",id:"AA-",label:"aa-"}),Ee(t),t}}),methods:Object(A["a"])({},Object(R["b"])("person",{saveForm:"saveForm"}))},De=Pe,Ie=(n("0e93"),Object(S["a"])(De,Oe,ke,!1,null,null,null));Ie.options.__file="Create.vue";var Se=Ie.exports,je=console.log,Te={name:"Person",components:{Create:Se},computed:Object(A["a"])({},Object(R["c"])("person",{currentTab:"getCurrentTab"}),{activeTab:{get:function(){return Sr.state.person.currentTab},set:function(t){return Sr.dispatch("person/setCurrentTab",t)}}}),methods:Object(A["a"])({qtst:function(){je(" ------- Quick Test -------"),this.onCreatePerson()},canEdit:function(){return this.$can("comment","persons/list")},onCreatePerson:function(){this.createPerson({data:{store:"person",mode:"post",data:{ruc_cedula:"0708217086001",nombre:"Jesu Cristo",direccion:"#1 Pearly Gates",telefono:"099-444-4719",distribuidor:"si",retencion:"si",tipo:"_04",scabetti:"333",tipo_de_documento:"RUC"}}})}},Object(R["b"])("person",{createPerson:"create",setTab:"setCurrentTab"}))},Ae=Te,Re=Object(S["a"])(Ae,ye,xe,!1,null,null,null);Re.options.__file="Layout.vue";var Le=Re.exports,$e=[{meta:"Codigo",label:"ID",field:"codigo",centered:!1,width:5,visible:!0,numeric:!0},{meta:"RUC/Cedula",label:"RUC",field:"ruc_cedula",centered:!1,width:14,visible:!0,numeric:!1},{meta:"Nombre",label:"NBR",field:"nombre",centered:!1,width:70,visible:!0,numeric:!1},{meta:"Dirección",label:"DIR",field:"direccion",centered:!1,width:"",visible:!1,numeric:!1},{meta:"Telefono",label:"TLF",field:"telefono",centered:!1,width:18,visible:!0,numeric:!1},{meta:"Distribuidor?",label:"DST",field:"distribuidor",centered:!0,width:3,visible:!1,numeric:!1},{meta:"Retencion?",label:"RET",field:"retencion",centered:!0,width:3,visible:!1,numeric:!1},{meta:"Tipo",label:"TIP",field:"tipo",centered:!0,width:3,visible:!1,numeric:!0},{meta:"Tipo de Documento",label:"DOC",field:"tipo_de_documento",centered:!1,width:27,visible:!1,numeric:!1}],Ne=console.log,Ue=[{path:"list",name:"persons/list",components:{personsList:we}}],Me=[].concat(Ue),Fe=[{name:q,path:"persons",component:Le,children:Me},{name:Y,path:"person/:id",component:Xt}];L["client"].interceptors.request.use(function(t){var e=t,n=window.ls.get(Yt.tokenName);return null!=n&&(e.headers.Authorization="JWT ".concat(n)),e},function(t){return Ne("request failed"),Promise.reject(t)});var Be={processPermissions:function(t){try{return JSON.parse(t.replace(/'/g,'"'))}catch(e){return t}}},Ye="codigo",qe="person",Ve=$()({resource:qe,idAttribute:Ye,urlRoot:"".concat(Yt.server),client:L["client"],state:{columns:$e,currentTab:0,enums:{},paginator:{s:1,c:1e3}},actions:{fetchAll:function(t){var e=t.dispatch;Ne("<<<<<< fetchAll >>>>>>"),e("fetchList",{customUrlFnArgs:Ve.state.paginator}).then(function(t){Ne(" * * Fetched persons * *"),Ne(t.columns),e("setColumns",t.columns)}).catch(function(t){Ne("*** Error while fetching persons :: >".concat(t.message,"<***")),Ne(t.message),t.message.endsWith("401")?e("handle401",null,{root:!0}):e("notifyUser",{txt:"Error while fetching persons :: ".concat(t.message),lvl:"is-danger"},{root:!0})})},setColumns:function(t,e){var n=t.commit;window.lgr.debug("Person.index --\x3e actions.setColumns"),n("tableColumns",e)},setCurrentTab:function(t,e){var n=t.commit;window.lgr.debug("Person.index --\x3e actions.setCurrentTab -- ".concat(e)),n("tab",e)},setEnums:function(t,e){var n=t.commit;window.lgr.debug("Person.index --\x3e actions.setEnums"),n("enums",e)},updLocal:function(t,e){var n=t.commit;Ne("uuuuuuu Update local record uuuuuuuuuu"),Ne("".concat(e.data.mode," ").concat(e.data.store," ").concat(e.id)),Ne(e.data.data),n("person",{id:e.id,data:e.data.data})},newLocal:function(t,e){t.dispatch;Ne("uuuuuuu Append new local record uuuuuuuuuu"),Ne("".concat(e.data.mode," ").concat(e.data.store))},saveForm:function(t,e){var n=t.dispatch;window.lgr.info("Person.index --\x3e actions.saveForm");var s=e,a={};s.retencion=e.retencion?"si":"no",s.distribuidor=e.distribuidor?"si":"no",Ne("unununu save form ununununun");var i={};Bt.map(function(t){return Ne("".concat(t," => ").concat(s[t])),i[t]=s[t],delete s[t],i[t]}),s.permissions=JSON.stringify(i).split('"').join("'"),Ne("model"),Ne(s),e.codigo?(a.id=s.codigo,a.data={mode:"patch",data:{key_column:"codigo",data:s},store:"person"},n("update",a),Ne("store"),Ne(Ve)):(delete s.codigo,a.data={mode:"post",data:s,store:"person"},n("newLocal",a),n("create",a))},backToListTab:function(t){var e=t.getters;t.dispatch;Sr.dispatch("person/fetchList",{customUrlFnArgs:e.getPaginator}),Sr.dispatch("person/setCurrentTab",0)}},getters:{getCurrentTab:function(t){return t.currentTab},getColumns:function(t){return t.columns},getPersons:function(t){return t.list},getEnums:function(t){return t.enums},getPaginator:function(t){return t.paginator},getPerson:function(t){return function(e){return t.entities[e]}}},mutations:{tab:function(t,e){window.lgr.debug("Person.index --\x3e mutations.tab -- ".concat(e)),t.currentTab=e},person:function(t,e){Ne("".concat(e.id," = ").concat(e.data.codigo,"/").concat(e.data.nombre)),t.entities[e.id]=e.data},enums:function(t,e){t.enums=e},tableColumns:function(t,e){window.lgr.debug("Person.index --\x3e mutation.tableColumns"),t.columns=e}},customUrlFn:function(t,e){Ne(Yt.server),Ne("using paginator --\x3e ".concat(e));var n=t?"/".concat(t):"",s=e?"s=".concat(e.s,"&c=").concat(e.c):"s=0&c=0";Ne("using customUrlFn( ".concat(n,", ").concat(s," )")),Ne("URI :: ".concat(Yt.server,"/api/").concat(qe).concat(n,"?").concat(s));var a="".concat(Yt.server,"/api/").concat(qe).concat(n,"?").concat(s);return a},onCreateSuccess:function(){Sr.dispatch("person/backToListTab"),window.lgr.info("Person.index --\x3e mutation.onCreateSuccess OK!")},onUpdateSuccess:function(){Sr.dispatch("person/backToListTab"),window.lgr.info("Person.index --\x3e mutation.onUpdateSuccess OK!")},parseSingle:function(t){Ne("parseSingle"),Ne(t.data),Ne(Sr.state.person.entities[t.data.itemID]);var e={};return e[Ye]=t.data.itemID,Object.assign({},t,{data:e})},parseList:function(t){var e=t.data[qe],n=e.data,s=e.titles,a=e.meta,i=e.enums,o=U(s),r=n.map(function(t,e){var n=t,s={};return a.forEach(function(t,e){n[e]=qt[t.type](n[e],{JSON1:{fn:Be.processPermissions,vl:n[e]}})}),n.forEach(function(t,e){s[o[e]]=t}),s});return Sr.dispatch("person/setEnums",i),Object.assign({},t,{data:r,columns:a,enums:i})}}),ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isBusy,canCancel:!0},on:{"update:active":function(e){t.isBusy=e}}}),n("b-table",{attrs:{data:t.isEmpty?[]:t.prods,columns:t.columns,striped:!0,paginated:"","per-page":20,"current-page":1,"opened-detailed":t.defaultOpenedDetails,detailed:"","detail-key":"codigo",focusable:""},on:{"details-open":function(e,n){return t.$toast.open("Expanded "+e.nombre)}},scopedSlots:t._u([{key:"header",fn:function(e){return[n("b-tooltip",{attrs:{position:"is-left",active:!!e.column.meta,label:e.column.meta,dashed:""}},[t._v("\n        "+t._s(e.column.label)+"\n      ")])]}},{key:"detail",fn:function(t){var e=t.row;return[n("product-detail",{attrs:{id:e.codigo}})]}}])},[n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered",staticStyle:{"font-size":"large"}},[n("icon",{attrs:{scale:"3",name:"thumbs-down"}}),n("p",[t._v("No results")])],1)])])],2),n("div",{staticClass:"block"},[n("button",{staticClass:"button is-small is-primary",on:{click:function(e){t.columnSelectorOpen=!t.columnSelectorOpen}}},[t._v("\n          Column Selection\n      ")])]),n("b-collapse",{staticClass:"panel",attrs:{open:t.columnSelectorOpen},on:{"update:open":function(e){t.columnSelectorOpen=e}}},[n("ul",[n("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.columns,function(e,s){return n("div",{key:s,staticClass:"control"},[n("li",[n("b-checkbox",{model:{value:e.visible,callback:function(n){t.$set(e,"visible",n)},expression:"column.visible"}},[t._v("\n              "+t._s(e.meta)+"\n            ")])],1)])}))],1)])],1)},Qe=[],Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"level"},t._l(t.columns,function(e){return n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v(t._s(e.meta))]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.prod(t.id)[e.field]))])])])}))])},Ke=[],Ge=(console.log,{props:["id"],computed:Object(A["a"])({},Object(R["c"])("product",{prod:"getProduct",columns:"getColumns"}))}),We=Ge,He=(n("6993"),Object(S["a"])(We,Je,Ke,!1,null,"8bfa7de0",null));He.options.__file="Retrieve.vue";var Ze=He.exports,Xe=console.log,tn={name:"ProductList",beforeMount:function(){Xe("\n * * Ready to fetch products * * \n"),this.isLoadingList||this.products.length>0||this.onFetchProducts()},props:{tst:{val:"passed in with props"}},data:function(){var t=[];return{anObj:{tst:"passed in as data"},isFullPage:!1,isEmpty:!1,defaultOpenedDetails:[123],selected:t[1],columnSelectorOpen:!1}},components:{"product-detail":Ze},computed:Object(A["a"])({},Object(R["c"])("product",{products:"list",prod:"getProduct",columns:"getColumns"}),Object(R["c"])({loggedIn:"isAuthenticated"}),Object(R["d"])("product",{isLoadingList:"isFetchingList",isUpdating:"isUpdating",isCreating:"isCreating"}),{isBusy:function(){return this.isLoadingList||this.isUpdating||this.isCreating},prods:function(){return this.products.map(function(t){var e=t;return Object.keys(e).forEach(function(t){e[t]=e[t].str||e[t]}),e})}}),methods:Object(A["a"])({},Object(R["b"])(["handle401","notifyUser"]),Object(R["b"])("product",{fetchProducts:"fetchAll",setColumns:"setColumns"}),{onFetchProducts:function(){Xe(" * * Try to fetch products * *"),this.fetchProducts()}})},en=tn,nn=Object(S["a"])(en,ze,Qe,!1,null,null,null);nn.options.__file="List.vue";var sn=nn.exports,an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-tabs",[n("b-tab-item",{attrs:{label:"Products"}},[n("router-view",{attrs:{name:"productsList"}})],1)],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1)],1)},on=[],rn=(console.log,{name:"Product"}),cn=rn,ln=Object(S["a"])(cn,an,on,!1,null,null,null);ln.options.__file="Layout.vue";var un=ln.exports,dn=[{meta:"Codigo",label:"ID",field:"codigo",centered:!1,width:8,visible:!0,type:"integer",usage:"rw",numeric:!0,idx:0},{meta:"Nombre",label:"NBR",field:"nombre",centered:!0,width:70,visible:!0,type:"title",usage:"rw",numeric:!1,idx:1},{meta:"Unidad",label:"UNI",field:"unidad",centered:!1,width:16,visible:!0,type:"text",usage:"rw",numeric:!1,idx:2},{meta:"IVA",label:"IVA",field:"iva",centered:!1,width:"4",visible:!0,type:"percent",usage:"r",numeric:!0,idx:3},{meta:"Valor",label:"VAL",field:"valor",centered:!1,width:10,visible:!0,type:"usd",usage:"r",numeric:!0,idx:4},{meta:"Valor Distribuidor",label:"VLD",field:"valor_distribuidor",centered:!1,width:10,visible:!1,type:"usd",usage:"r",numeric:!0,idx:5},{meta:"Porcentaje",label:"PCT",field:"porcentaje",centered:!1,width:4,visible:!1,type:"percent",usage:"r",numeric:!0,idx:6}],mn=console.log,vn=[{name:W,path:"list",components:{productsList:sn}}],pn=[].concat(vn),fn=[{name:G,path:"products",component:un,children:pn}],bn="codigo",hn="product",gn=$()({resource:hn,idAttribute:bn,urlRoot:"".concat(Yt.server,"/api/").concat(hn),client:L["client"],state:{columns:dn,enums:{},productsMap:{},paginator:{s:1,c:100}},actions:{fetchAll:function(t){var e=t.dispatch;mn("<<<<<< fetchAll >>>>>>"),e("fetchList",{customUrlFnArgs:{s:1,c:100}}).then(function(t){mn(" * * Fetched products * *"),mn(t.columns),e("setColumns",t.columns)}).catch(function(t){mn("*** Error while fetching products :: ".concat(t,"***")),mn(t.message),t.message.endsWith("401")?e("handle401",null,{root:!0}):e("notifyUser",{txt:"Error while fetching products :: ".concat(t.message),lvl:"is-danger"},{root:!0})})},setColumns:function(t,e){var n=t.commit;window.lgr.info("Product.index --\x3e actions.setColumns"),mn(e),n("tableColumns",e)},setEnums:function(t,e){var n=t.commit;window.lgr.info("Product.index --\x3e actions.setEnums"),n("enums",e)},setMap:function(t,e){var n=t.commit;window.lgr.info("Product.index --\x3e actions.setProdMap"),n("prodMap",e)}},getters:{getColumns:function(t){return t.columns},getProducts:function(t){return t.list},getEnums:function(t){return t.enums},getProductsMap:function(t){return t.productsMap},getPaginator:function(t){return t.paginator},getProduct:function(t){return function(e){return t.entities[e]}}},mutations:{products:function(t,e){mn("".concat(e.id," = ").concat(e.data.codigo,"/").concat(e.data.nombre)),t.entities[e.id]=e.data},enums:function(t,e){t.enums=e},prodMap:function(t,e){t.productsMap=e},tableColumns:function(t,e){window.lgr.debug("Product.index --\x3e mutation.tableColumns"),t.columns=e}},customUrlFn:function(t,e){mn(Yt.server),mn("using paginator --\x3e ".concat(e));var n=t?"/".concat(t):"",s=e?"s=".concat(e.s,"&c=").concat(e.c):"s=0&c=0";mn("using customUrlFn( ".concat(n,", ").concat(s," )")),mn("URI :: ".concat(Yt.server,"/api/").concat(hn).concat(n,"?").concat(s));var a="".concat(Yt.server,"/api/").concat(hn).concat(n,"?").concat(s);return a},parseSingle:function(t){mn("parseSingle"),mn(t.data),mn(Sr.state.products.entities[t.data.itemID]);var e={};return e[bn]=t.data.itemID,Object.assign({},t,{data:e})},parseList:function(t){var e=t.data[hn],n=e.data,s=e.titles,a=e.meta,i=e.enums,o=U(s),r={},c=n.map(function(t){var e=t;return a.forEach(function(t,n){e[n]=qt[t.type](e[n])}),e.forEach(function(t,n){return e[o[n]]=t,t}),r[t.codigo]=t,e});return Sr.dispatch("product/setEnums",i),Sr.dispatch("product/setMap",r),Object.assign({},t,{data:c,columns:a,enums:i})}}),Cn=n("6bde"),_n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isBusy,canCancel:!0},on:{"update:active":function(e){t.isBusy=e}}}),n("b-table",{attrs:{data:t.isEmpty?[]:t.formattedInvoices,columns:t.columns,striped:!0,paginated:"","per-page":20,"current-page":1,"opened-detailed":t.defaultOpenedDetails,detailed:"","detail-key":"codigo",focusable:"",narrowed:!0,"mobile-cards":t.hasMobileCards},on:{"details-open":function(e,n){return t.$toast.open("Expanded "+e.nombre)}},scopedSlots:t._u([{key:"header",fn:function(e){return[n("b-tooltip",{attrs:{position:"is-left",active:!!e.column.meta,label:e.column.meta,dashed:""}},[t._v("\n        "+t._s(e.column.label)+"\n      ")])]}},{key:"detail",fn:function(t){var e=t.row;return[n("invoice-detail",{attrs:{id:e.codigo}})]}}])},[n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered",staticStyle:{"font-size":"large"}},[n("icon",{attrs:{scale:"3",name:"thumbs-down"}}),n("p",[t._v("No results")])],1)])])],2),n("div",{staticClass:"control cardMode"},[n("b-switch",{model:{value:t.hasMobileCards,callback:function(e){t.hasMobileCards=e},expression:"hasMobileCards"}},[t._v("Modo tarjeta "),n("small",[t._v("(filas estrechas)")])])],1),n("div",{staticClass:"block"},[n("button",{staticClass:"button is-small is-primary",on:{click:function(e){t.columnSelectorOpen=!t.columnSelectorOpen}}},[t._v("\n        Escoger Columnas\n    ")])]),n("b-collapse",{staticClass:"panel",attrs:{open:t.columnSelectorOpen},on:{"update:open":function(e){t.columnSelectorOpen=e}}},[n("ul",[n("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.columns,function(e,s){return n("div",{key:s,staticClass:"control"},[n("li",[n("b-checkbox",{model:{value:e.visible,callback:function(n){t.$set(e,"visible",n)},expression:"column.visible"}},[t._v("\n              "+t._s(e.meta)+"\n            ")])],1)])}))],1)])],1)},wn=[],yn=n("826c"),xn=n.n(yn),On=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("nav",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[n("span",{staticClass:"is-size-6"},[t._v("Registro #"+t._s(t.p(t.id).codigo))])]),n("b-tabs",{model:{value:t.activeSubTab,callback:function(e){t.activeSubTab=e},expression:"activeSubTab"}},[n("b-tab-item",[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-outlined"},[n("b-icon",{attrs:{icon:"eye"}})],1)]),n("invoice-record",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAlter()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-info is-outlined"},[n("b-icon",{attrs:{icon:"edit"}})],1)]),n("invoice-update",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-warning has-text-weight-bold is-outlined"},[n("b-icon",{attrs:{icon:"lock"}})],1)]),n("invoice-auth",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-danger is-outlined"},[n("b-icon",{attrs:{icon:"trash"}})],1)]),t._v('\n        The record for "'+t._s(t.p(t.id).nombre)+'" will be marked for deletion, will no longer appear in the invoices list, but will be kept for historical purposes.\n\n        '),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-info",on:{click:function(e){t.activeSubTab=0}}},[t._v("Go back")])])]),n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-danger"},[t._v("Yes, Delete")])])])])],2)],1)],1)])},kn=[],En=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Codigo")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.codigo))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Fecha")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.fecha))])])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Cliente")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.codigo_cliente))]),n("p",{class:["si"===t.invc.distribuidor?"has-text-info":"is-invisible"]},[t._v("\n            Distribuidor\n          ")])])]),n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Mail")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.email))])])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("b-table",{attrs:{data:t.detail,narrowed:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"cant",label:"Cantidad",width:"10",numeric:""}},[t._v("\n                  "+t._s(e.row.cantidad)+"\n              ")]),n("b-table-column",{attrs:{field:"nombre",label:"Nombre",width:"400"}},[t._v("\n                  ("+t._s(e.row.codigo)+") "+t._s(e.row.nombre)+"\n              ")]),n("b-table-column",{attrs:{field:"nombre",label:"Unidades"}},[t._v("\n                  "+t._s(e.row.unidad)+"\n              ")]),n("b-table-column",{attrs:{field:"precio",label:"Precio",width:"100"}},[t._v("\n                  "+t._s(e.row.precio)+"\n              ")]),n("b-table-column",{attrs:{field:"descuento",label:"Descuento Especial",width:"10"}},[t._v("\n                  "+t._s(e.row.descuento)+"\n              ")]),n("b-table-column",{attrs:{field:"total",label:"Total",width:"100"}},[t._v("\n                  "+t._s(e.row.total)+"\n              ")])]}}])})],1)]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Estado")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.enums[t.invc.estado]))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("b-table",{attrs:{data:t.totals||[],bordered:!0,narrowed:!0,"mobile-cards":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"title"}},[t._v("\n                  "+t._s(e.row.title)+"\n              ")]),n("b-table-column",{attrs:{field:"value",numeric:""}},[t._v("\n                  "+t._s(e.row.value)+"\n              ")])]}}])})],1)])])},Pn=[],Dn=console.log,In={data:function(){var t=[];return{totals:t}},computed:Object(A["a"])({},Object(R["c"])("invoice",{enums:"getEnums"}),{detail:function(){Dn("  *************** INVC **********************\n      ");var t=this.invc,e=t.lista_de_items,n="si"===t.distribuidor;Dn(this);var s=[];Dn("items object"),Dn(e);for(var a=0;a<e.length;a+=1){var i=e[a],o=n?i[0].valor_distribuidor:i[0].valor,r=i[1],c=qt.percent(i[2],0);Dn("At ".concat(a," -- ").concat(i[0].unidad," (").concat(i[0].codigo,") ").concat(i[0].nombre)),s.push({codigo:i[0].codigo,nombre:i[0].nombre,unidad:i[0].unidad,cantidad:r,precio:o.str,descuento:qt.percent(1-c.raw,0).str,total:qt.usd(o.raw*r-c.raw).str})}return this.totals=[],this.totals.push({title:"Subtotal IVA 12%",value:t.subtotal_iva_12.str}),this.totals.push({title:"Descuento Especial",value:t.descuento_especial.str}),this.totals.push({title:"Valor",value:t.subtotal_descontado.str}),this.totals.push({title:"IVA",value:qt.usd(t.total_calculado.raw-t.subtotal_descontado.raw).str}),this.totals.push({title:"Valor Total",value:t.total_calculado.str}),this.totals.push({title:"Retenido",value:t.retenido.str}),this.totals.push({title:"Total Final",value:t.monto_final.str}),s}}),props:{invc:{type:Object,required:!0,default:function(){return{codigo:9999,ruc_cedula:"34-4545",nombre:"asdf asdf asdf asdf",telefono:"23452345",direccion:"asdfasdf",distribuidor:"si",retencion:"no",tipo_de_documento:"RUC"}}}}},Sn=In,jn=(n("c2e7"),Object(S["a"])(Sn,En,Pn,!1,null,"23bf70aa",null));jn.options.__file="Retrieve.vue";var Tn=jn.exports,An=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isUpdating,canCancel:!0},on:{"update:active":function(e){t.isUpdating=e}}}),t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.invc},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Invoice")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])])],1)],1)},Rn=[],Ln=(console.log,{props:["invc"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(R["c"])("invoice",{enums:"getEnums"}),Object(R["d"])("invoice",{isUpdating:"isUpdating"}),{formUid:function(){return"pers_".concat(this.invc.codigo)},typesId:function(){var t=this.enums.DocTypeLookup,e=[];return Object.keys(t).forEach(function(n){var s=t[n];e.push({name:s,value:n,id:n,label:s})}),e}}),methods:Object(A["a"])({},Object(R["b"])("invoice",{saveForm:"saveForm"}))}),$n=Ln,Nn=(n("366c"),Object(S["a"])($n,An,Rn,!1,null,null,null));Nn.options.__file="Update.vue";var Un=Nn.exports,Mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.permissionsField},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",[t._v(t._s(t.invc.nombre))]),n("h5",[t._v("Sus Permisos por Recurso")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[t._l(t.resources,function(e){return n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v(t._s(e))]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:e,type:"select",initial:"0",options:t.levels}})],1)])}),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],2)])],1)],1)},Fn=[],Bn=console.log,Yn={props:["invc"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(R["c"])("invoice",{enums:"getEnums"}),{permissionsField:function(){return Bn("xxxxxxxxxxxxxxxxxxx this.invc xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"),Bn(this.invc),Bn(this.invc.permissions),this.invc.permissions?this.invc.permissions:{}},formUid:function(){return"pers_".concat(this.invc.codigo)},levels:function(){return St.options},resources:function(){return Bn("Resources"),Bn(Bt),Bt}}),methods:Object(A["a"])({},Object(R["b"])("invoice",{saveForm:"saveForm"}))},qn=Yn,Vn=(n("d224"),Object(S["a"])(qn,Mn,Fn,!1,null,null,null));Vn.options.__file="Permissions.vue";var zn=Vn.exports,Qn={name:"RUDcards",props:["id","distributor"],data:function(){return{activeSubTab:0}},components:{"invoice-record":Tn,"invoice-update":Un,"invoice-auth":zn},methods:{canAlter:function(){return this.$can("alter","invoice")},canAssign:function(){return this.$can("assign","invoice")}},computed:Object(A["a"])({},Object(R["c"])("invoice",{p:"getInvoice"}))},Jn=Qn,Kn=Object(S["a"])(Jn,On,kn,!1,null,null,null);Kn.options.__file="RUDcards.vue";var Gn=Kn.exports,Wn=console.log,Hn={name:"InvoiceList",beforeMount:function(){var t=this;Wn("\n\n\n                  * * Ready to fetch invoices * *\n\n\n      "),Wn(Ve.state.list.length),Wn(Ve.state.isFetchingList),Wn(this.$store);var e=7;switch((Ve.state.list.length>0||Ve.state.isFetchingList)&&(Wn("Don't load persons"),e-=4),(gn.state.list.length>0||gn.state.isFetchingList)&&(Wn("Don't load products"),e-=2),(this.invoices.length>0||this.isLoadingList)&&(Wn("Don't load invoices"),e-=1),e){case 7:case 6:Wn("Load all"),this.$store.dispatch("person/fetchAll").then(function(){Wn("Loaded persons"),t.$store.dispatch("product/fetchAll").then(function(){Wn("Loaded products"),t.onFetchInvoices()})});break;case 5:case 4:Wn("Person then invoices"),Wn("Load all"),this.$store.dispatch("person/fetchAll").then(function(){Wn("Loaded persons"),t.onFetchInvoices()});break;case 3:case 2:Wn("Product then invoices"),Wn("Load all"),this.$store.dispatch("product/fetchAll").then(function(){Wn("Loaded products"),t.onFetchInvoices()});break;case 1:Wn("Load invoices"),this.onFetchInvoices();break;default:Wn("No loading needed")}},props:{tst:"passed in with props"},data:function(){var t=[];return{anObj:{tst:"passed in as data"},hasMobileCards:!1,isFullPage:!1,isEmpty:!1,defaultOpenedDetails:[4358],selected:t[1],columnSelectorOpen:!1}},components:{"invoice-detail":Gn},computed:Object(A["a"])({},Object(R["c"])("invoice",{invoices:"list",columns:"getColumns"}),Object(R["c"])({loggedIn:"isAuthenticated"}),Object(R["d"])("invoice",{isLoadingList:"isFetchingList",isUpdating:"isUpdating",isCreating:"isCreating"}),{formattedInvoices:function(){return this.invoices.map(function(t){var e={};return Object.entries(t).forEach(function(t){var n=Object(M["a"])(t,2),s=n[0],a=n[1];e[s]=a.str||a}),e})},isBusy:function(){return this.isLoadingList||this.isUpdating||this.isCreating}}),methods:Object(A["a"])({},Object(R["b"])(["handle401","notifyUser"]),Object(R["b"])("invoice",{fetchInvoices:"fetchAll",setColumns:"setColumns"}),{onFetchInvoices:function(){var t=this;Wn(" * * Try to fetch invoices * *"),xn()().interval(100).times(20).condition(function(){return!Ve.state.isFetchingList&&!gn.state.isFetchingList}).done(function(){return t.fetchInvoices()})}})},Zn=Hn,Xn=(n("ecdc"),Object(S["a"])(Zn,_n,wn,!1,null,null,null));Xn.options.__file="List.vue";var ts=Xn.exports,es=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("b-tab-item",{attrs:{label:"Invoices"}},[n("router-view",{attrs:{name:"invoicesList"}})],1),n("b-tab-item",{attrs:{visible:t.canEdit(),label:"Add Invoice"}},[n("Create")],1)],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1)],1)},ns=[],ss=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isCreating,canCancel:!0},on:{"update:active":function(e){t.isCreating=e}}}),n("formulate",{staticClass:"my-form",attrs:{name:"createInvoice"},on:{submit:t.commitForm}},[n("formulate-element",{attrs:{name:"summation",type:"hidden",placeholder:"-1"}}),n("formulate-element",{attrs:{name:"items",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Invoice")]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Cliente")]),n("formulate-element",{attrs:{name:"Persona",validation:"required","element-classes":"nameInput"}},[n("autocomplete-input",{attrs:{items:t.personsId||null},on:{"selection-made":t.setPersona},model:{value:t.Persona,callback:function(e){t.Persona=e},expression:"Persona"}})],1)],1)]),n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Fecha")]),n("formulate-element",{attrs:{name:"InvoiceDate",validation:"required"}},[n("dateselect-input",{model:{value:t.InvoiceDate,callback:function(e){t.InvoiceDate=e},expression:"InvoiceDate"}})],1)],1)]),n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Descuento")]),n("formulate-element",{attrs:{name:"desc",placeholder:"0","element-classes":"resizedTextbox",validation:"isPct(desc)"}})],1)])]),n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column"},[n("label",{staticClass:"label"},[t._v("Itemes")]),n("button",{staticClass:"button is-info",on:{click:t.openModal}},[n("b-icon",{attrs:{icon:"plus"}}),n("span",[t._v("Anadir item")])],1),n("button",{staticClass:"button field is-danger",attrs:{disabled:!t.checkedRows.length},on:{click:t.dropRow}},[n("b-icon",{attrs:{icon:"trash"}}),n("span",[t._v("Borrar seleccionadas")])],1),n("b-modal",{attrs:{active:t.isComponentModalActive,"has-modal-card":""},on:{"update:active":function(e){t.isComponentModalActive=e}}},[n("detailsForm")],1),n("b-table",{attrs:{data:t.tableData,"checked-rows":t.checkedRows,checkable:""},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{label:"Codigo",numeric:""}},[t._v("\n                    "+t._s(e.row.codigo)+"\n                  ")]),n("b-table-column",{attrs:{label:"Producto/Servicio"}},[t._v("\n                    "+t._s(e.row.nombre)+"\n                  ")]),n("b-table-column",{attrs:{label:"Unidad"}},[t._v("\n                    "+t._s(e.row.unidad)+"\n                  ")]),n("b-table-column",{attrs:{label:"Valor",numeric:""}},[t._v("\n                    "+t._s(e.row.valor)+"\n                  ")]),n("b-table-column",{attrs:{label:"IVA",numeric:""}},[t._v("\n                    "+t._s(e.row.iva.str)+"\n                  ")]),n("b-table-column",{attrs:{label:"Cantidad",centered:""}},[t._v("\n                    "+t._s(e.row.cantidad)+"\n                  ")]),n("b-table-column",{attrs:{label:"Total",numeric:""}},[t._v("\n                    "+t._s(e.row.total)+"\n                  ")])]}}])},[n("template",{slot:"footer"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-offset-2 is-narrow-mobile"},[n("div",{staticClass:"box",staticStyle:{width:"125px"}},[t.retention?n("div",{class:["si"===t.retention?"":"strike-out"]},[t._v("\n                          Retencion\n                        ")]):t._e(),t.distributor?n("div",{class:["si"===t.distributor?"":"strike-out"]},[t._v("\n                          Distribuidor\n                        ")]):t._e()])]),n("div",{staticClass:"column is-5"},[n("div",{staticClass:"box"},[n("b-table",{attrs:{data:t.totals},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{width:"180"}},[t._v("\n                                "+t._s(e.row.label)+"\n                            ")]),n("b-table-column",{attrs:{numeric:""}},[t._v("\n                              "+t._s(e.row.value)+"\n                            ")])]}}])})],1)]),n("div",{staticClass:"column is-1"})])])],2),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],1)])])],1)],1)},as=[],is=(n("4917"),n("f4fb")),os=n.n(is),rs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"autocomplete"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:t.elemId,attrs:{type:"text",id:t.elemId},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.onChange],blur:t.onBlur,keyup:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.onArrowDown(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.onArrowUp(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onEnter(e):null}]}}),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"autocomplete-choices",attrs:{id:"autocomplete-choices"}},[t.isLoading?n("li",{staticClass:"loading"},[t._v("Loading choices")]):t._l(t.choices,function(e,s){return n("li",{key:s,staticClass:"autocomplete-choice",class:{"is-active":s===t.arrowCounter},on:{click:function(n){t.setChoice(e)}}},[t._v("\n      "+t._s(e)+"\n    ")])})],2)])},cs=[],ls=(n("20d6"),n("386d"),console.log),us=(console.error,{name:"autocomplete",template:"#autocomplete",props:{elemId:{type:String,required:!0,default:function(){return"autocomplete"}},items:{type:Object,required:!1,default:function(){return{}}},isAsync:{type:Boolean,required:!1,default:!1}},data:function(){return{isOpen:!1,choices:[],search:"",isLoading:!1,arrowCounter:0}},methods:{onChange:function(){this.isAsync?this.isLoading=!0:(this.filterChoices(),this.isOpen=!0)},filterChoices:function(){var t=this;this.choices=this.items.list.filter(function(e){return e.label.toLowerCase().indexOf(t.search.toLowerCase())>-1}).map(function(t){return t.label})},setValue:function(t){ls("elemId ".concat(this.elemId)),ls("elemId ".concat(JSON.stringify(this.$refs,null,2))),this.$refs[this.elemId].value=t},setChoice:function(t){ls("setChoice = ".concat(t)),this.search=t,this.isOpen=!1,this.arrowCounter=this.choices.findIndex(function(e){return e===t}),this.gotOne()},onArrowDown:function(){this.arrowCounter<this.choices.length&&(this.arrowCounter+=1)},onArrowUp:function(){this.arrowCounter>0&&(this.arrowCounter-=1)},gotOne:function(){var t=this;ls(" gotOne \n\n"),this.search=this.choices[this.arrowCounter],this.search&&this.search.length>1&&this.choices.includes(this.search)&&(this.$emit("selection-made",this.items.list.filter(function(e){return e.label.indexOf(t.search)>-1})[0]),ls("Chose ".concat(this.search))),this.arrowCounter=-1},onBlur:function(){},onEnter:function(){ls(" onEnter ".concat(this.isOpen)),this.isOpen&&(this.gotOne(),this.isOpen=!1,this.arrowCounter=-1)},handleClickOutside:function(t){this.$el.contains(t.target)||(this.isOpen=!1,this.arrowCounter=-1,ls(" handleClickOutside "))}},watch:{items:function(t,e){t.length!==e.length&&(this.choices=t,this.isLoading=!1)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}}),ds=us,ms=(n("997e"),Object(S["a"])(ds,rs,cs,!1,null,"92baa366",null));ms.options.__file="AutoComplete.vue";var vs=ms.exports,ps=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-date-picker",{ref:"datePicked",attrs:{formats:t.formats,mode:"single"},on:{input:t.datePick},model:{value:t.theDate,callback:function(e){t.theDate=e},expression:"theDate"}})},fs=[],bs=(console.log,{props:{value:{type:[Date,Boolean],default:!1}},created:function(){this.$emit("input",new Date)},methods:{datePick:function(){this.$emit("input",this.theDate)}},data:function(){return{theDate:new Date,formats:{title:"MMMM / YYYY",weekdays:"W",navMonths:"MMM",input:["YYYY-MM-DD","YYYY/MM/DD"],dayPopover:"L",data:["L","YYYY-MM-DD","YYYY/MM/DD"]}}}}),hs=bs,gs=Object(S["a"])(hs,ps,fs,!1,null,null,null);gs.options.__file="DateSelect.vue";var Cs=gs.exports,_s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[n("formulate",{staticClass:"my-form",attrs:{name:"invoiceDetails"},on:{submit:t.saveForm}},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"title"},[t._v("Item")])]),n("section",{staticClass:"modal-card-body"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-four-fifths"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Producto / Servicio")]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:"code",type:"select",initial:"nombre",options:t.typesId}})],1)]),n("div",{staticClass:"column is-one-fifth"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Cantidad")]),n("formulate-element",{attrs:{name:"qty",placeholder:"cantidad","element-classes":"resizedTextbox"}})],1)])])]),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v("Close")]),n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])],1)},ws=[],ys=console.log,xs={computed:Object(A["a"])({},Object(R["c"])("product",{products:"list",productsMap:"getProductsMap"}),{typesId:function(){ys("%%%%%%%%%%%%%%%%%%%% CC %%%%%%%%%%%%%%%%%%"),ys(this),ys(this.$store.getters);var t=[],e=this.products;return e&&Object.keys(e).forEach(function(n){var s=e[n];t.push({name:s.nombre,value:s.codigo,id:s.codigo,label:"".concat(s.nombre," (").concat(s.unidad,")")})}),ys(t),t}}),methods:Object(A["a"])({},Object(R["b"])("invoice",{saveRow:"saveRow"}),{saveForm:function(t){this.saveRow({rowNum:-1,values:t}),this.$parent.close()}})},Os=xs,ks=(n("f1b4"),Object(S["a"])(Os,_s,ws,!1,null,null,null));ks.options.__file="Details.vue";var Es=ks.exports,Ps=console.log,Ds={props:["pers"],components:{detailsForm:Es,"autocomplete-input":vs,"dateselect-input":Cs},created:function(){this.persons&&this.persons.length>0&&this.productsMap&&Object.keys(this.productsMap).length>0&&this.products&&this.products.length>0||this.$router.push({name:"home"})},data:function(){var t=[];return{totals:t,isComponentModalActive:!1,checkedRows:[],retention:null,distributor:null,myDate:new Date,formats:{title:"MMMM / YYYY",weekdays:"W",navMonths:"MMM",input:["YYYY-MM-DD","YYYY/MM/DD"],dayPopover:"L",data:["L","YYYY-MM-DD","YYYY/MM/DD"]}}},computed:Object(A["a"])({},Object(R["c"])("invoice",{enums:"getEnums"}),Object(R["c"])("product",{products:"list",productsMap:"getProductsMap"}),Object(R["c"])("person",{persons:"list",getPerson:"getPerson"}),Object(R["d"])("invoice",{isCreating:"isCreating",formRows:"formRows"}),Object(d["mapModels"])({Persona:"createInvoice/Persona",InvoiceDate:"createInvoice/InvoiceDate"}),{tableData:function(){var t=this,e=[],n=this.$store.state;if(n.values.createInvoice){var s=n.values.createInvoice;s.Persona=s.Persona||"(0) no one",s.InvoiceDate=s.InvoiceDate||new Date;var a=[{codigo:"codigo",nombre:"nombre",unidad:"unidad",iva:"iva",valor:"$0.00",cantidad:0,total:"$0.00"}];Ps("\n\n\n          tableData() ----------------------------"),Ps(this.productsMap);var i=s.Persona.match(/\(([^)]+)\)/)[1],o=this.getPerson(i);this.retention=o&&o.retencion||null,this.distributor=o&&o.distribuidor||null,this.totals=[];var r=0,c=0,l=0,u={distributor:this.distributor,person:i,discountPct:0,iva0:0,iva12:0,subtotal:0,discount:0,retention:0,total:0};if(this.products.length<1)return a;if(this.formRows.row.length<1)return a;if(this.formRows.row[0].code<0)return a;this.formRows.row.forEach(function(n){Ps("row"),Ps(n);var s=t.productsMap[n.code];Ps(s.porcentaje.raw),t.distributor&&"si"===t.distributor?(r=s.valor_distribuidor.str,c=s.valor_distribuidor.raw,l=qt.percent(s.valor_distribuidor.raw/s.valor.raw)):(r=s.valor.str,c=s.valor.raw,l=qt.percent(1));var a=c*n.qty;Ps(s.iva);var i=0===s.iva.raw?a:0,o=s.iva.raw>0?a:0;u.iva0+=i,u.iva12+=o,u.subtotal+=i+o,e.push({codigo:n.code,nombre:s.nombre,unidad:s.unidad,discount:l,iva:s.iva,valor:r,cantidad:n.qty,total:qt.usd(c*n.qty).str})}),Ps("rows"),Ps(e),u.discountPct=s&&s.desc||0,u.discount=u.discountPct/100*u.subtotal,u.valor=u.subtotal-u.discount,u.iva=.12*u.valor,u.total=u.valor+u.iva,u.final=u.total,u.iva0>0&&this.totals.push({label:"Subtotal IVA  0%",value:qt.usd(u.iva0).str}),this.totals.push({label:"Subtotal IVA 12%",value:qt.usd(u.iva12).str}),this.totals.push({label:"Descuento Especial",value:qt.usd(u.discount).str}),this.totals.push({label:"Valor",value:qt.usd(u.valor).str}),this.totals.push({label:"IVA",value:qt.usd(u.iva).str}),this.totals.push({label:"Valor Total",value:qt.usd(u.total).str}),u.final=u.total,"si"===this.retention&&(u.retention=.01*u.total,u.final=u.total-u.retention,this.totals.push({label:"Retenido",value:qt.usd(u.retention).str})),this.totals.push({label:"Total Final",value:qt.usd(u.final).str}),Ps("summation.iva0 ".concat(u.iva0)),Ps("summation.iva12 ".concat(u.iva12)),Ps("summation.discountPct ".concat(u.discountPct)),Ps("summation.discount ".concat(u.discount)),Ps("summation.valor ".concat(u.valor)),Ps("summation.iva ".concat(u.iva)),Ps("summation.total ".concat(u.total)),Ps("summation.retention ".concat(u.retention)),Ps("summation.final ".concat(u.final)),s.summation=u,s.items=e,Ps(s),Ps(this.$store),Ps(e)}return e},personsId:function(){Ps("%%%%%%%%%%%%%%%% personsId %%%%%%%%%%%%%%%%%% "),Ps(this);var t=[],e=this.persons;return e&&(Ps("prsns"),Object.keys(e).forEach(function(n){var s=e[n];t.push({value:s.codigo,label:"".concat(s.nombre)})})),Ps(t),{list:t,data:function(t){return"(".concat(t.value,") ").concat(t.label)}}}}),methods:Object(A["a"])({},Object(R["b"])("invoice",{saveForm:"saveForm"}),{setPersona:function(t){Ps("persona ".concat(JSON.stringify(t,null,2)))},openModal:function(t){t.preventDefault(),this.isComponentModalActive=!0},dropRow:function(t){var e=this;this.checkedRows.forEach(function(t){e.formRows.row.forEach(function(n,s){n.code===t.codigo&&n.code===t.codigo&&e.formRows.row.splice(s,1)})}),Ps(this.checkedRows),t.preventDefault()},commitForm:function(t){this.saveForm(t)},setItem:function(t){Ps("Item ".concat(t.qty," of ").concat(t.code))}})},Is=Ds,Ss=(n("85cc"),Object(S["a"])(Is,ss,as,!1,null,"e0690ffe",null));Ss.options.__file="Create.vue";var js=Ss.exports,Ts=console.log,As={name:"Invoice",components:{Create:js},computed:Object(A["a"])({},Object(R["c"])("invoice",{currentTab:"getCurrentTab"}),{activeTab:{get:function(){return Sr.state.invoice.currentTab},set:function(t){return Sr.dispatch("invoice/setCurrentTab",t)}}}),methods:Object(A["a"])({canEdit:function(){return this.$can("comment","invoices/list")},qtst:function(){Ts(" ------- Quick Test -------"),this.onCreateInvoice()}},Object(R["b"])("invoice",{createInvoice:"create",setTab:"setCurrentTab"}))},Rs=As,Ls=Object(S["a"])(Rs,es,ns,!1,null,null,null);Ls.options.__file="Layout.vue";var $s=Ls.exports,Ns=[{meta:"Codigo",label:"COD",field:"codigo",centered:!1,visible:!0,width:5,numeric:!0,type:"integer",usage:"rw",idx:0},{meta:"Fecha",label:"FECH",field:"fecha",centered:!0,visible:!0,width:"10",numeric:!1,type:"date",usage:"rw",idx:1},{meta:"Estado",label:"ESTS",field:"estado",centered:!0,visible:!1,width:10,numeric:!1,type:"text",usage:"rw",idx:2},{meta:"Codigo Cliente",label:"CCLI",field:"codigo_cliente",centered:!0,visible:!0,width:6,numeric:!1,type:"foreignKey1",usage:"rw",idx:3},{meta:"Distribuidor",label:"DIST",field:"distribuidor",centered:!0,visible:!0,width:4,numeric:!1,type:"text",usage:"rw",idx:4},{meta:"Descuento Especial",label:"DESC",field:"descuento_especial",centered:!1,visible:!1,width:12,numeric:!0,type:"percent",usage:"rw",idx:5},{meta:"Lista de Items",label:"ITMS",field:"lista_de_items",centered:!0,visible:!1,width:4,numeric:!0,type:"JSON1",usage:"rw",idx:6},{meta:"Subtotal IVA 12%",label:"IV12",field:"subtotal_iva_12",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:7},{meta:"Subtotal IVA 0%",label:"IV00",field:"subtotal_iva_0",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:8},{meta:"Subtotal Descontado",label:"STDC",field:"subtotal_descontado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:9},{meta:"Total Calculado",label:"TOTL",field:"total_calculado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:10},{meta:"Retenido",label:"RETN",field:"retenido",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:11},{meta:"Monto Final",label:"MNTO",field:"monto_final",centered:!1,visible:!0,width:12,numeric:!0,type:"usd",usage:"rw",idx:12},{meta:"Total Cobrado",label:"COBR",field:"total_cobrado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:13}],Us=void 0,Ms=console.log,Fs=[{name:tt,path:"list",components:{invoicesList:ts}}],Bs=[].concat(Fs),Ys=[{name:et,path:"invoices",component:$s,children:Bs},{name:nt,path:"invoice/:id",component:Tn}];L["client"].interceptors.request.use(function(t){var e=t,n=window.ls.get(Yt.tokenName);return null!=n&&(e.headers.Authorization="JWT ".concat(n)),e},function(t){return Ms("request failed"),Promise.reject(t)});var qs={processPersonFK:function(t){var e=Ve.state.entities[t];return e?e.nombre:"Usuario #".concat(t)},processDetailsJSON:function(t){if(!gn.state.entities)return t;if(Object.keys(gn.state.entities).length<1)return t;try{return JSON.parse(t.replace(/'/g,'"')).details.filter(function(t){return t[0]>0}).map(function(t){return[gn.state.entities[t[0]],t[1],t[2]]})}catch(e){return t}}},Vs="codigo",zs="invoice",Qs=$()({resource:zs,idAttribute:Vs,urlRoot:"".concat(Yt.server),client:L["client"],state:{columns:Ns,currentTab:0,enums:{},paginator:{s:1,c:1e4},formRows:{row:[]}},actions:{fetchAll:function(t){var e=t.dispatch;Ms("<<<<<< fetchAll >>>>>>"),e("fetchList",{customUrlFnArgs:Qs.state.paginator}).then(function(t){Ms(" * * Fetched invoices * *"),Ms(t.columns),e("setColumns",t.columns)}).catch(function(t){Ms("*** Error while fetching invoices :: >".concat(t.message,"<***")),Ms(t.message),t.message.endsWith("401")?e("handle401",null,{root:!0}):e("notifyUser",{txt:"Error fetching invoices :: ".concat(t.message),lvl:"is-danger"},{root:!0})})},setColumns:function(t,e){var n=t.commit;window.lgr.info("Invoice.index --\x3e actions.setColumns"),Ms(e),n("tableColumns",e)},setCurrentTab:function(t,e){var n=t.commit;window.lgr.info("Invoice.index --\x3e actions.setCurrentTab -- ".concat(e)),n("tab",e)},setEnums:function(t,e){var n=t.commit;window.lgr.info("Invoice.index --\x3e actions.setEnums"),n("enums",e)},updLocal:function(t,e){var n=t.commit;Ms("uuuuuuu Update local record uuuuuuuuuu"),Ms("".concat(e.data.mode," ").concat(e.data.store," ").concat(e.id)),Ms(e.data.data),n("invoice",{id:e.id,data:e.data.data})},newLocal:function(t,e){t.dispatch;Ms("uuuuuuu Append new local record uuuuuuuuuu"),Ms("".concat(e.data.mode," ").concat(e.data.store))},saveRow:function(t,e){Ms("\n\n        Saving row......................");var n=t.rootGetters["product/getProduct"](e.values.code);Ms(n),Ms(e.values),t.commit("appendItemRow",e.values)},saveForm:function(t,e){var n=t.dispatch;window.lgr.info("Invoice.index --\x3e actions.saveForm"),Ms("unununu save form ununununun"),Ms(e),Ms(Us);var s=e.items.map(function(t){return[t.codigo,parseInt(t.cantidad,10),t.discount.raw]}),a={data:{mode:"post",store:"invoice",data:{fecha:qt.date(e.InvoiceDate),estado:"REG",codigo_cliente:e.summation.person,distribuidor:e.summation.distributor,descuento_especial:qt.percent(e.summation.discountPct/100).raw,lista_de_items:JSON.stringify({details:s}).split('"').join("'"),subtotal_iva_12:qt.usd(e.summation.iva12).raw,subtotal_iva_0:qt.usd(e.summation.iva0).raw,subtotal_descontado:qt.usd(e.summation.valor).raw,total_calculado:qt.usd(e.summation.total).raw,retenido:qt.usd(e.summation.retention).raw,monto_final:qt.usd(e.summation.final).raw,total_cobrado:0}}};Ms("@@@@@@@@@@ pkge @@@@@@@@"),Ms(a),n("newLocal",a),n("create",a)},backToListTab:function(t){var e=t.getters;t.dispatch;Sr.dispatch("invoice/fetchList",{customUrlFnArgs:e.getPaginator}),Sr.dispatch("invoice/setCurrentTab",0)}},getters:{getCurrentTab:function(t){return t.currentTab},getColumns:function(t){return t.columns},getInvoices:function(t){return t.list},getEnums:function(t){return t.enums},getPaginator:function(t){return t.paginator},getInvoice:function(t){return function(e){return t.entities[e]}}},mutations:{tab:function(t,e){window.lgr.debug("Invoice.index --\x3e mutations.tab -- ".concat(e)),t.currentTab=e},invoice:function(t,e){Ms("".concat(e.id," = ").concat(e.data.codigo,"/").concat(e.data.nombre)),t.entities[e.id]=e.data},appendItemRow:function(t,e){(!t.formRows.row||!t.formRows.row[0]||t.formRows.row[0].code<0)&&(t.formRows.row=[]),t.formRows.row.push(e)},enums:function(t,e){t.enums=e},tableColumns:function(t,e){window.lgr.debug("Invoice.index --\x3e mutation.tableColumns"),t.columns=e}},customUrlFn:function(t,e){Ms(Yt.server),Ms("using paginator --\x3e ".concat(e));var n=t?"/".concat(t):"",s=e?"s=".concat(e.s,"&c=").concat(e.c):"s=0&c=0";Ms("using customUrlFn( ".concat(n,", ").concat(s," )")),Ms("URI :: ".concat(Yt.server,"/api/").concat(zs).concat(n,"?").concat(s));var a="".concat(Yt.server,"/api/").concat(zs).concat(n,"?").concat(s);return a},onCreateSuccess:function(){Sr.dispatch("invoice/backToListTab"),window.lgr.info("Invoice.index --\x3e mutation.onCreateSuccess OK!")},onUpdateSuccess:function(){Sr.dispatch("invoice/backToListTab"),window.lgr.info("Invoice.index --\x3e mutation.onUpdateSuccess OK!")},parseSingle:function(t){Ms("parseSingle"),Ms(t.data),Ms(Sr.state.invoice.entities[t.data.itemID]);var e={};return e[Vs]=t.data.itemID,Object.assign({},t,{data:e})},parseList:function(t){var e=t.data[zs],n=e.data,s=e.titles,a=e.meta,i=e.enums,o=U(s),r=n.map(function(t,e){var n=t,s={};return a.forEach(function(t,e){n[e]=qt[t.type](n[e],{foreignKey1:{fn:qs.processPersonFK,vl:n[e]},JSON1:{fn:qs.processDetailsJSON,vl:n[e]}})}),n.forEach(function(t,e){s[o[e]]=t}),s});return Sr.dispatch("invoice/setEnums",i.StatusLookup),Object.assign({},t,{data:r,columns:a,enums:Object(Cn["a"])(i)})}}),Js=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isBusy,canCancel:!0},on:{"update:active":function(e){t.isBusy=e}}}),n("b-table",{attrs:{data:t.isEmpty?[]:t.formattedBottles,columns:t.columns,striped:!0,paginated:"","per-page":20,"current-page":1,"opened-detailed":t.defaultOpenedDetails,detailed:"","detail-key":"codigo",focusable:"",narrowed:!0,"mobile-cards":t.hasMobileCards},on:{"details-open":function(e,n){return t.$toast.open("Expanded "+e.nombre)}},scopedSlots:t._u([{key:"header",fn:function(e){return[n("b-tooltip",{attrs:{position:"is-left",active:!!e.column.meta,label:e.column.meta,dashed:""}},[t._v("\n        "+t._s(e.column.label)+"\n      ")])]}},{key:"detail",fn:function(t){var e=t.row;return[n("bottle-detail",{attrs:{id:e.codigo}})]}}])},[n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered",staticStyle:{"font-size":"large"}},[n("icon",{attrs:{scale:"3",name:"thumbs-down"}}),n("p",[t._v("No results")])],1)])])],2),n("div",{staticClass:"control cardMode"},[n("b-switch",{model:{value:t.hasMobileCards,callback:function(e){t.hasMobileCards=e},expression:"hasMobileCards"}},[t._v("Modo tarjeta "),n("small",[t._v("(filas estrechas)")])])],1),n("div",{staticClass:"block"},[n("button",{staticClass:"button is-small is-primary",on:{click:function(e){t.columnSelectorOpen=!t.columnSelectorOpen}}},[t._v("\n        Escoger Columnas\n    ")])]),n("b-collapse",{staticClass:"panel",attrs:{open:t.columnSelectorOpen},on:{"update:open":function(e){t.columnSelectorOpen=e}}},[n("ul",[n("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.columns,function(e,s){return n("div",{key:s,staticClass:"control"},[n("li",[n("b-checkbox",{model:{value:e.visible,callback:function(n){t.$set(e,"visible",n)},expression:"column.visible"}},[t._v("\n              "+t._s(e.meta)+"\n            ")])],1)])}))],1)])],1)},Ks=[],Gs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("nav",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[n("span",{staticClass:"is-size-6"},[t._v("Registro #"+t._s(t.p(t.id).codigo))])]),n("b-tabs",{model:{value:t.activeSubTab,callback:function(e){t.activeSubTab=e},expression:"activeSubTab"}},[n("b-tab-item",[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-outlined"},[n("b-icon",{attrs:{icon:"eye"}})],1)]),n("bottle-record",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAlter()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-info is-outlined"},[n("b-icon",{attrs:{icon:"edit"}})],1)]),n("bottle-update",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-warning has-text-weight-bold is-outlined"},[n("b-icon",{attrs:{icon:"lock"}})],1)]),n("bottle-auth",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-danger is-outlined"},[n("b-icon",{attrs:{icon:"trash"}})],1)]),t._v('\n        The record for "'+t._s(t.p(t.id).nombre)+'" will be marked for deletion, will no longer appear in the bottles list, but will be kept for historical purposes.\n\n        '),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-info",on:{click:function(e){t.activeSubTab=0}}},[t._v("Go back")])])]),n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-danger"},[t._v("Yes, Delete")])])])])],2)],1)],1)])},Ws=[],Hs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Codigo")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.codigo))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Fecha")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.fecha))])])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Cliente")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.codigo_cliente))]),n("p",{class:["si"===t.invc.distribuidor?"has-text-info":"is-invisible"]},[t._v("\n            Distribuidor\n          ")])])]),n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Mail")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.email))])])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("b-table",{attrs:{data:t.detail,narrowed:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"cant",label:"Cantidad",width:"10",numeric:""}},[t._v("\n                  "+t._s(e.row.cantidad)+"\n              ")]),n("b-table-column",{attrs:{field:"nombre",label:"Nombre",width:"400"}},[t._v("\n                  ("+t._s(e.row.codigo)+") "+t._s(e.row.nombre)+"\n              ")]),n("b-table-column",{attrs:{field:"nombre",label:"Unidades"}},[t._v("\n                  "+t._s(e.row.unidad)+"\n              ")]),n("b-table-column",{attrs:{field:"precio",label:"Precio",width:"100"}},[t._v("\n                  "+t._s(e.row.precio)+"\n              ")]),n("b-table-column",{attrs:{field:"descuento",label:"Descuento Especial",width:"10"}},[t._v("\n                  "+t._s(e.row.descuento)+"\n              ")]),n("b-table-column",{attrs:{field:"total",label:"Total",width:"100"}},[t._v("\n                  "+t._s(e.row.total)+"\n              ")])]}}])})],1)]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Estado")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.enums[t.invc.estado]))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("b-table",{attrs:{data:t.totals||[],bordered:!0,narrowed:!0,"mobile-cards":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"title"}},[t._v("\n                  "+t._s(e.row.title)+"\n              ")]),n("b-table-column",{attrs:{field:"value",numeric:""}},[t._v("\n                  "+t._s(e.row.value)+"\n              ")])]}}])})],1)])])},Zs=[],Xs=console.log,ta={data:function(){var t=[];return{totals:t}},computed:Object(A["a"])({},Object(R["c"])("bottle",{enums:"getEnums"}),{detail:function(){Xs("  *************** INVC **********************\n      ");var t=this.invc,e=t.lista_de_items,n="si"===t.distribuidor;Xs(this);var s=[];Xs("items object"),Xs(e);for(var a=0;a<e.length;a+=1){var i=e[a],o=n?i[0].valor_distribuidor:i[0].valor,r=i[1],c=qt.percent(i[2],0);Xs("At ".concat(a," -- ").concat(i[0].unidad," (").concat(i[0].codigo,") ").concat(i[0].nombre)),s.push({codigo:i[0].codigo,nombre:i[0].nombre,unidad:i[0].unidad,cantidad:r,precio:o.str,descuento:qt.percent(1-c.raw,0).str,total:qt.usd(o.raw*r-c.raw).str})}return this.totals=[],this.totals.push({title:"Subtotal IVA 12%",value:t.subtotal_iva_12.str}),this.totals.push({title:"Descuento Especial",value:t.descuento_especial.str}),this.totals.push({title:"Valor",value:t.subtotal_descontado.str}),this.totals.push({title:"IVA",value:qt.usd(t.total_calculado.raw-t.subtotal_descontado.raw).str}),this.totals.push({title:"Valor Total",value:t.total_calculado.str}),this.totals.push({title:"Retenido",value:t.retenido.str}),this.totals.push({title:"Total Final",value:t.monto_final.str}),s}}),props:{invc:{type:Object,required:!0,default:function(){return{codigo:9999,ruc_cedula:"34-4545",nombre:"asdf asdf asdf asdf",telefono:"23452345",direccion:"asdfasdf",distribuidor:"si",retencion:"no",tipo_de_documento:"RUC"}}}}},ea=ta,na=(n("48bb"),Object(S["a"])(ea,Hs,Zs,!1,null,"b780b8b0",null));na.options.__file="Retrieve.vue";var sa=na.exports,aa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isUpdating,canCancel:!0},on:{"update:active":function(e){t.isUpdating=e}}}),t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.invc},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Bottle")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])])],1)],1)},ia=[],oa=(console.log,{props:["invc"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(R["c"])("bottle",{enums:"getEnums"}),Object(R["d"])("bottle",{isUpdating:"isUpdating"}),{formUid:function(){return"pers_".concat(this.invc.codigo)},typesId:function(){var t=this.enums.DocTypeLookup,e=[];return Object.keys(t).forEach(function(n){var s=t[n];e.push({name:s,value:n,id:n,label:s})}),e}}),methods:Object(A["a"])({},Object(R["b"])("bottle",{saveForm:"saveForm"}))}),ra=oa,ca=(n("4d3c"),Object(S["a"])(ra,aa,ia,!1,null,null,null));ca.options.__file="Update.vue";var la=ca.exports,ua=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.permissionsField},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",[t._v(t._s(t.invc.nombre))]),n("h5",[t._v("Sus Permisos por Recurso")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[t._l(t.resources,function(e){return n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v(t._s(e))]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:e,type:"select",initial:"0",options:t.levels}})],1)])}),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],2)])],1)],1)},da=[],ma=console.log,va={props:["invc"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(R["c"])("bottle",{enums:"getEnums"}),{permissionsField:function(){return ma("xxxxxxxxxxxxxxxxxxx this.invc xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"),ma(this.invc),ma(this.invc.permissions),this.invc.permissions?this.invc.permissions:{}},formUid:function(){return"pers_".concat(this.invc.codigo)},levels:function(){return St.options},resources:function(){return ma("Resources"),ma(Bt),Bt}}),methods:Object(A["a"])({},Object(R["b"])("bottle",{saveForm:"saveForm"}))},pa=va,fa=(n("fa42"),Object(S["a"])(pa,ua,da,!1,null,null,null));fa.options.__file="Permissions.vue";var ba=fa.exports,ha={name:"RUDcards",props:["id","distributor"],data:function(){return{activeSubTab:0}},components:{"bottle-record":sa,"bottle-update":la,"bottle-auth":ba},methods:{canAlter:function(){return this.$can("alter","bottle")},canAssign:function(){return this.$can("assign","bottle")}},computed:Object(A["a"])({},Object(R["c"])("bottle",{p:"getBottle"}))},ga=ha,Ca=Object(S["a"])(ga,Gs,Ws,!1,null,null,null);Ca.options.__file="RUDcards.vue";var _a=Ca.exports,wa=console.log,ya={name:"BottleList",props:{tst:"passed in with props"},data:function(){var t=[];return{anObj:{tst:"passed in as data"},hasMobileCards:!1,isFullPage:!1,isEmpty:!1,defaultOpenedDetails:[4358],selected:t[1],columnSelectorOpen:!1}},components:{"bottle-detail":_a},computed:Object(A["a"])({},Object(R["c"])("bottle",{bottles:"list",columns:"getColumns"}),Object(R["c"])({loggedIn:"isAuthenticated"}),Object(R["d"])("bottle",{isLoadingList:"isFetchingList",isUpdating:"isUpdating",isCreating:"isCreating"}),{formattedBottles:function(){return this.bottles.map(function(t){var e={};return Object.entries(t).forEach(function(t){var n=Object(M["a"])(t,2),s=n[0],a=n[1];e[s]=a.str||a}),e})},isBusy:function(){return this.isLoadingList||this.isUpdating||this.isCreating}}),methods:Object(A["a"])({},Object(R["b"])(["handle401","notifyUser"]),Object(R["b"])("bottle",{setColumns:"setColumns"}),{onFetchBottles:function(){var t=this;wa(" * * Try to fetch bottles * *"),xn()().interval(100).times(20).condition(function(){return!Ve.state.isFetchingList&&!gn.state.isFetchingList}).done(function(){return t.fetchBottles()})}})},xa=ya,Oa=(n("003a"),Object(S["a"])(xa,Js,Ks,!1,null,null,null));Oa.options.__file="List.vue";var ka=Oa.exports,Ea=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"dialog-window"}},[n("div",{staticClass:"container is-fluid",attrs:{id:"header"}},[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left"},[t._m(0),t._m(1),n("div",{staticClass:"level-item"},[n("b-input",{attrs:{placeholder:"codigo de envase"},on:{focus:t.seekCodigoFocus,blur:t.seekCodigoBlur},model:{value:t.seekCodigo,callback:function(e){t.seekCodigo=e},expression:"seekCodigo"}}),n("strong",[t._v(t._s(t.seekIndicator))])],1)]),n("div",{staticClass:"level-right"},[n("p",{staticClass:"level-item"},[n("strong",[t._v(t._s(t.items.length))])]),n("p",{staticClass:"level-item"},[n("a",{staticClass:"button is-danger",on:{click:t.purge}},[t._v("Purge")])])])])]),n("div",{attrs:{id:"scrollable-content"}},[n("virtual-scroller",{staticClass:"virtual-list",attrs:{"page-mode":"",items:t.items||[],"item-height":"24","content-tag":"ul"},scopedSlots:t._u([{key:"default",fn:function(e){return["planta"===e.item.data.ubicacion.toLowerCase()?n("li",{key:e.itemKey},[t._v("\n          "+t._s(e.item.data.codigo)+": Movimientos "+t._s(e.item.data.movements&&e.item.data.movements.length||"_")+" - ubicacion: Planta\n        ")]):n("li",{key:e.itemKey},[t._v("\n          "+t._s(e.item.data.codigo)+": Movimientos "+t._s(e.item.data.movements&&e.item.data.movements.length||"_")+" - ubicacion: "),n("strong",[t._v(t._s(e.item.data.ultimo))])])]}}])})],1),t._v("\n  >"+t._s(t.getRelational)+"<\n  "+t._s(t.relationalData)+"\n")])},Pa=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"level-item"},[n("p",{staticClass:"subtitle is-6 is-primary"},[n("strong",[t._v("Buscar Envase")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"level-item"},[n("p",{staticClass:"subtitle is-7"},[n("strong",[t._v("Codigo")])])])}],Da=(n("7514"),n("3b2b"),console.log),Ia=console.error,Sa="codigo de envase",ja=function(t,e){Da("\n    ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::");var n=new RegExp("^.*","gi");return e!==Sa&&(n=new RegExp("^".concat(e,".*"),"gi")),t.liveFeedStatus="finding",Da("Searching with: ".concat(n," from >").concat(e,"<")),t.$pouch.liveFind({selector:{"data.codigo":{$regex:n},"data.type":"bottle"},sort:[{"data.codigo":"asc"}]}).on("update",function(e,n){var s=e;0===s.doc.data.ultimo?t.getItems(s):t.$pouch.rel.find("aPerson",s.doc.data.ultimo).then(function(e){s.doc.data.ultimo=e.allPersons[0]&&e.allPersons[0].nombre||s.doc.data.ultimo,s.doc.data.extra=e,t.getItems(s)})}).on("ready",function(){Da("###############   Initial query complete.   ##############"),t.$pouch.rel.find("aPerson",12357).then(function(t){Da("prsn 12357"),Da(t)}),t.liveFeedStatus="listening"}).on("cancelled",function(){Da("###############   LiveFind cancelled.   ##############"),t.liveFeedStatus="idle",t.newSearch()}).on("error",function(t){Ia("Oh no!",t)})},Ta={data:function(){return{items:[],liveFeed:null,liveFeedStatus:"idle",seekCodigo:Sa,seekCodigoIsDirty:!1,seeking:!1,relationalData:"none"}},created:function(){this.liveFeed=ja(this,Sa)},computed:{getRelational:function(){Da("###############   getRelational   ##############"),this.$pouch.allDocs({include_docs:!0}).then(function(t){Da("====== all Docs ======"),Da(t)}),this.$pouch.rel.find("aPerson",12347).then(function(t){Da("====== Person 12347 ======"),Da(t)})},seekIndicator:function(){return Da("###############   seekIndicator   ##############"),Da(this.seekCodigo),this.seeking?"⟳ Fetching new results":this.seekCodigoIsDirty?"... Typing":"✓ Done"}},watch:{seekCodigo:function(){Da("###############   seekCodigo   ##############"),Da(this.seekCodigo),this.seekCodigoIsDirty=!0,this.items=[],Da(this.liveFeedStatus),this.liveFeedStatus="cancelling",this.liveFeed.cancel()}},methods:{purge:function(){Da("###############   purge   ##############"),this.$pouch.rel.find("aPerson").then(function(t){Da(t)})},newSearch:Object(g["debounce"])(function(){this.seekCodigo!==Sa&&(Da("###############   newSearch   ##############"),this.seeking=!0,setTimeout(function(){Da("setTimeout"),Da(this.seekCodigo),this.seeking=!1,this.seekCodigoIsDirty=!1}.bind(this),2e3),this.liveFeed=ja(this,this.seekCodigo))},100),getItems:function(t){var e=null;switch(t.action){case"REMOVE":Da("###############   LiveFind remove not implemented   ##############");break;case"UPDATE":e=this.items.findIndex(function(e){return e._id===t.id}),Da("###############   LiveFind update   ##############"),Da(this.items[e]),this.items[e]=t.doc,this.items=this.items.slice();break;default:this.items.push(t.doc)}},seekCodigoFocus:function(){this.seekCodigo===Sa&&(this.seekCodigo="")},seekCodigoBlur:function(){""===this.seekCodigo&&(this.seekCodigo=Sa)}}},Aa=Ta,Ra=(n("52be"),Object(S["a"])(Aa,Ea,Pa,!1,null,null,null));Ra.options.__file="Test.vue";var La=Ra.exports,$a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("b-tab-item",{attrs:{label:"Bottles"}},[n("router-view",{attrs:{name:"bottlesList"}})],1),n("b-tab-item",{attrs:{visible:t.canEdit(),label:"Add Bottle"}},[n("Create")],1)],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1)],1)},Na=[],Ua=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isCreating,canCancel:!0},on:{"update:active":function(e){t.isCreating=e}}}),n("formulate",{staticClass:"my-form",attrs:{name:"createBottle"},on:{submit:t.commitForm}},[n("formulate-element",{attrs:{name:"summation",type:"hidden",placeholder:"-1"}}),n("formulate-element",{attrs:{name:"items",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Bottle")]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Cliente")]),n("formulate-element",{attrs:{name:"Persona",validation:"required"}},[n("autocomplete-input",{attrs:{options:t.personsId||null},model:{value:t.Persona,callback:function(e){t.Persona=e},expression:"Persona"}})],1)],1)]),n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Fecha")]),n("formulate-element",{attrs:{name:"BottleDate",validation:"required"}},[n("dateselect-input",{model:{value:t.BottleDate,callback:function(e){t.BottleDate=e},expression:"BottleDate"}})],1)],1)]),n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Descuento")]),n("formulate-element",{attrs:{name:"desc",placeholder:"0","element-classes":"resizedTextbox",validation:"isPct(desc)"}})],1)])]),n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column"},[n("label",{staticClass:"label"},[t._v("Itemes")]),n("button",{staticClass:"button is-info",on:{click:t.openModal}},[n("b-icon",{attrs:{icon:"plus"}}),n("span",[t._v("Anadir item")])],1),n("button",{staticClass:"button field is-danger",attrs:{disabled:!t.checkedRows.length},on:{click:t.dropRow}},[n("b-icon",{attrs:{icon:"trash"}}),n("span",[t._v("Borrar seleccionadas")])],1),n("b-modal",{attrs:{active:t.isComponentModalActive,"has-modal-card":""},on:{"update:active":function(e){t.isComponentModalActive=e}}},[n("detailsForm")],1),n("b-table",{attrs:{data:t.tableData,"checked-rows":t.checkedRows,checkable:""},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{label:"Codigo",numeric:""}},[t._v("\n                    "+t._s(e.row.codigo)+"\n                  ")]),n("b-table-column",{attrs:{label:"Producto/Servicio"}},[t._v("\n                    "+t._s(e.row.nombre)+"\n                  ")]),n("b-table-column",{attrs:{label:"Unidad"}},[t._v("\n                    "+t._s(e.row.unidad)+"\n                  ")]),n("b-table-column",{attrs:{label:"Valor",numeric:""}},[t._v("\n                    "+t._s(e.row.valor)+"\n                  ")]),n("b-table-column",{attrs:{label:"IVA",numeric:""}},[t._v("\n                    "+t._s(e.row.iva.str)+"\n                  ")]),n("b-table-column",{attrs:{label:"Cantidad",centered:""}},[t._v("\n                    "+t._s(e.row.cantidad)+"\n                  ")]),n("b-table-column",{attrs:{label:"Total",numeric:""}},[t._v("\n                    "+t._s(e.row.total)+"\n                  ")])]}}])},[n("template",{slot:"footer"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-offset-2 is-narrow-mobile"},[n("div",{staticClass:"box",staticStyle:{width:"125px"}},[t.retention?n("div",{class:["si"===t.retention?"":"strike-out"]},[t._v("\n                          Retencion\n                        ")]):t._e(),t.distributor?n("div",{class:["si"===t.distributor?"":"strike-out"]},[t._v("\n                          Distribuidor\n                        ")]):t._e()])]),n("div",{staticClass:"column is-5"},[n("div",{staticClass:"box"},[n("b-table",{attrs:{data:t.totals},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{width:"180"}},[t._v("\n                                "+t._s(e.row.label)+"\n                            ")]),n("b-table-column",{attrs:{numeric:""}},[t._v("\n                              "+t._s(e.row.value)+"\n                            ")])]}}])})],1)]),n("div",{staticClass:"column is-1"})])])],2),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],1)])])],1)],1)},Ma=[],Fa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[n("formulate",{staticClass:"my-form",attrs:{name:"bottleDetails"},on:{submit:t.saveForm}},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"title"},[t._v("Item")])]),n("section",{staticClass:"modal-card-body"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-four-fifths"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Producto / Servicio")]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:"code",type:"select",initial:"nombre",options:t.typesId}})],1)]),n("div",{staticClass:"column is-one-fifth"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Cantidad")]),n("formulate-element",{attrs:{name:"qty",placeholder:"cantidad","element-classes":"resizedTextbox"}})],1)])])]),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v("Close")]),n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])],1)},Ba=[],Ya=console.log,qa={computed:Object(A["a"])({},Object(R["c"])("product",{products:"list",productsMap:"getProductsMap"}),{typesId:function(){Ya("%%%%%%%%%%%%%%%%%%%% CC %%%%%%%%%%%%%%%%%%"),Ya(this),Ya(this.$store.getters);var t=[],e=this.products;return e&&Object.keys(e).forEach(function(n){var s=e[n];t.push({name:s.nombre,value:s.codigo,id:s.codigo,label:"".concat(s.nombre," (").concat(s.unidad,")")})}),Ya(t),t}}),methods:Object(A["a"])({},Object(R["b"])("bottle",{saveRow:"saveRow"}),{saveForm:function(t){this.saveRow({rowNum:-1,values:t}),this.$parent.close()}})},Va=qa,za=(n("5669"),Object(S["a"])(Va,Fa,Ba,!1,null,null,null));za.options.__file="Details.vue";var Qa=za.exports,Ja=console.log,Ka=(console.error,{props:["pers"],components:{detailsForm:Qa,"autocomplete-input":vs,"dateselect-input":Cs},created:function(){this.persons&&this.persons.length>0&&this.productsMap&&Object.keys(this.productsMap).length>0&&this.products&&this.products.length>0||this.$router.push({name:"home"})},data:function(){var t=[];return{totals:t,isComponentModalActive:!1,checkedRows:[],retention:null,distributor:null,myDate:new Date,formats:{title:"MMMM / YYYY",weekdays:"W",navMonths:"MMM",input:["YYYY-MM-DD","YYYY/MM/DD"],dayPopover:"L",data:["L","YYYY-MM-DD","YYYY/MM/DD"]}}},computed:Object(A["a"])({},Object(R["c"])("bottle",{enums:"getEnums"}),Object(R["c"])("product",{products:"list",productsMap:"getProductsMap"}),Object(R["c"])("person",{persons:"list",getPerson:"getPerson"}),Object(R["d"])("bottle",{isCreating:"isCreating",formRows:"formRows"}),Object(d["mapModels"])({Persona:"createBottle/Persona",BottleDate:"createBottle/BottleDate"}),{tableData:function(){var t=this,e=[],n=this.$store.state;if(n.values.createBottle){var s=n.values.createBottle;s.Persona=s.Persona||"(0) no one",s.BottleDate=s.BottleDate||new Date;var a=[{codigo:"codigo",nombre:"nombre",unidad:"unidad",iva:"iva",valor:"$0.00",cantidad:0,total:"$0.00"}];Ja("\n\n\n          tableData() ----------------------------"),Ja(this.productsMap);var i=s.Persona.match(/\(([^)]+)\)/)[1],o=this.getPerson(i);this.retention=o&&o.retencion||null,this.distributor=o&&o.distribuidor||null,this.totals=[];var r=0,c=0,l=0,u={distributor:this.distributor,person:i,discountPct:0,iva0:0,iva12:0,subtotal:0,discount:0,retention:0,total:0};if(this.products.length<1)return a;if(this.formRows.row.length<1)return a;if(this.formRows.row[0].code<0)return a;this.formRows.row.forEach(function(n){Ja("row"),Ja(n);var s=t.productsMap[n.code];Ja(s.porcentaje.raw),t.distributor&&"si"===t.distributor?(r=s.valor_distribuidor.str,c=s.valor_distribuidor.raw,l=qt.percent(s.valor_distribuidor.raw/s.valor.raw)):(r=s.valor.str,c=s.valor.raw,l=qt.percent(1));var a=c*n.qty;Ja(s.iva);var i=0===s.iva.raw?a:0,o=s.iva.raw>0?a:0;u.iva0+=i,u.iva12+=o,u.subtotal+=i+o,e.push({codigo:n.code,nombre:s.nombre,unidad:s.unidad,discount:l,iva:s.iva,valor:r,cantidad:n.qty,total:qt.usd(c*n.qty).str})}),Ja("rows"),Ja(e),u.discountPct=s&&s.desc||0,u.discount=u.discountPct/100*u.subtotal,u.valor=u.subtotal-u.discount,u.iva=.12*u.valor,u.total=u.valor+u.iva,u.final=u.total,u.iva0>0&&this.totals.push({label:"Subtotal IVA  0%",value:qt.usd(u.iva0).str}),this.totals.push({label:"Subtotal IVA 12%",value:qt.usd(u.iva12).str}),this.totals.push({label:"Descuento Especial",value:qt.usd(u.discount).str}),this.totals.push({label:"Valor",value:qt.usd(u.valor).str}),this.totals.push({label:"IVA",value:qt.usd(u.iva).str}),this.totals.push({label:"Valor Total",value:qt.usd(u.total).str}),u.final=u.total,"si"===this.retention&&(u.retention=.01*u.total,u.final=u.total-u.retention,this.totals.push({label:"Retenido",value:qt.usd(u.retention).str})),this.totals.push({label:"Total Final",value:qt.usd(u.final).str}),Ja("summation.iva0 ".concat(u.iva0)),Ja("summation.iva12 ".concat(u.iva12)),Ja("summation.discountPct ".concat(u.discountPct)),Ja("summation.discount ".concat(u.discount)),Ja("summation.valor ".concat(u.valor)),Ja("summation.iva ".concat(u.iva)),Ja("summation.total ".concat(u.total)),Ja("summation.retention ".concat(u.retention)),Ja("summation.final ".concat(u.final)),s.summation=u,s.items=e,Ja(s),Ja(this.$store),Ja(e)}return e},personsId:function(){Ja("%%%%%%%%%%%%%%%% personsId %%%%%%%%%%%%%%%%%% "),Ja(this);var t=[],e=this.persons;return e&&(Ja("prsns"),Object.keys(e).forEach(function(n){var s=e[n];t.push({value:s.codigo,label:"".concat(s.nombre)})})),Ja(t),{list:t,data:function(t){return"(".concat(t.value,") ").concat(t.label)}}}}),methods:Object(A["a"])({},Object(R["b"])("bottle",{saveForm:"saveForm"}),{openModal:function(t){t.preventDefault(),this.isComponentModalActive=!0},dropRow:function(t){var e=this;this.checkedRows.forEach(function(t){e.formRows.row.forEach(function(n,s){n.code===t.codigo&&n.code===t.codigo&&e.formRows.row.splice(s,1)})}),Ja(this.checkedRows),t.preventDefault()},commitForm:function(t){this.saveForm(t)},setItem:function(t){Ja("Item ".concat(t.qty," of ").concat(t.code))}})}),Ga=Ka,Wa=(n("08bb"),Object(S["a"])(Ga,Ua,Ma,!1,null,"ec6134e6",null));Wa.options.__file="CreateBottle.vue";var Ha=Wa.exports,Za=console.log,Xa={name:"Bottle",components:{Create:Ha},computed:Object(A["a"])({},Object(R["c"])("bottle",{currentTab:"getCurrentTab"}),{activeTab:{get:function(){return Sr.state.bottle.currentTab},set:function(t){return Sr.dispatch("bottle/setCurrentTab",t)}}}),methods:Object(A["a"])({canEdit:function(){return this.$can("comment","bottles/list")},qtst:function(){Za(" ------- Quick Test -------"),this.onCreateBottle()}},Object(R["b"])("bottle",{createBottle:"create",setTab:"setCurrentTab"}))},ti=Xa,ei=Object(S["a"])(ti,$a,Na,!1,null,null,null);ei.options.__file="Layout.vue";var ni=ei.exports,si=[{meta:"Codigo",label:"COD",field:"codigo",centered:!1,visible:!0,width:5,numeric:!0,type:"integer",usage:"rw",idx:0},{meta:"Fecha",label:"FECH",field:"fecha",centered:!0,visible:!0,width:"10",numeric:!1,type:"date",usage:"rw",idx:1},{meta:"Estado",label:"ESTS",field:"estado",centered:!0,visible:!1,width:10,numeric:!1,type:"text",usage:"rw",idx:2},{meta:"Codigo Cliente",label:"CCLI",field:"codigo_cliente",centered:!0,visible:!0,width:6,numeric:!1,type:"foreignKey1",usage:"rw",idx:3},{meta:"Distribuidor",label:"DIST",field:"distribuidor",centered:!0,visible:!0,width:4,numeric:!1,type:"text",usage:"rw",idx:4},{meta:"Descuento Especial",label:"DESC",field:"descuento_especial",centered:!1,visible:!1,width:12,numeric:!0,type:"percent",usage:"rw",idx:5},{meta:"Lista de Items",label:"ITMS",field:"lista_de_items",centered:!0,visible:!1,width:4,numeric:!0,type:"JSON1",usage:"rw",idx:6},{meta:"Subtotal IVA 12%",label:"IV12",field:"subtotal_iva_12",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:7},{meta:"Subtotal IVA 0%",label:"IV00",field:"subtotal_iva_0",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:8},{meta:"Subtotal Descontado",label:"STDC",field:"subtotal_descontado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:9},{meta:"Total Calculado",label:"TOTL",field:"total_calculado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:10},{meta:"Retenido",label:"RETN",field:"retenido",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:11},{meta:"Monto Final",label:"MNTO",field:"monto_final",centered:!1,visible:!0,width:12,numeric:!0,type:"usd",usage:"rw",idx:12},{meta:"Total Cobrado",label:"COBR",field:"total_cobrado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:13}],ai=void 0,ii=console.log,oi=[{name:pt,path:"list",components:{bottlesList:ka}}],ri=[].concat(oi),ci=[{name:ft,path:"bottles",component:ni,children:ri},{name:bt,path:"bottle/:id",component:sa},{name:vt,path:"bottles/test",component:La}];L["client"].interceptors.request.use(function(t){var e=t,n=window.ls.get(Yt.tokenName);return null!=n&&(e.headers.Authorization="JWT ".concat(n)),e},function(t){return ii("request failed"),Promise.reject(t)});var li={processPersonFK:function(t){var e=Ve.state.entities[t];return e?e.nombre:"Usuario #".concat(t)},processDetailsJSON:function(t){if(!gn.state.entities)return t;if(Object.keys(gn.state.entities).length<1)return t;try{return JSON.parse(t.replace(/'/g,'"')).details.filter(function(t){return t[0]>0}).map(function(t){return[gn.state.entities[t[0]],t[1],t[2]]})}catch(e){return t}}},ui="codigo",di="bottle",mi=$()({resource:di,idAttribute:ui,urlRoot:"".concat(Yt.server),client:L["client"],state:{columns:si,currentTab:0,enums:{},paginator:{s:1,c:1e4},formRows:{row:[]}},actions:{setColumns:function(t,e){var n=t.commit;window.lgr.info("Bottle.index --\x3e actions.setColumns"),ii(e),n("tableColumns",e)},setCurrentTab:function(t,e){var n=t.commit;window.lgr.info("Bottle.index --\x3e actions.setCurrentTab -- ".concat(e)),n("tab",e)},setEnums:function(t,e){var n=t.commit;window.lgr.info("Bottle.index --\x3e actions.setEnums"),n("enums",e)},updLocal:function(t,e){var n=t.commit;ii("uuuuuuu Update local record uuuuuuuuuu"),ii("".concat(e.data.mode," ").concat(e.data.store," ").concat(e.id)),ii(e.data.data),n("bottle",{id:e.id,data:e.data.data})},newLocal:function(t,e){t.dispatch;ii("uuuuuuu Append new local record uuuuuuuuuu"),ii("".concat(e.data.mode," ").concat(e.data.store))},saveRow:function(t,e){ii("\n\n        Saving row......................");var n=t.rootGetters["product/getProduct"](e.values.code);ii(n),ii(e.values),t.commit("appendItemRow",e.values)},saveForm:function(t,e){var n=t.dispatch;window.lgr.info("Bottle.index --\x3e actions.saveForm"),ii("unununu save form ununununun"),ii(e),ii(ai);var s=e.items.map(function(t){return[t.codigo,parseInt(t.cantidad,10),t.discount.raw]}),a={data:{mode:"post",store:"bottle",data:{fecha:qt.date(e.BottleDate),estado:"REG",codigo_cliente:e.summation.person,distribuidor:e.summation.distributor,descuento_especial:qt.percent(e.summation.discountPct/100).raw,lista_de_items:JSON.stringify({details:s}).split('"').join("'"),subtotal_iva_12:qt.usd(e.summation.iva12).raw,subtotal_iva_0:qt.usd(e.summation.iva0).raw,subtotal_descontado:qt.usd(e.summation.valor).raw,total_calculado:qt.usd(e.summation.total).raw,retenido:qt.usd(e.summation.retention).raw,monto_final:qt.usd(e.summation.final).raw,total_cobrado:0}}};ii("@@@@@@@@@@ pkge @@@@@@@@"),ii(a),n("newLocal",a),n("create",a)},backToListTab:function(t){var e=t.getters;t.dispatch;Sr.dispatch("bottle/fetchList",{customUrlFnArgs:e.getPaginator}),Sr.dispatch("bottle/setCurrentTab",0)}},getters:{getCurrentTab:function(t){return t.currentTab},getColumns:function(t){return t.columns},getBottles:function(t){return t.list},getEnums:function(t){return t.enums},getPaginator:function(t){return t.paginator},getBottle:function(t){return function(e){return t.entities[e]}}},mutations:{tab:function(t,e){window.lgr.debug("Bottle.index --\x3e mutations.tab -- ".concat(e)),t.currentTab=e},bottle:function(t,e){ii("".concat(e.id," = ").concat(e.data.codigo,"/").concat(e.data.nombre)),t.entities[e.id]=e.data},appendItemRow:function(t,e){(!t.formRows.row||!t.formRows.row[0]||t.formRows.row[0].code<0)&&(t.formRows.row=[]),t.formRows.row.push(e)},enums:function(t,e){t.enums=e},tableColumns:function(t,e){window.lgr.debug("Bottle.index --\x3e mutation.tableColumns"),t.columns=e}},customUrlFn:function(t,e){ii(Yt.server),ii("using paginator --\x3e ".concat(e));var n=t?"/".concat(t):"",s=e?"s=".concat(e.s,"&c=").concat(e.c):"s=0&c=0";ii("using customUrlFn( ".concat(n,", ").concat(s," )")),ii("URI :: ".concat(Yt.server,"/api/").concat(di).concat(n,"?").concat(s));var a="".concat(Yt.server,"/api/").concat(di).concat(n,"?").concat(s);return a},onCreateSuccess:function(){Sr.dispatch("bottle/backToListTab"),window.lgr.info("Bottle.index --\x3e mutation.onCreateSuccess OK!")},onUpdateSuccess:function(){Sr.dispatch("bottle/backToListTab"),window.lgr.info("Bottle.index --\x3e mutation.onUpdateSuccess OK!")},parseSingle:function(t){ii("parseSingle"),ii(t.data),ii(Sr.state.bottle.entities[t.data.itemID]);var e={};return e[ui]=t.data.itemID,Object.assign({},t,{data:e})},parseList:function(t){var e=t.data[di],n=e.data,s=e.titles,a=e.meta,i=e.enums,o=U(s),r=n.map(function(t,e){var n=t,s={};return a.forEach(function(t,e){n[e]=qt[t.type](n[e],{foreignKey1:{fn:li.processPersonFK,vl:n[e]},JSON1:{fn:li.processDetailsJSON,vl:n[e]}})}),n.forEach(function(t,e){s[o[e]]=t}),s});return ii(" * * Parsed bottles data * * "),ii("result"),ii(r),Sr.dispatch("bottle/setEnums",i.StatusLookup),ii(" - - - - - - - - - -  Parsed bottle list  - - - - - - - - - - "),Object.assign({},t,{data:r,columns:a,enums:Object(Cn["a"])(i)})}}),vi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar is-transparent",staticStyle:{"background-color":"transparent"}},[n("div",{staticClass:"navbar-brand"},[n("router-link",{attrs:{to:{name:"home"}}},[n("img",{attrs:{src:t.logo,alt:"Iridium Blue Logo"}}),n("span",{staticStyle:{"font-family":"'Advent Pro'","font-size":"48px"},attrs:{"data-cyp":"appTitle"}},[t._v("iridium blue")])]),t._m(0)],1),n("div",{staticClass:"navbar-menu burger-bar",attrs:{id:"burgerBar"}},[n("div",{staticClass:"navbar-start"},[n("Shop"),n("Distributor"),n("Admin"),n("Tests")],1),n("div",{staticClass:"navbar-end"},[n("div",{staticClass:"navbar-item"},[n("div",{staticClass:"field is-grouped"},[n("Authentication")],1)])])])])},pi=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-burger burger",attrs:{id:"burger","data-target":"burgerBar"}},[n("span"),n("span"),n("span")])}],fi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isKnown&&t.isHere?n("div",[n("a",{staticClass:"button is-small",class:t.highLightAdmin,attrs:{"data-cyp":"logOut"},on:{click:t.signOut}},[n("span",{attrs:{name:"icon"}},[n("icon",{attrs:{name:"sign-out-alt"}})],1),t._v(" "+t._s(t.$t("label.signout"))+", "+t._s(t.user)+"\n    ")])]):n("div",[t._v("\n     \n    "),n("a",{staticClass:"button is-small",attrs:{"data-cyp":"logIn"},on:{click:t.logIn}},[n("icon",{attrs:{name:"sign-in-alt"}}),t._v(" "+t._s(t.$t("label.signin"))+"\n    ")],1)])])},bi=[],hi=(n("6b54"),console.log),gi={name:"auth",data:function(){return{tkn:null,axStkn:"unused",isActive:"unused"}},beforeUpdate:function(){this.$store.getters.permissions&&this.access!==this.$store.getters.permissions&&(this.access=this.$store.getters.permissions)},created:function(){var t=this;window.ls.on(Yt.activityName,function(e){window.lgr.warn("Auth.vue :: Activity updated :: ".concat(e)),t.setActivity(e)}),window.ls.on(Yt.authName,function(e){hi("\n  ???????????????????\n   Do we ever get here?\n   Authentication vm.created() localStore onChange event\n  ???????????????????"),window.lgr.warn("Auth.vue :: Auth updated :: ".concat(e)),t.setAuth(e)}),this.axStkn=window.ls.get(Yt.tokenName,0),window.ls.on(Yt.tokenName,function(e){window.lgr.warn("Auth.vue :: New token value in local store :: ".concat(e)),t.keepTkn({token:e,ability:t.$ability})})},computed:Object(A["a"])({highLightAdmin:function(){return"admin"===this.$store.getters.accessLevel.toString()?"is-warning":""}},Object(R["c"])({jwt:"axsToken",isHere:"isActive",isKnown:"isAuthenticated",user:"nameUser",roles:"permissions",priv:"accessLevel"})),methods:Object(A["a"])({},Object(R["b"])(["keepTkn","logIn","logOut","setActivity","setAuth"]),{signOut:function(){this.logOut(),this.$router.push({name:"home"})},signIn:function(){this.logIn(),window.lgr.info("Auth.vue :: signin '[".concat(this.access,"]'"))}})},Ci=gi,_i=Ci,wi=(n("5582"),Object(S["a"])(_i,fi,bi,!1,null,null,null));wi.options.__file="Authentication.vue";var yi=wi.exports,xi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable",on:{click:t.shutBurger}},[n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"start"}}},[t._v("\n    Shop\n  ")]),n("div",{staticClass:"navbar-dropdown is-boxed"},[n("router-link",{staticClass:"navbar-item",style:t.canOpen("invoices/list"),attrs:{to:{name:"invoices/list"}}},[t._v("\n      Invoicing\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("products/list"),attrs:{to:{name:"products/list"}}},[t._v("\n      Products\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"},event:""}},[t._v("\n      Payment\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Bottle Returns\n    ")])],1)],1)},Oi=[],ki=(console.log,{methods:{canOpen:function(t){return this.$can("only_view",t)?"":"color: bisque;"},shutBurger:function(){P()}}}),Ei=ki,Pi=Object(S["a"])(Ei,xi,Oi,!1,null,null,null);Pi.options.__file="Menu.vue";var Di=Pi.exports,Ii=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable",on:{click:t.shutBurger}},[n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"start"}}},[t._v("\n    Admin\n  ")]),n("div",{staticClass:"navbar-dropdown is-boxed"},[n("router-link",{staticClass:"navbar-item",style:t.canOpen("persons/list"),attrs:{to:{name:"persons/list"}}},[t._v("\n      User Management\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Accounts Payable\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Accounts Receivable\n    ")])],1)],1)},Si=[],ji=(console.log,{methods:{canOpen:function(t){return this.$can("only_view",t)?"":"color: bisque;"},shutBurger:function(){P()}}}),Ti=ji,Ai=Object(S["a"])(Ti,Ii,Si,!1,null,null,null);Ai.options.__file="Menu.vue";var Ri=Ai.exports,Li=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable",on:{click:t.shutBurger}},[n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"start"}}},[t._v("\n    Tests\n  ")]),n("div",{staticClass:"navbar-dropdown is-boxed"},[n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Emails\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Profile\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("protected"),attrs:{to:{name:"protected"}}},[t._v("\n      Protected\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("classified"),attrs:{to:{name:"classified"}}},[t._v("\n      Classified\n    ")])],1)],1)},$i=[],Ni=(console.log,{methods:{canOpen:function(t){return this.$can("only_view",t)?"":"color: bisque;"},shutBurger:function(){P()}}}),Ui=Ni,Mi=Object(S["a"])(Ui,Li,$i,!1,null,null,null);Mi.options.__file="Menu.vue";var Fi=Mi.exports,Bi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable",on:{click:t.shutBurger}},[n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"start"}}},[t._v("\n    Distributor\n  ")]),n("div",{staticClass:"navbar-dropdown is-boxed"},[n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Sales\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Bonus\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("bottles/list"),attrs:{to:{name:"bottles/list"}}},[t._v("\n      Bottle Inventory\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("bottles/test"),attrs:{to:{name:"bottles/test"}}},[t._v("\n      Bottle test\n    ")])],1)],1)},Yi=[],qi=(console.log,{methods:{canOpen:function(t){return this.$can("only_view",t)?"":"color: bisque;"},shutBurger:function(){P()}}}),Vi=qi,zi=Object(S["a"])(Vi,Bi,Yi,!1,null,null,null);zi.options.__file="Menu.vue";var Qi=zi.exports,Ji=console.log,Ki={components:{Authentication:yi,Shop:Di,Admin:Ri,Tests:Fi,Distributor:Qi},data:function(){return{activeTab:0,logo:"".concat("/","img/WaterDrop_50.png")}},methods:{showTab:function(){return!0},shutBurger:function(){Ji(P())}}},Gi=Ki,Wi=(n("52db"),Object(S["a"])(Gi,vi,pi,!1,null,"6d8c9212",null));Wi.options.__file="NavBar.vue";var Hi=Wi.exports,Zi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card-edge"},[n("div",{staticClass:"card"},[n("header",{staticClass:"card-header"},[t._m(0),n("div",{staticClass:"card-header-icon",attrs:{"aria-label":"more options"}},[n("button",{ref:"personsButton",class:t.PersonsButton.class,attrs:{id:"control-button"},on:{click:function(e){t.openShutPersons("toggle")}}},[n("span",{staticClass:"is-size-7"},[t._v(t._s(t.PersonsButton.text))])]),n("button",{ref:"CameraButton",class:t.CameraButton.class,attrs:{id:"control-button"},on:{click:function(e){t.openShutCamera("toggle")}}},[n("span",{staticClass:"is-size-7"},[t._v(t._s(t.CameraButton.text))])])])]),n("div",{staticClass:"card-content"},[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left"},[t._m(1),n("div",{staticClass:"level-item"},[n("autocomplete-input",{ref:"prsnPckr",attrs:{elemId:"person-picker",items:t.personPicker||null}})],1),t.autocompleteDirty?n("div",{staticClass:"level-item"},[n("a",{staticClass:"button is-small is-black is-inverted",on:{click:t.clearAutoComplete}},[t._m(2)])]):t._e()]),n("div",{staticClass:"level-right"})]),n("b-collapse",{ref:"collapsePersons",attrs:{open:!0}},[n("div",{attrs:{id:"scrollable-content"}},[n("virtual-scroller",{ref:"scroller",staticClass:"virtual-list",attrs:{items:t.items||[],"type-field":"type","item-height":"24","content-tag":"table","page-mode":""},scopedSlots:t._u([{key:"default",fn:function(e){return["chosen"===e.item.type?n("tr",{key:e.itemKey,staticClass:"chosen"},[n("td",{staticClass:"tag is-info persons",on:{click:function(n){t.picked(e)}}},[t._v("\n                      "+t._s(e.item.data.nombre)+" -  \n                      "),n("span",{staticClass:"italic"},[t._v("   "+t._s(e.item.data.email))])])]):t._e(),"person"===e.item.type?n("tr",{key:e.itemKey,staticClass:"person"},[n("td",{staticClass:"persons",on:{click:function(n){t.picked(e)}}},[t._v("\n                      "+t._s(e.item.data.nombre)+" -  \n                      "),n("span",{staticClass:"italic"},[t._v("   "+t._s(e.item.data.email))])])]):t._e()]}}])})],1)])],1),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter",attrs:{id:"drag-column"}},[n("hr"),n("nav",{staticClass:"level"},[n("div",{staticClass:"tags has-addons level-item has-text-centered"},[n("span",{staticClass:"tag is-dark"},[t._v("nosotros")]),n("span",{staticClass:"tag is-outlined tag-inventory"},[n("strong",[t._v(t._s(t.currentUser.nombre||"_____"))])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered control is-small"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newInventoryBottle,expression:"newInventoryBottle"}],staticClass:"input is-small",attrs:{disabled:!t.autocompleteDirty,type:"text",placeholder:"Codigo",id:"inp-esp-envase"},domProps:{value:t.newInventoryBottle},on:{keyup:function(e){if(!("button"in e)&&13!==e.keyCode)return null;t.addNewBottle("Inventory")},focus:function(e){t.closeError(t.UNKNOWN_BOTTLE_ERROR)},input:function(e){e.target.composing||(t.newInventoryBottle=e.target.value)}}})]),n("p",{staticClass:"level-item has-text-centered control is-small"},[n("a",{staticClass:"button is-small",attrs:{disabled:!t.autocompleteDirty,id:"butt-add-inventory-bottle"},on:{click:function(e){t.addNewBottle("Inventory")}}},[t._m(3)])])]),n("div",{staticClass:"container scrollable-container"},[n("Container",{attrs:{"group-name":"1","get-child-payload":t.inventoryPayload,"should-accept-drop":t.shouldAcceptInventory},on:{drop:function(e){t.onDrop("inventory",e)}}},t._l(t.inventory,function(e){return n("Draggable",{key:e.id},[n("div",{class:e.props.className,style:e.props.style,attrs:{id:e.id}},[t._v("\n                    "+t._s(e.data)+"\n                  ")])])}))],1)]),n("div",{staticClass:"column is-one-quarter",attrs:{id:"drag-column"}},[n("hr"),t._m(4),n("div",{staticClass:"trashBin"},[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("Container",{attrs:{"group-name":"1","should-accept-drop":t.shouldTrash},on:{drop:function(e){t.onDrop("trash",e)}}},[n("Draggable",{staticClass:"icon is-invisible"},[n("i",{staticClass:"far fa-trash-alt"})]),n("Draggable",{staticClass:"icon"},[n("i",{staticClass:"far fa-trash-alt"})])],1)],1)])]),n("div",{staticClass:"container scrollable-container"},[n("Container",{attrs:{"group-name":"1","get-child-payload":t.exchangePayload,"should-accept-drop":t.shouldAcceptExchange},on:{drop:function(e){t.onDrop("exchange",e)}}},t._l(t.exchange,function(e){return n("Draggable",{key:e.id},[n("div",{class:e.props.className,style:e.props.style,attrs:{id:e.id}},[t._v("\n                    "+t._s(e.data)+"\n                  ")])])}))],1),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered control is-small is-primary"},[n("a",{staticClass:"button is-small is-warning",attrs:{disabled:!t.autocompleteDirty,id:"butt-save-moves"},on:{click:t.saveMovements}},[t._m(5)])])])]),n("div",{staticClass:"column is-one-quarter",attrs:{id:"drag-column"}},[n("hr"),n("nav",{staticClass:"level"},[n("div",{staticClass:"tags has-addons level-item has-text-centered"},[n("span",{staticClass:"tag is-dark"},[t._v("cliente")]),n("span",{staticClass:"tag is-outlined tag-customer"},[n("strong",[t._v(t._s(t.personChosen.nombre||"_____"))])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered control is-small"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCustomerBottle,expression:"newCustomerBottle"}],staticClass:"input is-small",attrs:{disabled:!t.autocompleteDirty,type:"text",placeholder:"Codigo",id:"inp-esp-envase"},domProps:{value:t.newCustomerBottle},on:{keyup:function(e){if(!("button"in e)&&13!==e.keyCode)return null;t.addNewBottle("Customer")},focus:function(e){t.closeError(t.UNKNOWN_BOTTLE_ERROR)},input:function(e){e.target.composing||(t.newCustomerBottle=e.target.value)}}})]),n("p",{staticClass:"level-item has-text-centered control is-small"},[n("a",{staticClass:"button is-small",attrs:{disabled:!t.autocompleteDirty,id:"butt-add-customer-bottle"},on:{click:function(e){t.addNewBottle("Customer")}}},[t._m(6)])])]),n("div",{staticClass:"container scrollable-container"},[n("Container",{attrs:{"group-name":"1","get-child-payload":t.customerPayload,"should-accept-drop":t.shouldAcceptCustomer},on:{drop:function(e){t.onDrop("customer",e)}}},t._l(t.customer,function(e){return n("Draggable",{key:e.id},[n("div",{class:e.props.className,style:e.props.style,attrs:{id:e.id}},[t._v("\n                    "+t._s(e.data)+"\n                  ")])])}))],1)])]),n("div",{staticClass:"card-image"},[t._l(t.errors,function(e){return n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[n("b-notification",{attrs:{type:"is-danger"}},[t._v("\n              "+t._s(e)+"\n            ")])],1)}),n("b-collapse",{ref:"collapseCamera",attrs:{open:!0}})],2),t._m(7),n("p",[t._v("currentUser: "+t._s(t.currentUser.id)+"\n               Bottles: "+t._s(t.currentUser.bottles&&t.currentUser.bottles.length)+" ")]),n("p",[t._v("personChosen: "+t._s(t.personChosen.id)+"\n                Bottles: "+t._s(t.personChosen.bottles&&t.personChosen.bottles.length)+" ")])])])])},Xi=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"card-header-title"},[n("span",{staticClass:"is-size-7"},[t._v("Traspaso de Envases")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"level-item"},[n("div",{staticClass:"is-small"},[t._v("Nombre de Persona")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"far fa-trash-alt"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"is-size-7"},[n("strong",[t._v("Especificar Envase")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"level"},[n("div",{staticClass:"tags level-item has-text-centered"},[n("span",{staticClass:"tag is-dark"},[t._v("Intercambio")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"is-size-7"},[n("strong",[t._v("Grabar Movimientos")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"is-size-7"},[n("strong",[t._v("Especificar Envase")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"card-footer"},[n("a",{staticClass:"card-footer-item",attrs:{href:"#"}},[t._v("Save")]),n("a",{staticClass:"card-footer-item",attrs:{href:"#"}},[t._v("Edit")]),n("a",{staticClass:"card-footer-item",attrs:{href:"#"}},[t._v("Delete")])])}],to=(n("55dd"),n("ca49")),eo=n("8afe"),no=function(t,e){var n=e.removedIndex,s=e.addedIndex,a=e.payload;if(null===n&&null===s)return t;var i=Object(eo["a"])(t),o=a;return null!==n&&(o=i.splice(n,1)[0]),null!==s&&i.splice(s,0,o),i},so=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("QrcodeReader",{on:{decode:t.onDecode,init:t.onInit}},[n("div",{staticClass:"decoded-content"},[t._v(t._s(t.content))]),n("LoadingIndicator",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},ao=[],io=n("9a3e"),oo=(n("96cf"),n("3040")),ro=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading-indicator"},[t._v("\n  Loading...\n")])},co=[],lo=(n("6101"),{}),uo=Object(S["a"])(lo,ro,co,!1,null,null,null);uo.options.__file="LoadingIndicator.vue";var mo=uo.exports,vo=console.log,po={components:{LoadingIndicator:mo},data:function(){return{loading:!1}},methods:{onInit:function(){var t=Object(oo["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,e;case 4:this.$emit("success"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),"NotAllowedError"===t.t0.name?this.$emit("error","To detect and decode QR codes this page needs access to your camera"):"NotFoundError"===t.t0.name?this.$emit("error","Seems like you have no suitable camera on your device."):"NotSupportedError"===t.t0.name?this.$emit("error","Seems like this page is served in non-secure context. Your browser doesn't support that"):"NotReadableError"===t.t0.name?this.$emit("error","Couldn't access your camera. Is it already in use?"):"OverconstrainedError"===t.t0.name?this.$emit("error","Constraints don't match any installed camera. Did you asked for the front camera although there is none?"):(this.$emit("error","UNKNOWN ERROR: ".concat(t.t0.message)),vo(t.t0));case 10:return t.prev=10,this.loading=!1,t.finish(10);case 13:case"end":return t.stop()}},t,this,[[1,7,10,13]])}));return function(e){return t.apply(this,arguments)}}()}},fo={components:{QrcodeReader:io["QrcodeReader"]},mixins:[po],data:function(){return{content:""}},methods:{onDecode:function(t){this.content=t}}},bo=fo,ho=(n("7b60"),Object(S["a"])(bo,so,ao,!1,null,"90722470",null));ho.options.__file="Decoder.vue";var go=ho.exports,Co=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"file-select"},[n("div",{staticClass:"select-button"},[t.value?n("span",[t._v("Selected File: "+t._s(t.value.name))]):n("span",[t._v("Select File")])]),n("input",{attrs:{type:"file"},on:{change:t.handleFileChange}})])},_o=[],wo={name:"awesomplete",data:function(){return{model:"",awesomplete:{}}},props:{placeholder:{default:"",type:String,required:!1},list:{default:"",type:Array,required:!0},classes:{default:String,type:String,required:!1}},mounted:function(){var t=this,e=this;this.$nextTick(function(){t.awesomplete=new os.a(e.$refs.awesomplete,{minChars:3,maxItems:5,list:t.list}),t.$refs.awesomplete.focus()})}},yo=wo,xo=Object(S["a"])(yo,Co,_o,!1,null,null,null);xo.options.__file="BaseInputText.vue";var Oo=xo.exports,ko=(n("f5766"),n("d6e1")),Eo=Yt.dbServerProtocol,Po=Yt.dbServerURI,Do=Yt.databaseName,Io=console.log,So=console.error;if(Io("PouchDb configuration...\n".concat(JSON.stringify(Yt,null,2),"\n")),!Eo)throw new Error("VuePouchDB Error → remote database server protocol is required!");if(!Po)throw new Error("VuePouchDB Error → remote database server URI is required!");if(!Do)throw new Error("VuePouchDB Error → a main database name is required!");var jo={user:{name:null,password:null},dbMgr:"asdf",srvr:{dbServerProtocol:Eo,dbServerURI:Po,databaseName:Do}},To={getUserCredentials:function(t){return t.user},getDbMgr:function(t){return t.dbMgr}},Ao={setUserCredentials:function(t,e){window.lgr.debug('Database (mutation) :: recording new user credentials "'.concat(e.name,'"')),t.user=e},setDbMgr:function(t,e){window.lgr.info("Database (mutation) :: recording datbase manager"),Io(t.dbMgr),t.dbMgr=e,Io(t.dbMgr)}},Ro={setUserCredentials:function(t,e){if(e.payload.couchdb){var n=e.payload.couchdb;window.lgr.info("Database (action) :: recording new user credentials > ".concat(JSON.stringify(e.payload,null,2))),Io(n),t.commit("setUserCredentials",n)}},connectToRemoteService:function(t,e){Io("\n\n      Connext to remote service >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n    "),Io(e),Io(t);var n=t.state,s=n.user,a=n.srvr,i=n.dbMgr;i.setMaxListeners(30);var o=a.databaseName,r="".concat(a.dbServerProtocol,"://").concat(s.name,":").concat(s.password,"@").concat(a.dbServerURI,"/").concat(a.databaseName),c=new ko["a"](r,{skip_setup:!0}),l=[{type:"view",name:"visible/compact_bottle"},{type:"view",name:"visible/compact_person"},{type:"filter",name:"ddocs/this_ddoc"}];l.forEach(function(t){var e={live:!0,retry:!0};e[t.type]=t.name,i.replicate.from(c,e).on("change",function(e){Io("".concat(o,"/").concat(t.name," **********  INCOMING REPLICATION DELTA ********* ").concat(JSON.stringify(e,null,2))),"ddocs/this_ddoc"===t.name&&Io(e)}).on("paused",function(){Io("".concat(o,"/").concat(t.name," **********  INCOMING REPLICATION ON HOLD *********")),i.allDocs({include_docs:!0,attachments:!0}).then(function(t){Io("allDocs fetch result"),Io(t)}).catch(function(t){So("allDocs fetch failure ".concat(t))})}).on("active",function(){Io("".concat(o,"/").concat(t.name," **********  INCOMING REPLICATION RESUMED *********"))}).on("denied",function(e){Io("".concat(o,"/").concat(t.name," **********  INCOMING REPLICATION DENIED ********* ").concat(e))}).on("error",function(e){return Io("".concat(o,"/").concat(t.name," INCOMING REPLICATION FAILURE ************ ").concat(e))})});var u="ExchangeRequest",d=function(t){return t._id.substring(0,15)===u},m={live:!0,retry:!0,filter:d};i.replicate.to(c,m).on("change",function(t){Io("".concat(o,"/").concat(u," **********  OUTGOING REPLICATION DELTA ********* "));var e=t.change.docs.filter(function(t){return!t.data||"person"!==t.data.type&&"bottle"!==t.data.type});e.forEach(function(t){Io("DOC :: ".concat(JSON.stringify(t,null,2)))})}).on("paused",function(){Io("".concat(o,"/").concat(u," **********  OUTGOING REPLICATION ON HOLD ********* ").concat(s.name)),i.allDocs({include_docs:!0,attachments:!0}).then(function(t){Io("allDocs fetch result"),Io(t)}).catch(function(t){So("allDocs fetch failure ".concat(t))})}).on("active",function(){Io("".concat(o,"/").concat(u," **********  OUTGOING REPLICATION RESUMED *********"))}).on("denied",function(t){Io("".concat(o,"/").concat(u," **********  OUTGOING REPLICATION DENIED ********* ").concat(t))}).on("error",function(t){return Io("".concat(o,"/").concat(u," OUTGOING REPLICATION FAILURE ************ ").concat(t))})},rememberDbMgr:function(t,e){Io("\n\n      Remember DB manager >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n    "),Io(e),t.commit("setDbMgr",e.dbmgr)}},Lo=function(t,e){return(t+e).substring(e.length)},$o=function(){var t=new Date,e="";e+=t.getFullYear(),e+=Lo("00",(1+t.getMonth()).toString()),e+=Lo("00",t.getDate().toString()),e+=Lo("00",t.getHours().toString()),e+=Lo("00",t.getMinutes().toString()),e+=Lo("00",t.getSeconds().toString());var n=parseInt("".concat(e),10);return n};function No(){var t=$o();return No.old=t>No.old?t:No.old+=1,No.old}function Uo(){return No()}No.old=0;var Mo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return"".concat(Uo()).concat(e).concat(t.toString().padStart(5,"0"))},Fo={namespaced:!0,state:jo,getters:To,mutations:Ao,actions:Ro},Bo=console.log,Yo=console.error,qo=function(t){var e=t;Bo("\n    uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu");var n=new RegExp("^.*","gi");return e.liveFeedStatus="finding",Bo("Searching with: ".concat(n)),e.$pouch.liveFind({selector:{"data.type":"person","data.nombre":{$regex:n}},sort:["data.type","data.nombre"]}).on("update",function(t,n){var s=t;e.getItems(s)}).on("ready",function(){Bo("###############   Initial query complete.   ##############"),e.liveFeedStatus="listening"}).on("cancelled",function(){Bo("###############   LiveFind cancelled.   ##############"),e.liveFeedStatus="idle"}).on("error",function(t){Yo("Oh no!",t)})},Vo=[],zo="Lista de Envases",Qo={class:"button is-small is-info",text:"Ver Personas"},Jo={class:"button is-small is-info is-outlined",text:"Esconder Personas"},Ko={class:"button is-small is-info",text:"Ver QR"},Go={class:"button is-small is-info is-outlined",text:"Esconder QR"},Wo=99999999,Ho={id:Wo,data:"Rastrear envases aqui\n  ",src:"",props:{className:"card",style:{marginLeft:"10px",marginRight:"10px",marginTop:"10px",paddingTop:"20px",backgroundColor:"#fffff0",textAlign:"center"}}},Zo=function(t,e){t.map(function(t,n){return e.includes(t.id)?n:-1}).sort(function(t,e){return-1*(t-e)}).forEach(function(e){return t.splice(e,1)}),t.findIndex(function(t){return t.id===Wo})<0&&t.push(Ho)},Xo="Error: Envase desconocido!",tr={name:"bottle-tasks",data:function(){return{thoseChosen:[],personChosen:{name:null,id:"------",bottles:[]},selectedDemo:"qrDecode",PersonsButton:Jo,CameraButton:Go,autocompleteDirty:!1,personPicker:{list:[],data:function(t){return{label:"[".concat(t.pos,"] ").concat(t.label),value:t.pos}}},items:Vo,inwardOutward:"Recibir de",newCustomerBottle:"",newInventoryBottle:"",PLACEMARKER:zo,UNKNOWN_BOTTLE_ERROR:Xo,bottles:[zo],errors:[],currentUser:{id:null,bottles:[]},inventory:[],customer:[],exchange:[Ho],trash:[Ho],fruits:[{codigo:101,nombre:"Apple"},{codigo:102,nombre:"Banana"},{codigo:103,nombre:"Orange"},{codigo:104,nombre:"Mango"},{codigo:105,nombre:"Pear"},{codigo:106,nombre:"Peach"},{codigo:107,nombre:"Grape"},{codigo:108,nombre:"Tangerine"},{codigo:109,nombre:"Pineapple"}]}},methods:{personPicked:function(){var t=this;this.$nextTick(function(){Bo("%%%%%%%%%%%%%%%% person picked %%%%%%%%%%%%%%%%%% "),Bo(t.$refs.prsnPckr.$el),Bo(t.$refs.prsnPckr.$el._value-1);var e=t.$refs.prsnPckr.$el._value-1;Bo(e);var n=Object(g["cloneDeep"])(t.items[e]);Bo(t.items[e].data.nombre),Bo(n.data.nombre),Bo(Object(g["cloneDeep"])(t.items[e]).data.nombre),t.$refs.prsnPckr.$el.value=n.data.nombre,t.picked({itemIndex:e})})},clearAutoComplete:function(){var t=this;this.autocompleteDirty=!1,this.thoseChosen.forEach(function(e){t.items[e].type="person"}),this.$refs.prsnPckr.$el.value="",this.personChosen.bottles=[],this.personChosen.nombre=null,this.customer=[],this.exchange=[],this.exchange.push(Ho),this.openShutPersons("open")},addNewBottle:function(t){var e=this;Bo("%%%%%%%%%%%%%%%% add new bottle %%%%%%%%%%%%%%%%%% ");var n=this["new".concat(t,"Bottle")].toUpperCase();Bo(this.inventory),Bo(this.customer),Bo(this.exchange),this.$pouch.find({selector:{"data.type":"bottle","data.codigo":n}}).then(function(s){if(s.docs.length<1)return e.openError(Xo),void(e["new".concat(t,"Bottle")]=null);var a=e.inventory.filter(function(t){return t.data===n}),i=e.customer.filter(function(t){return t.data===n}),o=Object(M["a"])(s.docs,1),r=o[0];if(a.length>0){var c=Object(M["a"])(a,1);r=c[0],Bo("move from inventory ".concat(JSON.stringify(a,null,2))),e.inventory=e.inventory.filter(function(t){return t!==a[0]})}else if(i.length>0){var l=Object(M["a"])(i,1);r=l[0],Bo("move from customer ".concat(JSON.stringify(i,null,2))),e.customer=e.customer.filter(function(t){return t!==i[0]})}else Bo("add to exchange ".concat(JSON.stringify(r,null,2))),r={id:parseInt(r.data.id,10),data:r.data.codigo,src:"#".concat(t.slice(0,1)),props:{className:"draggable-item draggable-".concat(t.toLowerCase()," dashed"),style:{textAlign:"center",backgroundColor:"Inventory"===t?"#c0ebfd":"#f0fff0"}}};e.exchange.push(r),e.exchange=e.exchange.filter(function(t){return 99999999!==t.id})}).catch(function(t){e.openError("Error: Búsqueda fallida! (".concat(t,")"))}),this.bottles[0]===this.PLACEMARKER?this.bottles.splice(0,1,n):this.bottles.push(n)},saveMovements:function(){var t=this;Bo("%%%%%%%%%%%%%%%% save movements %%%%%%%%%%%%%%%%%% ");var e=parseInt(this.personChosen.idIB,10),n=parseInt(this.currentUser.id,10),s="ExchangeRequest",a=this.exchange.filter(function(t){return t.src.match(/C/)}).map(function(t){return t.id}),i=this.exchange.filter(function(t){return t.src.match(/I/)}).map(function(t){return t.id});if(a.length>0){var o=this.$pouch.rel.makeDocID({type:s,id:Mo(e,"I")}),r=this.$pouch.rel.parseDocID(o),c={_id:o,data:{id:r.id,type:s,inOut:"in",status:"new",bottles:a,customer:e,inventory:n}};Bo("movement in ".concat(JSON.stringify(c,null,2))),this.$pouch.put(c).then(function(e){Bo("---------- Saved movement IN --------"),Zo(t.exchange,a),Bo(e)})}if(i.length>0){var l=this.$pouch.rel.makeDocID({type:s,id:Mo(e,"O")}),u=this.$pouch.rel.parseDocID(l),d={_id:l,data:{id:u.id,type:s,status:"new",inOut:"out",bottles:i,customer:e,inventory:n}};Bo("movement out ".concat(JSON.stringify(d,null,2))),this.$pouch.put(d).then(function(e){Bo("---------- Saved movement OUT --------"),Zo(t.exchange,i),Bo(e)})}this.$pouch.rel.find("Movement").then(function(t){Bo("wwwwwwwwwwwwwwwww Result wwwwwwwwwwwwwww"),Bo(t)})},dropBottle:function(t){this.bottles.splice(this.bottles.indexOf(t),1)},dropBottles:function(){this.bottles=[this.PLACEMARKER]},openShutPersons:function(t){var e=this.$refs.collapsePersons.isOpen;switch(this.$refs.personsButton.blur(),t){case"open":if(e)return void(this.PersonsButton=Jo);break;case"shut":if(!e)return void(this.PersonsButton=Qo);break;default:}this.PersonsButton=e?Qo:Jo,this.$refs.collapsePersons.toggle()},openShutCamera:function(t){var e=this.$refs.collapseCamera.isOpen;switch(this.$refs.CameraButton.blur(),t){case"open":if(e)return void(this.CameraButton=Go);break;case"shut":if(!e)return void(this.CameraButton=Ko);break;default:}this.CameraButton=e?Ko:Go,this.$refs.collapseCamera.toggle()},onDrop:function(t,e){this[t]=no(this[t],e),"exchange"===t&&(Bo("onDrop"),this.exchange.length>1?this.exchange=this.exchange.filter(function(t){return 99999999!==t.id}):this.exchange.length<1&&this.exchange.push(Ho),Bo(e))},inventoryPayload:function(t){return this.inventory[t]},exchangePayload:function(t){return this.exchange[t]},customerPayload:function(t){return this.customer[t]},trashPayload:function(t){return this.trash[t]},shouldAcceptCustomer:function(t,e){return Bo("shouldAcceptCustomer"),Bo(e),"C"===e.src&&this.autocompleteDirty},shouldAcceptInventory:function(t,e){return Bo("shouldAcceptInventory"),Bo(e),"I"===e.src&&this.autocompleteDirty},shouldAcceptExchange:function(t,e){return Bo("shouldAcceptExchange"),Bo(e),this.autocompleteDirty},shouldTrash:function(t,e){return Bo("shouldTrash"),Bo(e.src),"#"===e.src.slice(0,1)},picked:function(t){var e=this;Bo("picked ".concat(JSON.stringify(t,null,2))),Bo(t);var n=Object(g["cloneDeep"])(this.items[t.itemIndex]);if(this.autocompleteDirty=!0,this.personChosen.nombre===n.data.nombre)this.personChosen.nombre=null,this.items[t.itemIndex].type="person",this.thoseChosen=[],this.openShutPersons("open");else{this.thoseChosen.forEach(function(t){e.items[t].type="person"}),this.thoseChosen.push(t.itemIndex),this.items[t.itemIndex].type="chosen",this.personChosen=n.data,this.$refs.prsnPckr.setValue(this.personChosen.nombre);var s=parseInt(this.personChosen.idIB,10),a=this.$pouch.rel.makeDocID({type:"aPerson",id:s});Bo(a),this.$pouch.liveFind({selector:{_id:{$eq:a}}}).on("update",function(){Bo("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Chosen User Updated ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"),e.$pouch.rel.find("aPerson",s).then(function(t){Bo("\n              !!!!!!!!!!!!!!!!  [ picked ]  !!!!!!!!!!!!!!!!!!\n              ".concat(JSON.stringify(e.personChosen,null,2),"\n              ")),Bo(t),t.allBottles?(e.customer=t.allBottles.filter(function(e){return t.allPersons[0].bottles.includes(e.id)}).map(function(t){return{id:t.id,data:t.codigo,src:"C",props:{className:"draggable-item draggable-customer ",style:{backgroundColor:"#f0fff0",textAlign:"center"}}}}),Bo(e.personChosen)):(e.personChosen.bottles=[],e.customer=[])})}),this.$refs.collapsePersons.toggle(),this.openShutPersons("shut")}},getItems:function(t){var e=null,n=null,s=null,a=null,i=null;switch(t.action){case"REMOVE":Bo("###############   LiveFind remove not implemented   ##############");break;case"UPDATE":a=this.$pouch.rel.parseDocID(t.id).id.toString(),e=this.items.findIndex(function(t){return t.data.idIB==a}),Bo("###############   LiveFind update   ##############"),i=t.doc.data,this.items[e]?this.items[e].data=i:Bo("?????????????????????????????????????????????????????????????????????\n              What is wrong with ".concat(JSON.stringify(this.items,null,2),"\n              ?????????????????????????????????????????????????????????????????????")),s=i.codigo,n=this.personPicker.list.findIndex(function(t){return t.value===s});try{this.personPicker.list[n-1].value=s,this.personPicker.list[n-1].label=i.nombre}catch(t){Bo("Unexpected missing list item in personPicker\n              pouchData.doc.data.codigo :: ".concat(s,"\n              personPicker.list :: ").concat(n))}break;default:this.items.push({type:"person",data:t.doc.data}),this.personPicker.list.push({pos:this.personPicker.list.length+1,value:t.doc.data.codigo,label:t.doc.data.nombre})}},openError:function(t){this.errors.push(t)},closeError:function(t){var e=this.errors.indexOf(t);this.errors.splice(e,1)},clearErrors:function(){this.errors=[]}},created:function(){this.liveFeed=qo(this)},mounted:function(){var t=this;Bo("\n      !!!!!!!!!!!!!!!! mounted !!!!!!!!!!!!!!!!!!"),this.currentUser.id=parseInt(this.$store.state.dbmgr.user.name,10),Bo(this.currentUser);var e=this.$pouch.rel.makeDocID({type:"aPerson",id:this.currentUser.id});Bo(e),this.$pouch.liveFind({selector:{_id:{$eq:e}}}).on("update",function(){Bo("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Current User Updated ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"),t.$pouch.rel.find("aPerson",t.currentUser.id).then(function(e){Bo(e),Bo(e.allPersons),Bo(e.allPersons.length),e.allPersons&&e.allPersons.length>0&&(t.currentUser.bottles=e.allBottles.filter(function(t){return e.allPersons[0].bottles.includes(t.id)}),t.currentUser.nombre=e.allPersons[0].nombre,t.inventory=t.currentUser.bottles.map(function(t){var e={id:t.id,data:t.codigo,src:"I",props:{className:"draggable-item draggable-inventory ",style:{backgroundColor:"#c0ebfd",textAlign:"center"}}};return e}),Bo(t.currentUser))})})},components:{Container:to["Container"],Draggable:to["Draggable"],qrDecode:go,"autocomplete-input":vs,"base-input":Oo},watch:{selectedDemo:"clearErrors"},computed:{draggableItemStyle:function(t,e){return Bo("\n        !!!!!!!!!!!!!!!! draggableItemStyle !!!!!!!!!!!!!!!!!!\n        "),Bo(t),Bo(e),"draggable-item draggable-customer"}}},er=tr,nr=er,sr=(n("5b44"),Object(S["a"])(nr,Zi,Xi,!1,null,null,null));sr.options.__file="BottleTasks.vue";var ar=sr.exports,ir=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("help text !!")])},or=[],rr={},cr=Object(S["a"])(rr,ir,or,!1,null,null,null);cr.options.__file="BottleTasksHelper.vue";var lr=cr.exports,ur=console.log,dr=[{path:"",name:"home",components:{nav_bar:Hi,default:ar,helper:lr}}],mr={namespaced:!0,state:{personChosen:"escoger",resetList:!1},getters:{personChosen:function(t){return t.personChosen},resetList:function(t){return t.resetList}},mutations:{setChosenPerson:function(t,e){ur("Set chosen to - ".concat(e)),t.personChosen=e},toggleDirty:function(t){ur("Toggle dirty from - ".concat(t.resetList)),t.resetList=!t.resetList}},actions:{choosePerson:function(t,e){ur("Choosing - ".concat(e)),t.commit("setChosenPerson",e)},unChooseAll:function(t){ur("UN Choosing"),t.commit("toggleDirty")}}},vr=n("14b7"),pr=n.n(vr),fr=console.log,br=function(t){var e=pr.a.decode(t);return fr(e),e},hr=br,gr=1,Cr=0,_r=1,wr=0,yr="no token",xr=console.log,Or={accessToken:yr,accessExpiry:null,active:Cr,authenticated:wr,nameUser:"",permissions:"",accessLevel:""},kr={axsToken:function(t){return t.accessToken},isActive:function(t){return t.active},isAuthenticated:function(t){return t.authenticated},nameUser:function(t){return t.nameUser},accessExpiry:function(t){return t.accessExpiry},accessLevel:function(t){return t.accessLevel},permissions:function(t){return t.permissions}},Er={saveToken:function(t,e){var n=e.token,s=e.payload;s&&(window.lgr.info("Auth(mutation) => Saving jwt. Permissions :: [".concat(s.permissions,"]")),xr(s.permissions),xr(t),window.ls.set(Yt.tokenName,n),t.accessToken=n,t.nameUser=s.name,t.permissions=s.permissions,t.accessExpiry=s.exp,t.accessLevel="Iridium Blue"===t.nameUser?"admin":"user",window.ls.set(Yt.authName,_r),t.authenticated=_r,window.ls.set(Yt.activityName,_r),t.active=gr)},toSignedOut:function(t){window.lgr.warn("Auth(mutation) :: Requesting to sign out here"),window.ls.set(Yt.tokenName,null),t.accessToken=""},activity:function(t,e){window.lgr.warn("Auth(mutation) :: Changing activity state"),t.active=e,window.ls.set(Yt.activityName,e)},auth:function(t,e){window.lgr.warn("Auth(mutation) :: Changing authentication state"),t.authenticated=e,window.ls.set(Yt.authName,e)}},Pr={keepTkn:function(t,e){var n=e.token,s=e.ability,a=pr.a.decode(n);a&&(t.dispatch("dbmgr/setUserCredentials",{payload:a}),t.dispatch("dbmgr/connectToRemoteService",{payload:a}),t.dispatch("a12n/resetPermissions",{payload:a,ability:s}),t.commit("saveToken",{token:n,payload:a}))},refreshToken:function(t,e){var n=e,s=yr;xr("--------------  VALIDATE TOKEN ------------------"),xr("pyld"),xr(n),n?xr(pr.a.decode(n)):n=yr;var a,i=0,o=1,r=2,c=null,l=null,u=null,d=null;xr("check pyld token");try{c=hr(n),l=pr.a.decode(n).exp,i+=o}catch(t){xr("Payload token invalid :: ".concat(t))}xr("Check stored token");try{u=window.ls.get(Yt.tokenName,yr),d=pr.a.decode(t.getters.axsToken).exp,i+=r}catch(t){xr("Stored token invalid :: ".concat(t))}switch(i){case 1:xr("Committing token from payload"),s=c;break;case 2:xr("Refreshing stored token from payload"),s=u;break;case 3:a=l>d,xr("Refreshing ".concat(a?"payload token":"stored token"," from payload")),s=a?c:u;break;default:}t.commit("saveToken",s)},logIn:function(t){t.commit;var e=t.dispatch;e("setActivity",gr),e("authenticate")},authenticate:function(t){t.commit,t.dispatch;var e=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_STATIC_MODE,n="";window.lgr.info("Auth(action) :: Authenticating... ".concat(e)),n="".concat(Yt.server).concat(Yt.authPath,"?mode=").concat(e);var s=Object({NODE_ENV:"production",BASE_URL:"/"})[Yt.testAuthUrlEnvVar];window.lgr.info("Auth(action) :: Faked authentication URL :: ".concat(s)),s&&(n=s),window.location.assign(n),el.$route.name.includes("home")||(window.lgr.info("Auth(action) :: Set return route in local storage - ".concat(Yt.returnRouteName,': "').concat(el.$route.name,'"')),window.ls.set(Yt.returnRouteName,el.$route.name))},logOut:function(t){var e=t.commit,n=t.dispatch;n("setActivity",Cr),n("setAuth",wr),e("toSignedOut")},setActivity:function(t,e){var n=t.commit;n("activity",e)},setAuth:function(t,e){var n=t.commit;n("auth",e)},handle401:function(t){var e=9e5,n=(new Date).getTime()/1e3,s=t.state.accessExpiry-n;xr("sessionTime  - ".concat(e)),xr("now  - ".concat(n/1e3)),xr("exp  - ".concat(t.state.accessExpiry)),xr("remaining  - ".concat(s));var a=s>1?"expired":"remaining validity (secs): ".concat(s);window.lgr.info("Auth(action) handle401:: Token status : ".concat(a)),t.state.authenticated<1?(window.lgr.info("Auth(action) handle401:: Not logged in."),t.dispatch("logIn")):s<1?(window.lgr.info("Auth(action) handle401:: Expired token."),t.dispatch("notifyUser",{txt:"Your session expired. Logging you in again.",lvl:"is-warning"}),t.dispatch("logIn")):(window.lgr.info("Auth(action) handle401:: Wrong user??"),window.ls.storage.removeItem(Yt.localStorageNameSpace+Yt.returnRouteName))}},Dr={state:Or,getters:kr,mutations:Er,actions:Pr},Ir=console.log;s["default"].use(R["a"]);var Sr=new R["a"].Store({state:Object(A["a"])({counter:0,isDebug:!1,isError:!1,msgError:{txt:"We got failure happening",lvl:"is-warning"},axsRights:["visitor"],integrityCheck:{person:9999,product:8888,invoice:7777}},Object(d["formulateState"])()()),getters:Object(A["a"])({isDebug:function(t){return t.isDebug},isError:function(t){return t.isError},msgError:function(t){return t.msgError},theRoles:function(t){return window.lgr.debug(t.axsRights),t.axsRights},theCounter:function(t){return{cntr:t.counter,other:"okok"}},theFormData:function(){return{email:"a@b.ca",password_confirmation:"qwer",password:"qwer"}}},Object(d["formulateGetters"])()),mutations:Object(A["a"])({notifyUser:function(t,e){window.lgr.warn(e.txt),Ir(t),t.msgError=e,t.isError=!0},debugMode:function(t,e){t.isDebug=e},updateIntegrityCheck:function(t,e){window.lgr.warn(e),t.integrityCheck=e},clearNotifyUser:function(t){t.msgError="",t.isError=!1},axsRole:function(t,e){window.lgr.debug(e.roles),t.axsRights=e.roles},increment:function(t){window.lgr.warn("UU"),t.counter+=1},decrement:function(t){Ir("DD"),t.counter-=1},fillFormPerX:function(t){Ir("QQQQQ GG QQQQQQ"),Ir(t),t.values.person={email:"a@b.es",description:"qwer",name:"qwer"}},fillForm:function(t){Ir("QQQQQQQQQQQ"),Ir(t),t.values.registration={email:"a@b.c",password_confirmation:"qwer",password:"qwer"}}},Object(d["formulateMutations"])()),actions:{updateIntegrityCheck:function(t,e){var n=t.commit;n("updateIntegrityCheck",e)},notifyUser:function(t,e){var n=t.commit;n("notifyUser",e)},clearNotifyUser:function(t){var e=t.commit;e("clearNotifyUser")},debugMode:function(t,e){var n=t.commit;n("debugMode",e)},setAxsRole:function(t,e){var n=t.commit;n("axsRole",e)},increment:function(t){return Ir("QQQQQ  increment QQQQQQ"),Ir(t),t.commit("increment")},decrement:function(t){var e=t.commit;e("decrement")},fillForm:function(t){var e=t.commit;e("fillForm")}},modules:{Auth:Dr,a12n:Mt,dbmgr:Fo,person:Ve,product:gn,invoice:Qs,bottle:mi,movement:mr}}),jr=n("3de5"),Tr=n.n(jr),Ar=n("5d16"),Rr=(n("638c"),n("4833")),Lr=n.n(Rr),$r=Yt.databaseName,Nr=console.log,Ur=(console.error,function(t){ko["a"].plugin(t)}),Mr=function(t){var e=t;if(!$r)throw new Error("VuePouchDB Error → a main database name is expected !");ko["a"].plugin(Tr.a),ko["a"].plugin(Ar["a"]),ko["a"].plugin(Lr.a);var n=new ko["a"]($r);e.pouch=n,e.prototype.$pouch=n,n.setSchema([{singular:"aBottle",plural:"allBottles",relations:{ultimo:{belongsTo:"aPerson"}}},{singular:"aPerson",plural:"allPersons",relations:{bottles:{hasMany:"aBottle"}}},{singular:"Customer",plural:"Customers",documentType:"aPerson"},{singular:"Inventory",plural:"Inventories",documentType:"aPerson"},{singular:"Movement",plural:"Movements",relations:{inventory:{belongsTo:"Inventory"},customer:{belongsTo:"Customer"},bottles:{hasMany:"aBottle"}}}]);var s=null;s="idxPersonName",n.createIndex({index:{fields:["data.type","data.nombre"],name:s}}).then(function(t){Nr("New index ".concat(s," :: ").concat(t)),Nr(t)}).catch(function(t){Nr("Failed to create index ".concat(s," :: ").concat(t)),Nr(t)}),s="idxBottleCode",n.createIndex({index:{fields:["data.type","data.codigo"],name:s}}).then(function(t){Nr("New index ".concat(s," :: ").concat(t)),Nr(t)}).catch(function(t){Nr("Failed to create index ".concat(s," :: ").concat(t)),Nr(t)}),s="idxBottleId",n.createIndex({index:{fields:["data.type","data.id"],name:s}}).then(function(t){Nr("New index ".concat(s," :: ").concat(t)),Nr(t)}).catch(function(t){Nr("Failed to create index ".concat(s," :: ").concat(t)),Nr(t)}),s="idxMovement",n.createIndex({index:{fields:["data.type","data.inventory"],name:s}}).then(function(t){Nr("New index ".concat(s," :: ").concat(t)),Nr(t)}).catch(function(t){Nr("Failed to create index ".concat(s," :: ").concat(t)),Nr(t)})},Fr={install:Mr,plugIn:Ur,PouchDB:ko["a"]},Br=(n("673e"),{id:"es-AR",message:{hello:"Che!"}}),Yr={id:"es-419",message:{hello:"Hola!"}},qr={id:"es",sub:[Yr,Br],message:{hello:"Saludos amigos!!!"},label:{signup:"Inscribirse",signin:"Ingresar",signout:"Salir"}},Vr={id:"en-GB",message:{hello:"Watcha!"}},zr={id:"en-US",message:{hello:"Howdy",damned:"Thrown under a bus"}},Qr={id:"en",sub:[zr,Vr],message:{hello:"Hello!!!",damned:"Thrown to the wolves"},label:{signup:"Join",signin:"Log in",signout:"Log out"}},Jr=[qr,Qr],Kr={};Jr.forEach(function(t){t.sub.forEach(function(t){Kr[t.id]=t}),Kr[t.id]=t});var Gr=Kr,Wr=n("bc3a"),Hr=n.n(Wr),Zr=n("8c4f"),Xr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-left":"30px"}},[n("h1",[t._v("Some Protected Sections!")]),n("ol",[n("li",[n("h3",[t._v("Read-only view")]),t.$can("only_view","protected")?n("p",{staticStyle:{"margin-left":"30px"}},[t._v("\n        You are allowed to see this text.\n      ")]):t._e()]),n("li",[n("h3",[t._v("Limited Edits")]),t.$can("comment","protected")?n("p",{staticStyle:{"margin-left":"30px"}},[t._v("\n        You are allowed to make some edits.\n      ")]):t._e()]),n("li",[n("h3",[t._v("Any Edits")]),t.$can("alter","protected")?n("p",{staticStyle:{"margin-left":"30px"}},[t._v("\n        You are allowed any edits of this resource.\n      ")]):t._e()]),n("li",[n("h3",[t._v("Alter Privileges")]),t.$can("assign","protected")?n("p",{staticStyle:{"margin-left":"30px"}},[t._v("\n        You are allowed to control access to this resource.\n      ")]):t._e()])]),n("hr"),n("p",[t._v("Unprotected text")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.$can("only_view","protected"),expression:"$can('only_view', 'protected')"}]},[t._v("Protected text!")]),t._v("\n  "+t._s(t.qtst)+"\n\n  "),n("hr"),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"classified"}}},[n("icon",{attrs:{name:"arrow-circle-right"}}),t._v("\n     Classified\n  ")],1)],1)},tc=[],ec=console.log,nc={computed:{qtst:function(){var t=" ------- Quick Test -------";return ec(t),ec(St),ec(this.$ability),ec(window.ability),ec(this.$can("alter","protected")),t}}},sc=nc,ac=Object(S["a"])(sc,Xr,tc,!1,null,null,null);ac.options.__file="Protected.vue";var ic=ac.exports,oc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column is-one-quarter"}),n("Container",{staticClass:"column is-one-quarter",attrs:{"group-name":"1","get-child-payload":t.sourcePayload},on:{drop:function(e){t.onDrop("source",e)}}},t._l(t.source,function(e){return n("Draggable",{key:e.id},[n("div",{staticClass:"draggable-item"},[t._v("\n        "+t._s(e.data)+"\n      ")])])})),n("Container",{staticClass:"column is-one-quarter",attrs:{"group-name":"1","get-child-payload":t.targetPayload},on:{drop:function(e){t.onDrop("target",e)}}},t._l(t.target,function(e){return n("Draggable",{key:e.id},[n("div",{staticClass:"draggable-item"},[t._v("\n        "+t._s(e.data)+"\n      ")])])})),n("div",{staticClass:"column is-one-quarter"})],1)},rc=[],cc={name:"Groups",components:{Container:to["Container"],Draggable:to["Draggable"]},data:function(){return{source:[{id:100001,data:"IBAA001"},{id:100005,data:"IBAA005"}],target:[{id:100014,data:"IBAA014"},{id:100015,data:"CLAA015"}]}},methods:{onDrop:function(t,e){this[t]=no(this[t],e)},sourcePayload:function(t){return this.source[t]},targetPayload:function(t){return this.target[t]}}},lc=cc,uc=Object(S["a"])(lc,oc,rc,!1,null,null,null);uc.options.__file="Classified.vue";var dc=uc.exports,mc=(console.log,[{name:rt,path:"protected",component:ic},{name:ct,path:"classified",component:dc}]),vc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("NavBar"),n("PseudoAuthorizations"),n("router-view"),n("router-view",{attrs:{name:"helper"}}),n("Footer")],1)},pc=[],fc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isDebug?n("div",{attrs:{id:"pauth"}},[n("b-collapse",{attrs:{id:"divTbl",open:!1}},[n("button",{staticClass:"button is-small is-primary",attrs:{slot:"trigger"},slot:"trigger"},[t._v("Authorizations Tester")]),n("div",[n("table",{staticClass:"table is-narrow is-hoverable is-size-6",attrs:{id:"axsCtrl"}},[n("thead",[n("tr",[n("th",{attrs:{id:"colRsrc"}},[t._v("Resource")]),n("th",{attrs:{id:"colPrvlg"}},[t._v("Privilege")])])]),n("tbody",t._l(t.getUserPermissions,function(e,s,a){return n("tr",[n("th",{staticClass:"is-size-7",attrs:{id:"colRsrc"}},[t._v(t._s(s))]),n("td",{attrs:{id:"colPrvlg"}},[n("b-field",[n("b-select",{staticClass:"is-size-7",attrs:{id:s,placeholder:t.axsLvls[0].axs},nativeOn:{change:function(e){return t.updPermissions(e)}},model:{value:t.user.permissions[s],callback:function(e){t.$set(t.user.permissions,s,e)},expression:"user.permissions[key]"}},t._l(t.axsLvls,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                     "+t._s(e.axs)+"\n                    ")])}))],1)],1)])})),n("tfoot",{staticClass:"is-hidden"},[n("tr",[n("th",{attrs:{id:"colRsrc"}},[t._v("Resource")]),n("th",{attrs:{id:"colPrvlg"}},[t._v("Privilege")])])])])])]),t._v("\n\n"+t._s(t.getUserPermissions)+"\n\n  ")],1):t._e()},bc=[],hc=console.log,gc={data:function(){return{axsLvls:St.olvls,axsLvl:{Example:0,Person:3},role:"admin"}},computed:Object(A["a"])({},Object(R["d"])("a12n",["domains","user"]),Object(R["c"])("a12n",["getUserPermissions"]),Object(R["c"])({isDebug:"isDebug"})),methods:Object(A["a"])({},Object(R["b"])("a12n",["changePermissions"]),{onRoleChange:function(){hc("================================ ".concat(this.domains)),this.changeRole(this.role)},updPermissions:function(t){this.changePermissions({change:{resource:t.target.id,setting:t.target.value},ability:this.$ability})}})},Cc=gc,_c=(n("8e2b"),Object(S["a"])(Cc,fc,bc,!1,null,"c5a18ffa",null));_c.options.__file="PseudoAuthorizations.vue";var wc=_c.exports,yc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",[n("b-notification",{attrs:{type:t.msgError.lvl,"has-icon":"",active:t.isError},on:{"update:active":function(e){t.isError=e}}},[t._v("\n      "+t._s(t.msgError.txt)+"\n    ")])],1),n("div",{staticClass:"control"},[n("b-switch",{attrs:{type:"is-danger"},model:{value:t.aclDebug,callback:function(e){t.aclDebug=e},expression:"aclDebug"}},[t._v("\n      Debug\n    ")])],1),t.aclDebug?n("div",[n("div",{staticClass:"mdl-grid"},[n("div",{staticClass:"mdl-cell mdl-cell--3-col mdl-cell mdl-cell--1-col-tablet mdl-cell--hide-phone"},[n("router-link",{staticClass:"mdl-button mdl-js-button mdl-button--fab mdl-button--colored",attrs:{to:{name:"persons"}}},[n("i",{staticClass:"material-icons"},[t._v("Persons")])]),n("router-link",{staticClass:"mdl-button mdl-js-button mdl-button--fab mdl-button--colored",attrs:{to:{name:"ohv"}}},[n("i",{staticClass:"material-icons"},[t._v("Old Home ")])])],1)]),n("a",{staticClass:"button is-small"},[t._v(t._s(t.isHere))]),n("a",{staticClass:"button is-small"},[t._v(t._s(t.isKnown))]),t._m(0),n("div",[t._v('\n      User status :: " '+t._s(t.getExpiry())+' "\n    ')]),n("a",{staticClass:"button is-small",on:{click:t.qtst}},[t._v("\n      Quick Tests\n    ")])]):n("div",{staticClass:"is-small"},[t._v("Version :: v"+t._s(t.theVersion))])])},xc=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"content"},[n("b",[t._v("Privileges:")]),t._v("\n      { { access } }\n    ")])}],Oc=console.log,kc={methods:{getExpiry:function(){try{var t=new Date(1e3*pr.a.decode(this.tkn).exp),e=new Date;return"Token expiry at ".concat(t.getDate()," ").concat(t.toTimeString(),"  vs  ").concat(e.getDate()," ").concat(e.toTimeString())}catch(t){return"Logged out"}},qtst:function(){Oc(" ------- Quick Test -------")}},computed:Object(A["a"])({aclDebug:{get:function(){return this.$store&&this.$store.state&&this.$store.state.isDebug||!1},set:function(){Oc(this),this.$store.dispatch("debugMode",this.$store.state.isDebug=!this.$store.state.isDebug)}},theVersion:function(){return window.version}},Object(R["c"])({tkn:"axsToken",isHere:"isActive",isKnown:"isAuthenticated",isError:"isError",msgError:"msgError"}))},Ec=kc,Pc=Object(S["a"])(Ec,yc,xc,!1,null,null,null);Pc.options.__file="Footer.vue";var Dc=Pc.exports,Ic={components:{PseudoAuthorizations:wc,NavBar:Hi,Authentication:yi,Footer:Dc}},Sc=Ic,jc=(n("63fe"),Object(S["a"])(Sc,vc,pc,!1,null,"0b628fa2",null));jc.options.__file="BaseLayer.vue";var Tc=jc.exports,Ac=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Rc=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("Email Subscriptions")])])}],Lc={},$c=Object(S["a"])(Lc,Ac,Rc,!1,null,null,null);$c.options.__file="UserEmailsSubscriptions.vue";var Nc=$c.exports,Uc=(console.log,[]),Mc=[{path:"emails",name:"emails",components:{nav_bar:Hi,default:Nc},props:{nav_bar:{setTab:"Admin"}}}],Fc=Uc.concat(mc).concat(Fe).concat(fn).concat(Ys).concat(ci).concat(dr).concat(Mc),Bc=[{path:"",name:"start",component:Tc,children:Fc}];s["default"].use(Zr["a"]);var Yc=console.log,qc=[],Vc=qc.concat(Bc),zc=function(t,e,n){if(window.lgr&&window.lgr.info("Guard: processServerSideChanges."),Sr&&Sr.state&&Sr.state.Auth&&Sr.state.Auth.accessToken.length>10){var s="".concat(Yt.server,"/api/metadata"),a={headers:{Accept:"application/json, text/plain, */*",Authorization:"JWT ".concat(Sr.state.Auth.accessToken)}};Hr.a.get(s,a).then(function(t){var e=t.data.metadata.checks,n=Sr.state.integrityCheck;Object.keys(e).forEach(function(t){e[t]!==n[t]&&(n[t]=e[t],Yc("will call -- store.dispatch('".concat(t,"/fetchAll')")),Sr.dispatch("".concat(t,"/fetchAll")),Sr.dispatch("updateIntegrityCheck",n))})}).catch(function(t){Yc("*** Error while fetching metadata :: >".concat(t.message,"<***")),Yc(t.message),t.message.endsWith("401")?Sr.dispatch("handle401",null,{root:!0}):Sr.dispatch("notifyUser",{txt:"Error fetching invoices :: ".concat(t.message),lvl:"is-danger"},{root:!0})})}return null},Qc=function(t,e,n){return window.lgr&&window.lgr.info("Guard: clearErrorNotification."),Sr.dispatch("clearNotifyUser"),null},Jc=[];Jc=Jc.concat(zc).concat(Qc).concat(Rt);var Kc=new Zr["a"]({routes:Vc});Kc.beforeEach(function(t,e,n){Yc("Router.beforeEach ==> Routing from '".concat(e.name,"' to '").concat(t.name,"'. Params '").concat(e.params,"').")),Yc(t),Yc(e),Yc("beforeEachTasks.length ".concat(Jc.length)),Yc(Jc);var s=null;Jc.forEach(function(a){null===s&&(s=a(t,e,n))}),null===s?n():n(s)});var Gc=Kc,Wc=console.log;s["default"].use(r["b"],Tt),s["default"].component("Can",r["a"]),s["default"].use(l.a,Yt.logger),s["default"].use(a["a"]),s["default"].use(o.a,{namespace:"vuesppwa-"}),s["default"].use(f.a,{defaultIconPack:"fa"}),s["default"].use(h.a),s["default"].use(m.a,{rules:{isPct:function(t){var e=t.value;return!C.a.inRange(e||0,0,101)&&"Value ".concat(e," is not in range 0 to 100.")}}}),s["default"].use(Fr),s["default"].use(_["a"]),s["default"].component("icon",u["a"]),s["default"].config.productionTip=Yt.productionTip;var Hc=Gr,Zc=navigator.languages[0]||"en",Xc=new a["a"]({locale:Zc.split("-")[0]||"en",fallbackLocale:"en",messages:Hc});Object(v["sync"])(Sr,Gc);var tl=new s["default"]({el:"#app",i18n:Xc,router:Gc,store:Sr,beforeCreate:function(){Wc("<<<<<<<<<< beforeCreate >>>>>>>>>>>"),window.lgr=this.$log,window.ls=this.$ls,window.ability=this.$ability,this.$store.dispatch("dbmgr/rememberDbMgr",{dbmgr:this.$pouch});var t=this.$route.query.tkn?this.$route.query.tkn:this.$ls.get(Yt.tokenName);Wc("<<<<<<<<<< keeping token >>>>>>>>>>>"),this.$store.dispatch("keepTkn",{token:t,ability:this.$ability}),this.$store.dispatch("person/fetchAll"),this.$store.dispatch("product/fetchAll")},created:function(){Wc("<<<<<<<<<< created >>>>>>>>>>>"),window.version=Yt.version,this.$log.info("microservice = ".concat(Yt.server)),Wc("\n      !!!!!!!!!?  returnToExitPoint  ?!!!!!!!!!");var t=window.localStorage,e=Yt.localStorageNameSpace+Yt.returnRouteName,n=JSON.parse(t.getItem(e));if(n){var s=n.value;s&&s.length>0&&!s.includes("home")&&(Wc("\n    !!!!!!!!!?  return to ".concat(s,"  !!!!!!!!!")),Wc(this.$router.push({name:s})),t.removeItem(e))}},render:function(t){return t(T)}}),el=e["default"]=tl},"5b44":function(t,e,n){"use strict";var s=n("bc29"),a=n.n(s);a.a},6101:function(t,e,n){"use strict";var s=n("44f7"),a=n.n(s);a.a},"63fe":function(t,e,n){"use strict";var s=n("f1c5"),a=n.n(s);a.a},"643d":function(t,e,n){"use strict";var s=n("c800"),a=n.n(s);a.a},6993:function(t,e,n){"use strict";var s=n("9627"),a=n.n(s);a.a},"6bb4":function(t,e,n){},"7b60":function(t,e,n){"use strict";var s=n("9ca1"),a=n.n(s);a.a},"7df5":function(t,e,n){"use strict";var s=n("6bb4"),a=n.n(s);a.a},"7e19":function(t,e,n){},"85cc":function(t,e,n){"use strict";var s=n("d71e"),a=n.n(s);a.a},"8e2b":function(t,e,n){"use strict";var s=n("7e19"),a=n.n(s);a.a},9627:function(t,e,n){},"997e":function(t,e,n){"use strict";var s=n("33ad"),a=n.n(s);a.a},"9be0":function(t,e,n){},"9ca1":function(t,e,n){},b7fe:function(t,e,n){},bc29:function(t,e,n){},bce2:function(t,e,n){},c21b:function(t,e,n){},c2e7:function(t,e,n){"use strict";var s=n("e514"),a=n.n(s);a.a},c742:function(t,e,n){},c800:function(t,e,n){},c9ea:function(t,e,n){},d224:function(t,e,n){"use strict";var s=n("c9ea"),a=n.n(s);a.a},d662:function(t,e,n){},d71e:function(t,e,n){},d8f1:function(t,e,n){},d968:function(t,e,n){},da9c:function(t,e,n){},e514:function(t,e,n){},ecdc:function(t,e,n){"use strict";var s=n("bce2"),a=n.n(s);a.a},ee67:function(t,e,n){},f1b4:function(t,e,n){"use strict";var s=n("0a31"),a=n.n(s);a.a},f1c5:function(t,e,n){},fa42:function(t,e,n){"use strict";var s=n("d968"),a=n.n(s);a.a}});
//# sourceMappingURL=app.d3d2f15d.js.map