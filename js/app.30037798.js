(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)o=r[d],a[o]&&m.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"003a":function(t,e,n){"use strict";var s=n("d662"),a=n.n(s);a.a},"034f":function(t,e,n){"use strict";var s=n("c21b"),a=n.n(s);a.a},"088d":function(t,e,n){},"0ccb":function(t,e,n){},"0e93":function(t,e,n){"use strict";var s=n("1b68"),a=n.n(s);a.a},1:function(t,e){},1435:function(t,e,n){"use strict";var s=n("410f"),a=n.n(s);a.a},"178d":function(t,e,n){"use strict";var s=n("da9c"),a=n.n(s);a.a},"1b68":function(t,e,n){},2:function(t,e){},2615:function(t,e,n){},3:function(t,e){},"366c":function(t,e,n){"use strict";var s=n("9be0"),a=n.n(s);a.a},"398e":function(t,e,n){},"3e91":function(t,e,n){},"3f47":function(t,e,n){"use strict";var s=n("5764"),a=n.n(s);a.a},4:function(t,e){},"410f":function(t,e,n){},"44f7":function(t,e,n){},"48bb":function(t,e,n){"use strict";var s=n("088d"),a=n.n(s);a.a},"4d3c":function(t,e,n){"use strict";var s=n("b7fe"),a=n.n(s);a.a},"52be":function(t,e,n){"use strict";var s=n("d8f1"),a=n.n(s);a.a},5582:function(t,e,n){"use strict";var s=n("ee67"),a=n.n(s);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("6762"),n("2fdb"),n("28a5"),n("cadf"),n("551c"),n("097d");var s=n("2b0e"),a=n("a925"),i=n("c16e"),o=n.n(i),r=n("2b52"),c=n("85ff"),l=n.n(c),u=(n("d06d"),n("0874")),d=n("f78c"),m=n.n(d),v=n("31bd"),p=n("8a03"),f=n.n(p),b=(n("5abe"),n("da28")),h=n.n(b),g=(n("4418"),n("55ab"),n("2ef0")),C=n.n(g),w=n("e508"),_=n("9483");Object(_["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mdl-layout mdl-js-layout mdl-layout--fixed-header",attrs:{id:"app"}},[n("router-view",{attrs:{name:"hdr"}}),n("main",{staticClass:"mdl-layout__content"},[n("div",{staticClass:"page-content"},[n("router-view")],1)])],1)},x=[],O=(n("ac6a"),console.log);function k(t){return Array.prototype.slice.call(document.querySelectorAll(t),0)}function D(){var t=k(".navbar-item.has-dropdown:not(.is-hoverable)"),e=k(".burger");function n(){t.forEach(function(t){t.classList.remove("is-active")})}t.length>0&&(t.forEach(function(t){t.addEventListener("click",function(e){e.stopPropagation(),t.classList.toggle("is-active")})}),document.addEventListener("click",function(t){n()})),document.addEventListener("keydown",function(t){var e=t||window.event;27===e.keyCode&&n()}),e.length>0?(O("--- We haz ".concat(e.length," burgers. ---")),O(e),e.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.target,n=document.getElementById(e);t.classList.toggle("is-active"),n.classList.toggle("is-active")})})):O("--- Yes! We haz no burgers ---")}function E(){k(".burger").forEach(function(t){return t.classList.remove("is-active")}),k(".burger-bar").forEach(function(t){return t.classList.remove("is-active")})}O("        ############# Responsive menu event handling installed #############");var P={name:"app",data:function(){return{}},created:function(){document.addEventListener("DOMContentLoaded",D)}},S=P,I=(n("034f"),n("2877")),j=Object(I["a"])(S,y,x,!1,null,null,null);j.options.__file="App.vue";var T=j.exports,A=n("be94"),N=n("2f62"),R=(n("456d"),n("f751"),n("aef6"),n("68d3")),$=n.n(R),L=n("d6e1"),U=n("3de5"),M=n.n(U),F=n("5d16"),B=(n("638c"),n("4833")),J=n.n(B),Q=(console.log,"https"),Y="yourdb.yourpublic.work",q="ib2018_101",V={server:"https://wt-a0a68818c7b34a465e865e888dc419c9-0.sandbox.auth0-extend.com/webtasksso",authPath:"/authentication/google/start",tokenTimeToLive:2e4,tokenName:"tkn",activityName:"actv",authName:"authd",returnRouteName:"retRoute",localStorageNameSpace:"vuesppwa-",productionTip:!1,testAuthUrlEnvVar:"AUTH_TEST_URL",logger:{logLevel:"info",stringifyArguments:!1,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0},version:"0.0.102",dbServerProtocol:Q,dbServerURI:Y,databaseName:q},z=Object(g["debounce"])(function(t,e,n,s){window.lgr.warn("deBouncedRefresh --\x3e Change to ".concat(t,": ").concat(e.action)),window.lgr.debug("".concat(JSON.stringify(e,null,2))),window.lgr.debug("".concat(JSON.stringify(n,null,2))),s(n)},50),G=void 0,K=V.databaseName,W=console.log;console.error;if(L["a"].plugin(M.a),L["a"].plugin(F["a"]),L["a"].plugin(J.a),!K)throw new Error("VuePouchDB Error → a main database name is expected !");var H=new L["a"](K),Z={spinner:null,start:function(t){if(dc.getters.isAuthenticated<1)dc.commit("dbmgr/setCategoriesLoading",!1);else{var e=dc.getters["dbmgr/getCategoriesLoading"];e||(Z.spinner=t.open({container:null}),window.lgr.debug("Started loader spinner"))}},kill:function(){var t=dc.getters["dbmgr/getCategoriesLoading"];window.lgr.debug("Checking loader spinner :: \n".concat(JSON.stringify(t,null,2))),t&&(Z.spinner.close(),window.lgr.debug("Killed loader spinner"))}},X={interceptors:{request:{interceptors:[],use:function(t){window.lgr.debug("\n        ??????????????????????????????\n          interceptor: ".concat(JSON.stringify(t,null,2),"\n        ??????????????????????????????")),G.interceptors.push(t)}}},get:function(t,e){return new Promise(function(n){window.lgr.debug("\n      endPoint: ".concat(JSON.stringify(t,null,2),"\n      parameters: ").concat(JSON.stringify(e,null,2),"\n    "));var s=dc.getters["dbmgr/getDbMgr"];s.liveFind({aggregate:!0,selector:e.selector}).on("update",function(t,s){z(e.category,t,s,n)}).on("ready",function(){W("Initial query complete.")}).on("cancelled",function(){W("LiveFind cancelled.")}).on("error",function(t){W("Oh no!",t)})})}};H.setSchema([{singular:"product",plural:"allProducts"},{singular:"aBottle",plural:"allBottles",relations:{ultimo:{belongsTo:"aPerson"}}},{singular:"aPerson",plural:"allPersons",relations:{bottles:{hasMany:"aBottle"}}},{singular:"Customer",plural:"Customers",documentType:"aPerson"},{singular:"Inventory",plural:"Inventories",documentType:"aPerson"},{singular:"Movement",plural:"Movements",relations:{inventory:{belongsTo:"Inventory"},customer:{belongsTo:"Customer"},bottles:{hasMany:"aBottle"}}}]);var tt="idxTypeName";H.createIndex({index:{fields:["data.type","data.nombre"],name:tt,ddoc:"indexes"}}).then(function(t){window.lgr.debug("New index ".concat(tt," :: ").concat(JSON.stringify(t,null,2)))}).catch(function(t){window.lgr.debug("Failed to create index ".concat(tt," :: ").concat(JSON.stringify(t,null,2)))});var et="idxId";H.createIndex({index:{fields:["id"],name:et,ddoc:"indexes"}}).then(function(t){window.lgr.debug("New index ".concat(et," :: ").concat(JSON.stringify(t,null,2)))}).catch(function(t){window.lgr.debug("Failed to create index ".concat(et," :: ").concat(JSON.stringify(t,null,2)))});var nt="idxTypeCode";H.createIndex({index:{fields:["data.type","data.codigo"],name:nt,ddoc:"indexes"}}).then(function(t){window.lgr.debug("New index ".concat(nt," :: ").concat(JSON.stringify(t,null,2)))}).catch(function(t){window.lgr.debug("Failed to create index ".concat(nt," :: ").concat(JSON.stringify(t,null,2)))});var st="idxTypeId";H.createIndex({index:{fields:["data.type","data.id"],name:st,ddoc:"indexes"}}).then(function(t){window.lgr.debug("New index ".concat(st," :: ").concat(JSON.stringify(t,null,2)))}).catch(function(t){window.lgr.debug("Failed to create index ".concat(st," :: ").concat(JSON.stringify(t,null,2)))});var at="idxTypeInventory";H.createIndex({index:{fields:["data.type","data.inventory"],name:at,ddoc:"indexes"}}).then(function(t){window.lgr.debug("New index ".concat(at," :: ").concat(JSON.stringify(t,null,2)))}).catch(function(t){window.lgr.debug("Failed to create index ".concat(at," :: ").concat(JSON.stringify(t,null,2)))});var it=function(t){var e=t;e.pouch=H,e.prototype.$pouch=H},ot={install:it,PouchDB:L["a"],LoaderProgress:Z},rt=(n("a481"),function(t){var e="_";return t.replace(/[Áá]/g,"a").replace(/[Éé]/g,"e").replace(/[Íí]/g,"i").replace(/[Ôó]/g,"o").replace(/[Úú]/g,"u").replace(/[ñÑ]/g,"n").replace(/[a-z][A-Z]/g,function(t){return"".concat(t[0]," ").concat(e," ").concat(t[1].toLowerCase())}).replace(/\W$/g,"").replace(/\W/g,"_").replace(/_{1,}/g,"_").replace(/[A-Z]/g,function(t){return t.toLowerCase()})}),ct=function(t){return t.map(function(t){return rt(t)})},lt=(console.log,{text:function(t){return t},integer:function(t){return t},title:function(t){return t},percent:function(t,e){var n="number"===typeof t?t:parseFloat(t);return{raw:parseFloat((n||0).toFixed(4)),str:"".concat((100*(n||0)).toFixed(e||1),"%")}},boolean:function(t){return{raw:"no"!==t,str:t}},JSON1:function(t,e){return e.JSON1.fn(e.JSON1.vl)},foreignKey1:function(t,e){var n=e.foreignKey1.fn(e.foreignKey1.vl);return n},usd:function(t){return{raw:(t||0).toFixed(2),str:"$ ".concat((t||0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))}},date:function(t){if(t.length<10)return t;var e=new Date(Date.parse(t)).toISOString().split("T")[0];return e}}),ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-table",{attrs:{data:t.isEmpty?[]:t.persons,columns:t.columns,striped:!0,paginated:"","per-page":20,"current-page":1,"opened-detailed":t.defaultOpenedDetails,detailed:"","detail-key":"codigo",focusable:""},on:{"details-open":function(e,n){return t.$toast.open("Expanded "+e.nombre)}},scopedSlots:t._u([{key:"header",fn:function(e){return[n("b-tooltip",{attrs:{position:"is-left",active:!!e.column.meta,label:e.column.meta,dashed:""}},[t._v("\n          "+t._s(e.column.label)+"\n        ")])]}},{key:"detail",fn:function(t){var e=t.row;return[n("person-detail",{attrs:{id:e.codigo}})]}}])},[n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered",staticStyle:{"font-size":"large"}},[n("icon",{attrs:{scale:"3",name:"thumbs-down"}}),n("p",[t._v("No results")])],1)])])],2),n("div",{staticClass:"block"},[t._v("\n        "+t._s(t.refresh)+"\n        "),n("button",{staticClass:"button is-small is-primary",on:{click:function(e){t.columnSelectorOpen=!t.columnSelectorOpen}}},[t._v("\n            Escoger Columnas\n        ")])]),n("b-collapse",{staticClass:"panel",attrs:{open:t.columnSelectorOpen},on:{"update:open":function(e){t.columnSelectorOpen=e}}},[n("ul",[n("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.columns,function(e,s){return n("div",{key:s,staticClass:"control"},[n("li",[n("b-checkbox",{model:{value:e.visible,callback:function(n){t.$set(e,"visible",n)},expression:"column.visible"}},[t._v("\n                "+t._s(e.meta)+"\n              ")])],1)])}))],1)])],1)},dt=[],mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("nav",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[n("span",{staticClass:"is-size-6"},[t._v("Registro #"+t._s(t.p(t.id).codigo))])]),n("b-tabs",{model:{value:t.activeSubTab,callback:function(e){t.activeSubTab=e},expression:"activeSubTab"}},[n("b-tab-item",[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-outlined"},[n("b-icon",{attrs:{icon:"eye"}})],1)]),n("person-record",{attrs:{id:t.id}})],2),n("b-tab-item",{attrs:{visible:t.canAlter()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-info is-outlined"},[n("b-icon",{attrs:{icon:"edit"}})],1)]),n("person-update",{attrs:{id:t.id},on:{closePersonUpdate:function(e){t.activeSubTab=0}}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-warning has-text-weight-bold is-outlined"},[n("b-icon",{attrs:{icon:"lock"}})],1)]),n("person-auth",{attrs:{pers:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-danger is-outlined"},[n("b-icon",{attrs:{icon:"trash"}})],1)]),t._v('\n        The record for "'+t._s(t.p(t.id).nombre)+'" will be marked for deletion, will no longer appear in the persons list, but will be kept for historical purposes.\n\n        '),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-info",on:{click:function(e){t.activeSubTab=0}}},[t._v("Go back")])])]),n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-danger"},[t._v("Yes, Delete")])])])])],2)],1)],1)])},vt=[],pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v(t._s(this.enums.DocTypeLookup[t.p(t.id).tipo_de_documento]))]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.p(t.id).ruc_cedula))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Nombre")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.p(t.id).nombre))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Telefono")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.p(t.id).telefono_1))])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Direccion")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.p(t.id).direccion))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Mail")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.p(t.id).email))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Rol")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.p(t.id).role))])])])]),t._v("\n  "+t._s(t.p(t.id).version)+"\n")])},ft=[],bt=(console.log,{props:["id"],computed:Object(A["a"])({},Object(N["c"])("person",{enums:"getEnums",p:"getPerson",pmap:"getPersonsMap"}))}),ht=bt,gt=(n("d78e"),Object(I["a"])(ht,pt,ft,!1,null,"f85fa3d6",null));gt.options.__file="Retrieve.vue";var Ct=gt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{attrs:{active:t.isConflictModalActive,"has-modal-card":""},on:{"update:active":function(e){t.isConflictModalActive=e}}},[n("conflict",t._b({on:{close:t.onCloseConflictDialog}},"conflict",t.formProps,!1))],1),t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.p(t.id)},on:{submit:t.submit}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Person")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Nombre")]),n("formulate-element",{attrs:{name:"nombre",type:"text",placeholder:"Nombre y Appellidos","element-classes":"nameTextbox"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Telefono 1ra")]),n("formulate-element",{attrs:{name:"telefono_1",type:"tel",placeholder:"# de telefono"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Telefono 2do")]),n("formulate-element",{attrs:{name:"telefono_2",type:"tel",placeholder:"# de telefono alterno"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Mobile")]),n("formulate-element",{attrs:{name:"mobile",type:"tel",placeholder:"# de telefono mobile"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Tipo de Identificación")]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:"tipo_de_documento",type:"select",initial:"_07",options:t.typesId}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Identificación")]),n("formulate-element",{attrs:{name:"ruc_cedula",type:"text",placeholder:"Codigo de identificación","element-classes":"identTextbox"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Dirección")]),n("formulate-element",{attrs:{name:"direccion",type:"text",placeholder:"Dirección","element-classes":"addrTextbox"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Distribuidor?")]),n("formulate-element",{attrs:{type:"checkbox",label:"  ",name:"distribuidor"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Correos Electronicos")]),n("formulate-element",{attrs:{name:"email",type:"text",placeholder:"Correos Electronicos","element-classes":"emailTextbox",validation:"email"}})],1)]),n("div",{staticClass:"column"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Version")]),n("formulate-element",{attrs:{name:"version",type:"text",placeholder:"-- version --","element-classes":"emailTextbox"}})],1)]),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Grabar",elementClasses:"button is-info"}})],1)])]),t._v("\n  "+t._s(t.p(t.id).version)+"\n  ")],1)],1)},_t=[],yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{attrs:{action:""}},[n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[t._m(0),n("section",{staticClass:"modal-card-body"},[n("p",[t._v('Los datos de "'+t._s(t.record)+'" fueron alterado por otro usuario. Ud. puede:')]),n("ul",[n("li",[n("icon",{attrs:{name:"caret-right"}}),t._v("   o escoger los valores corectos")],1),n("li",[n("icon",{attrs:{name:"caret-right"}}),t._v("   o cancelar y volver a ingresar los cambios")],1)]),n("hr"),t._m(1),t._l(t.pyld,function(e){return n("div",[n("div",{staticClass:"control"},[n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column"},[n("p",{staticClass:"bd-notification is-size-7-mobile",style:t.styleObject[e.key]},[t._v("\n                  "+t._s(e.name)+"\n                ")])]),n("div",{staticClass:"column"},[n("label",{staticClass:"radio"},[n("input",{staticClass:"is-size-7-mobile",attrs:{type:"radio",name:e.name},on:{change:function(n){t.picked({r:e.key,c:e.v.l})}}}),n("span",{staticClass:"is-size-7-mobile"},[t._v(" "+t._s(e.v.l))])])]),n("div",{staticClass:"column"},[n("label",{staticClass:"radio"},[n("input",{staticClass:"is-size-7-mobile",attrs:{type:"radio",name:e.name},on:{change:function(n){t.picked({r:e.key,c:e.v.r})}}}),n("span",{staticClass:"is-size-7-mobile"},[t._v(" "+t._s(e.v.r))])])])])])])})],2),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button is-primary",attrs:{type:"button"},on:{click:function(e){t.submit()}}},[t._v("\n          Grabar\n        ")])])])])},xt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t._v("Conflicto de versions")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column"},[n("p",{staticClass:"bd-notification is-size-7-mobile has-text-info"})]),n("div",{staticClass:"column"},[n("p",{staticClass:"bd-notification is-size-7-mobile has-text-info"},[t._v("Local")])]),n("div",{staticClass:"column"},[n("p",{staticClass:"bd-notification is-size-7-mobile has-text-info"},[t._v("Remote")])])])}],Ot=console.log,kt="blue",Dt="red",Et={props:["pyld","record"],data:function(){return{picks:{},fontColor:{},styleObject:{}}},beforeMount:function(){var t=this;this.pyld.forEach(function(e){t.styleObject[e.key]={color:Dt}})},methods:{picked:function(t){this.picks[t.r]=t.c;var e={};e[t.r]={color:kt},this.styleObject=Object.assign({},this.styleObject,e)},submit:function(){var t=this,e=this.pyld.filter(function(e){return!Object.keys(t.picks).includes(e.key)});e.length>0||(Ot("\n        ==================== ".concat(JSON.stringify(e,null,2))),this.$emit("close",this.picks))}}},Pt=Et,St=Object(I["a"])(Pt,yt,xt,!1,null,null,null);St.options.__file="Conflict.vue";var It=St.exports,jt=(n("f5766"),n("6b54"),n("5df3"),n("7f7f"),n("bc3a")),Tt=n.n(jt),At=console.log,Nt=(console.error,{replicateOut:function(t,e){var n=e.filterText,s=e.dbMaster,a=e.dbName,i=e.user,o={live:!0,retry:!0,filter:function(t){return t._id.substring(0,n.length)===n}};t.replicate.to(s,o).on("change",function(t){window.lgr.info("".concat(a,"/").concat(n," **********  OUTGOING REPLICATION DELTA ********* "));var e=t.change.docs.filter(function(t){return!t.data||"person"!==t.data.type&&"bottle"!==t.data.type});e.forEach(function(t){window.lgr.debug("DOC :: ".concat(JSON.stringify(t,null,2)))})}).on("paused",function(){window.lgr.info("".concat(a,"/").concat(n," **********  OUTGOING REPLICATION ON HOLD ********* ").concat(i.name)),t.allDocs({include_docs:!0,attachments:!0}).then(function(t){window.lgr.debug("allDocs fetch result ".concat(JSON.stringify(t,null,2)))}).catch(function(t){window.lgr.error("allDocs fetch failure ".concat(t))})}).on("active",function(){window.lgr.info("".concat(a,"/").concat(n," **********  OUTGOING REPLICATION RESUMED *********"))}).on("denied",function(t){window.lgr.info("".concat(a,"/").concat(n," **********  OUTGOING REPLICATION DENIED ********* ").concat(t))}).on("error",function(t){return window.lgr.error("".concat(a,"/").concat(n," OUTGOING REPLICATION FAILURE ************ ").concat(t))})},replicateIn:function(){At("\n\n\n\n\n      ReplicateIn not implemented\n\n\n\n\n      ")}}),Rt=V.dbServerProtocol,$t=V.dbServerURI,Lt=V.databaseName,Ut=console.log;console.error;if(Ut("PouchDb configuration...\n  ".concat(JSON.stringify(V,null,2),"\n")),!Rt)throw new Error("VuePouchDB Error → remote database server protocol is required!");if(!$t)throw new Error("VuePouchDB Error → remote database server URI is required!");if(!Lt)throw new Error("VuePouchDB Error → a main database name is required!");var Mt=function(t){window.lgr.debug("Getting category load levels");var e=t.state.categoryCounts,n=Object.keys(e),s=!0;if(n.forEach(function(t){window.lgr.debug("Category ".concat(t," ").concat(e[t].total," ").concat(e[t].loaded)),e[t].total>e[t].loaded&&(s=!1)}),window.lgr.debug("Category load levels available? - ".concat(s)),s)return window.lgr.debug("Category counts : ".concat(JSON.stringify(t.state.categoryCounts,null,2),"}")),void t.commit("setCategoriesLoading",!0);window.lgr.debug("Getting category loads state"),t.commit("setCategoriesLoading",!1);var a=t.getters.getDbMgr,i={};a.allDocs({include_docs:!0}).then(function(e){e.rows.forEach(function(t){if(t.doc.data){var e=t.doc.data;n.includes(e.type)&&(i[e.type]=i[e.type]?i[e.type]+=1:1,window.lgr.debug("Counts values :: ".concat(JSON.stringify(i,null,2))))}}),window.lgr.debug("Counts values :: ".concat(JSON.stringify(i,null,2))),Object.keys(i).forEach(function(e){window.lgr.debug("Count ".concat(e," ").concat(i[e]," ")),t.commit("setCategoryLoadedCount",{key:e,value:i[e]})});var s=t.state.categoryCounts,a=Object.keys(s).filter(function(t){return s[t].total<1||s[t].total>s[t].loaded});a.length<1&&t.commit("setCategoriesLoading",!0),window.lgr.debug("Category counts : ".concat(JSON.stringify(t.state.categoryCounts,null,2),"}"))}).catch(function(t){window.lgr.error("".concat(t,"\n      QQQQQQQQQQQQQQQQQQQQ got nothing QQQQQQQQQQQQQQQQQQQQ"))})},Ft=function(t){if(window.lgr.debug("Getting category counts."),window.lgr.debug("Authentication status ".concat(JSON.stringify(t.rootState.Auth,null,2))),!(t.rootGetters.isAuthenticated<1)){var e=t.state,n=e.user,s=e.srvr,a=e.categoryCounts,i=Object.keys(a),o=!0;if(i.forEach(function(t){window.lgr.debug("Category ".concat(t," ").concat(a[t].total," ").concat(a[t].loaded)),a[t].total<1&&(o=!1)}),window.lgr.debug("Category totals available? - ".concat(o)),o)Mt(t);else{t.commit("setCategoriesLoading",!1);var r=s.databaseName,c="".concat(s.dbServerProtocol,"://").concat(s.dbServerURI,"/"),l="".concat(r,"/_design/visible/_view");window.lgr.info("Getting category totals :: ".concat(n.name," ").concat(c).concat(l));var u=[];i.forEach(function(t){window.lgr.debug("\n      Getting category count ".concat(c).concat(l,"/count_").concat(t,"\n      ")),u.push(Tt.a.get("".concat(c).concat(l,"/count_").concat(t),{auth:{username:n.name,password:n.password},method:"get"}).then(function(e){if(window.lgr.debug("\n          Response for category count ".concat(c).concat(l,"/count_").concat(t," ::\n            ").concat(JSON.stringify(e,null,2),"\n          ")),200===e.status){e.data||window.lgr.error("\n              Should have data element ".concat(JSON.stringify(e,null,2),"\n              "));var n=e.data.rows[0].value;return window.lgr.debug("Got '".concat(t,"' category count ").concat(JSON.stringify(n,null,2))),{key:t,value:n}}return window.lgr.error("* ERROR COUNTING PRODUCTS * ".concat(JSON.stringify(e,null,2),"}")),null}).catch(function(t){window.lgr.error("Axios connexion error :: ".concat(JSON.stringify(t,null,2),"}"))}))}),Promise.all(u).then(function(e){window.lgr.debug("CATEGORIES: ".concat(JSON.stringify(e,null,2),"}"));var n={};e.filter(function(t){return t}).forEach(function(t){n[t.key]={total:t.value,loaded:0}}),window.lgr.debug("Items per category : ".concat(JSON.stringify(n,null,2),"}")),t.commit("setCategoryCounts",n),window.lgr.debug("Category counts : ".concat(JSON.stringify(t.state.categoryCounts,null,2),"}")),Mt(t)})}}},Bt={user:{name:null,password:null},dbMgr:"asdf",categoryCounts:{product:{total:0,loaded:0},person:{total:0,loaded:0},bottle:{total:0,loaded:0},invoice:{total:0,loaded:0}},categoriesLoading:!1,srvr:{dbServerProtocol:Rt,dbServerURI:$t,databaseName:Lt}},Jt={getUserCredentials:function(t){return t.user},getDbMgr:function(t){return t.dbMgr},getCategoriesLoading:function(t){return t.categoriesLoading},getCategoryCounts:function(t){return t.categoryCounts},getCategoryCounters:function(t){return t.categoryCounters}},Qt={setUserCredentials:function(t,e){window.lgr.debug('Database (mutation) :: recording new user credentials "'.concat(e.name,'"')),t.user=e},setDbMgr:function(t,e){window.lgr.debug("Database (mutation) :: recording database manager "),t.dbMgr=e},setCategoriesLoading:function(t,e){window.lgr.warn('Database (mutation) :: setting categoriesLoading "'.concat(JSON.stringify(e,null,2),'"')),t.categoriesLoading=e},setCategoryCounts:function(t,e){window.lgr.debug('Database (mutation) :: recording categoryCounts "'.concat(JSON.stringify(e,null,2),'"')),t.categoryCounts=e},setCategoryLoadedCount:function(t,e){window.lgr.debug('Database (mutation) :: recording categoryCount "'.concat(JSON.stringify(e,null,2),'"')),t.categoryCounts[e.key].loaded=e.value,window.lgr.debug('Database (mutation) :: recorded "'.concat(JSON.stringify(t.categoryCounts,null,2),'"'))}},Yt={setUserCredentials:function(t,e){if(e.payload.couchdb){var n=e.payload.couchdb;window.lgr.debug("Database (action) :: recording new user credentials > ".concat(JSON.stringify(e.payload,null,2))),window.lgr.debug(n),t.commit("setUserCredentials",n)}},connectToRemoteService:function(t,e){window.lgr.debug("\n\n      Connext to remote service >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n    "),window.lgr.debug(e),window.lgr.debug(t);var n=t.state,s=n.user,a=n.srvr,i=n.dbMgr;i.setMaxListeners(1/0);var o=a.databaseName,r="".concat(a.dbServerProtocol,"://").concat(s.name,":").concat(s.password,"@").concat(a.dbServerURI,"/").concat(a.databaseName),c=new L["a"](r,{skip_setup:!0}),l={},u=[{type:"view",name:"visible/compact_invoice"},{type:"view",name:"visible/compact_bottle"},{type:"view",name:"visible/compact_person"},{type:"view",name:"visible/compact_product"}];u.forEach(function(e){var n={live:!0,retry:!0};n[e.type]=e.name,i.replicate.from(c,n).on("change",function(n){window.lgr.info("".concat(o,"/").concat(e.name," ***  INCOMING REPLICATION DELTA **** read: ").concat(n.docs_read," wrote: ").concat(n.docs_written)),"ddocs/this_ddoc"===e.name&&window.lgr.debug(n),window.lgr.info("Replication from: ".concat(n.docs.length," records.")),n.docs.forEach(function(t){l[t.data.type]||(l[t.data.type]=0),l[t.data.type]+=1}),Object.keys(l).forEach(function(e){var n=l[e];window.lgr.debug("Count ".concat(e," ").concat(n," ")),t.commit("setCategoryLoadedCount",{key:e,value:n});var s="".concat(e,"/setDirtyData");try{t.dispatch(s,n,{root:!0}),window.lgr.debug("Dispatched ".concat(s," with ").concat(n," for ").concat(e,"."))}catch(t){window.lgr.warn("Action ".concat(s," not found."))}}),window.lgr.debug("'from' counts by type : ".concat(JSON.stringify(l,null,2)))}).on("paused",function(){window.lgr.info("".concat(o,"/").concat(e.name," **********  INCOMING REPLICATION ON HOLD *********")),t.dispatch("collectCategoryCounts")}).on("active",function(){window.lgr.info("".concat(o,"/").concat(e.name," **********  INCOMING REPLICATION RESUMED *********"))}).on("denied",function(t){window.lgr.info("".concat(o,"/").concat(e.name," **********  INCOMING REPLICATION DENIED ********* ").concat(t))}).on("error",function(t){return window.lgr.error("".concat(o,"/").concat(e.name," INCOMING REPLICATION FAILURE ************ ").concat(t))})});var d=["Request"];d.forEach(function(t){Ut(" filterName ".concat(t));var e={filterText:t,dbMaster:c,dbName:o,user:s};Nt.replicateOut(i,e)})},collectCategoryCounts:function(t){Ft(t)},rememberDbMgr:function(t,e){window.lgr.debug("\n\n      Remember DB manager >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n      ".concat(JSON.stringify(e,null,2),"\n    ")),t.commit("setDbMgr",e.dbmgr)}},qt=function(t,e){return(t+e).substring(e.length)},Vt=function(){var t=new Date,e="";e+=t.getFullYear(),e+=qt("00",(1+t.getMonth()).toString()),e+=qt("00",t.getDate().toString()),e+=qt("00",t.getHours().toString()),e+=qt("00",t.getMinutes().toString()),e+=qt("00",t.getSeconds().toString());var n=parseInt("".concat(e),10);return n};function zt(){var t=Vt();return zt.old=t>zt.old?t:zt.old+=1,zt.old}function Gt(){return zt()}zt.old=0;var Kt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return"".concat(Gt()).concat(e).concat(t.toString().padStart(5,"0"))},Wt={namespaced:!0,state:Bt,getters:Jt,mutations:Qt,actions:Yt},Ht=console.log,Zt={props:["id"],data:function(){return{isConflictModalActive:!1,formProps:{},formUID:0,values:!1}},components:{conflict:It},mounted:function(){this.rememberOriginalRecord(Object(g["cloneDeep"])(this.p(this.id)))},computed:Object(A["a"])({},Object(N["c"])("person",{enums:"getEnums",p:"getPerson",o:"getOriginalRecord",columns:"getColumns"}),Object(N["d"])("person",{isUpdating:"isUpdating"}),{formUid:function(){return this.formUID="pers_".concat(this.p(this.id).codigo),this.formUID},typesId:function(){var t=[],e=this.enums.DocTypeLookup||{};return Object.keys(e).forEach(function(n){var s=e[n];t.push({name:s,value:n,id:n,label:s})}),t}}),methods:Object(A["a"])({},Object(N["b"])("person",{update:"update",rememberOriginalRecord:"rememberOriginalRecord"}),{onCloseConflictDialog:function(t){this.isConflictModalActive=!1;var e=Object.assign({},this.$store.state.values[this.formUID],t);this.$store.state.values[this.formUID]=e,this.rememberOriginalRecord(Object(g["cloneDeep"])(this.p(this.id)))},submit:function(t){var e=this,n=this.p(this.id),s=this.o,a=t,i={};this.columns.forEach(function(t){i[t.field]=t.meta});var o=Object.keys(a).filter(function(t){return"version"!==t&&(!!n[t]&&(n[t]!==a[t]&&n[t]!==s[t]))});Ht("affectedKeys"),Ht(o);var r=o.map(function(t){return{key:t,name:i[t],v:{l:a[t],r:n[t]}}});if(Ht(r),r.length>0)this.formProps={pyld:r,record:this.p(this.id).nombre},this.isConflictModalActive=!0;else{var c={};Object.keys(i).forEach(function(t){c[t]="undefined"===typeof a[t]?s[t]:a[t]}),c.version=a.version,c.type="Request",c.handler="PersonUpdate",c.status="new",c.id=this.id,c._id=this.$pouch.rel.makeDocID({type:"aPerson",id:this.id}),c.distribuidor=c.distribuidor?"si":"no",c.role="si"===c.distribuidor?"Distribuidor":"Cliente";var l="".concat(c.type,"_2_").concat(Kt(this.id));window.lgr.warn("new ID : ".concat(l,"\n          "));var u={_id:l,data:c};Ht(u),this.$pouch.get(l).then(function(t){window.lgr.debug("---------- Got the record --------"),u._rev=t._rev}).catch(function(){window.lgr.debug("---------- Did not get the record --------")}).then(function(){window.lgr.debug("---------- Do the other thing --------"),e.$pouch.put(u).then(function(){window.lgr.debug("Saved Person Update -- ".concat(u))})}),this.$emit("closePersonUpdate")}}})},Xt=Zt,te=(n("be54"),Object(I["a"])(Xt,wt,_t,!1,null,"e249a5ce",null));te.options.__file="Update.vue";var ee=te.exports,ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.permissionsField},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",[t._v(t._s(t.pers.nombre))]),n("h5",[t._v("Sus Permisos por Recurso")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[t._l(t.resources,function(e){return n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v(t._s(e))]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:e,type:"select",initial:"0",options:t.levels}})],1)])}),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],2)])],1)],1)},se=[],ae=(n("1c4c"),n("4f7f"),n("3835")),ie=(n("ffc1"),n("4b58")),oe="Person",re="person",ce="persons",le="persons/list",ue={};ue[oe]=[re,ce,le];var de=ue,me=Object.assign({},de),ve="Product",pe="product",fe="products",be="products/list",he={};he[ve]=[pe,fe,be];var ge=he,Ce="Invoice",we="invoices/list",_e="invoices",ye="invoice",xe={};xe[Ce]=[_e,ye,we];var Oe=xe,ke=Object.assign({},ge,Oe),De="Example",Ee="protected",Pe="classified",Se={};Se[De]=[Ee,Pe];var Ie=Se,je=Object.assign({},Ie),Te="Bottle",Ae="bottles/test",Ne="bottles/list",Re="bottles",$e="bottle",Le={};Le[Te]=[Re,$e,Ne,Ae];for(var Ue=Le,Me=Object.assign({},Ue),Fe=Object.assign({},me,ke,je,Me),Be=(console.log,Object.assign({},Fe)),Je=(console.log,["reassign","delete","edit","view","none"]),Qe=function(t){var e=t.map(function(t){return t.toLowerCase().split(" ").join("_")}),n=0,s={};while(n<Je.length-1)s[Je[n]]=Array.from(e),n+=1,e.pop();return s},Ye=["Do Nothing","Only View","Comment","Alter","Assign"],qe={},Ve=[],ze=0;ze<Ye.length;ze+=1){var Ge=Ye[ze],Ke=Ge.toUpperCase().split(" ").join("_");qe[Ke]=ze,Ve.push({name:Ge,value:ze,id:ze,label:Ge})}qe.alvls=Ye,qe.options=Ve,qe.olvls=Array.from(Ye,function(t,e){return{id:e,axs:t}}),qe.aliases=Qe(Ye),qe.idxAliases=Je.reverse();var We=qe,He=console.log;We.idxAliases.forEach(function(t){"none"!==t&&ie["a"].addAlias(t,We.aliases[t])});var Ze=ie["b"].define(function(t){Object.entries(Be).forEach(function(e){var n=Object(ae["a"])(e,2),s=(n[0],n[1]);t("do_nothing",s)})}),Xe=function(t,e,n){return window.ability&&window.ability.can?"home"===t.name?null:!!window.ability.can("only_view",t.name)&&null:null},tn=[Xe],en={user:{permissions:{Example:We.VIEW_ONLY,Invoice:We.VIEW_ONLY,Person:We.OWN,Product:We.VIEW_ONLY,Bottle:We.VIEW_ONLY}}},nn={getUserPermissions:function(t){return t.user.permissions}},sn={changePermission:function(t,e){window.lgr.debug('Access Control (mutation) :: changePermissions of "'.concat(e.resource,'"')),t.user.permissions[e.resource]=e.setting}},an={resetPermissions:function(t,e){var n=e.payload,s=e.ability,a=JSON.parse(n.permissions.replace(/'/g,'"'));Object.keys(a).forEach(function(e){var n={resource:e,setting:a[e]};He(n),t.dispatch("changePermissions",{change:n,ability:s})}),He("\n\n      Permissions reset >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n    ")},changePermissions:function(t,e){var n=e.change,s=e.ability;t.commit("changePermission",n);var a=[];s.rules.map(function(t){var e=!1;return t.subject.forEach(function(t){e||(e=Be[n.resource].includes(t))}),e?a.push({actions:We.idxAliases[n.setting],subject:Be[n.resource]}):a.push(t),t}),s.update(a)}},on={namespaced:!0,state:en,getters:nn,mutations:sn,actions:an},rn=new Set;Object.keys(Be).forEach(function(t){rn.add(t)});var cn=Array.from(rn),ln=console.log,un={props:["pers"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(N["c"])("person",{enums:"getEnums"}),{permissionsField:function(){return ln("xxxxxxxxxxxxxxxxxxx this.pers xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"),ln(this.pers),ln(this.pers.permissions),this.pers.permissions?this.pers.permissions:{}},formUid:function(){return"pers_".concat(this.pers.codigo)},levels:function(){return We.options},resources:function(){return ln("Resources"),ln(cn),cn}}),methods:Object(A["a"])({},Object(N["b"])("person",{saveForm:"saveForm"}))},dn=un,mn=(n("178d"),Object(I["a"])(dn,ne,se,!1,null,null,null));mn.options.__file="Permissions.vue";var vn=mn.exports,pn=(console.log,{name:"RUDcards",props:["id"],data:function(){return{activeSubTab:0}},components:{"person-record":Ct,"person-update":ee,"person-auth":vn},computed:Object(A["a"])({},Object(N["c"])("person",{p:"getPerson"})),methods:{canAlter:function(){return this.$can("alter","person")},canAssign:function(){return this.$can("assign","person")}}}),fn=pn,bn=Object(I["a"])(fn,mt,vt,!1,null,null,null);bn.options.__file="RUDcards.vue";var hn=bn.exports,gn={name:"PersonList",mounted:function(){window.lgr.debug("!!!!!!!!!!!!!!!! mounted person list !!!!!!!!!!!!!!!!!!")},beforeMount:function(){window.lgr.debug("\n * * Ready to fetch persons * * \n"),this.isLoadingList||this.persons.length>0||this.onFetchPersons()},props:{tst:{val:"passed in with props"}},data:function(){var t=[];return{anObj:{tst:"passed in as data"},isFullPage:!1,isEmpty:!1,defaultOpenedDetails:[123],selected:t[1],columnSelectorOpen:!1}},components:{"person-detail":hn},computed:Object(A["a"])({},Object(N["c"])("person",{persons:"list",prod:"getPerson",columns:"getColumns",getDirtyData:"getDirtyData"}),Object(N["c"])({loggedIn:"isAuthenticated"}),Object(N["d"])("person",{isLoadingList:"isFetchingList",isUpdating:"isUpdating",isCreating:"isCreating"}),{refresh:function(){return this.getDirtyData>0&&(window.lgr.error("* * Person list dirty? (".concat(this.getDirtyData,") * *")),this.fetchPersons()),this.getDirtyData>0?"|":"_"}}),methods:Object(A["a"])({},Object(N["b"])(["handle401","notifyUser"]),Object(N["b"])("person",{fetchPersons:"fetchAll",setColumns:"setColumns",setDirtyData:"setDirtyData"}),{onFetchPersons:function(){window.lgr.debug(" * * Try to fetch persons * *"),this.fetchPersons()}})},Cn=gn,wn=Object(I["a"])(Cn,ut,dt,!1,null,null,null);wn.options.__file="List.vue";var _n=wn.exports,yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("b-tab-item",{attrs:{label:"Add Person"}},[n("Create")],1),n("b-tab-item",{attrs:{visible:t.canEdit(),label:"Persons"}},[n("router-view",{attrs:{name:"personsList"}})],1)],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1)],1)},xn=[],On=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isCreating,canCancel:!0},on:{"update:active":function(e){t.isCreating=e}}}),n("formulate",{staticClass:"my-form",attrs:{name:"createPerson"},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Person")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Nombre")]),n("formulate-element",{attrs:{name:"nombre",type:"text",initial:"Joe Bloggs",placeholder:"Nombre y Appellidos","element-classes":"nameTextbox"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Tipo de Identificación")]),n("formulate-element",{staticClass:"select is-small",attrs:{name:"tipo",type:"select",initial:"_05",options:t.typesId}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Identificación")]),n("formulate-element",{attrs:{name:"ruc_cedula",type:"text",initial:"1713931416",placeholder:"Codigo de identificación","element-classes":"identTextbox"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Correos Electronicos")]),n("formulate-element",{attrs:{name:"email",type:"text",initial:"a@b.cd",placeholder:"Correos Electronicos","element-classes":"emailTextbox"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Distribuidor?")]),n("formulate-element",{attrs:{type:"checkbox",label:"  ",name:"distribuidor"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Telefono")]),n("formulate-element",{attrs:{name:"telefono",type:"tel",initial:"4444719",placeholder:"# de telefono"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Dirección")]),n("formulate-element",{attrs:{name:"direccion",initial:"#1 1st St., Here, There, Everywhere",type:"text",placeholder:"Dirección","element-classes":"addrTextbox"}})],1)]),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])])],1)],1)},kn=[],Dn=console.log,En={props:["pers"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(N["c"])("person",{enums:"getEnums"}),Object(N["d"])("person",{isCreating:"isCreating"}),{typesId:function(){Dn("CC %%%%%%%%%%%%%%%%%%");var t=[],e=this.enums.DocTypeLookup;return e?Object.keys(e).forEach(function(n){var s=e[n];t.push({name:s,value:n,id:n,label:s})}):t.push({name:"aa",value:"AA",id:"AA-",label:"aa-"}),Dn(t),t}}),methods:Object(A["a"])({},Object(N["b"])("person",{saveForm:"saveForm"}))},Pn=En,Sn=(n("0e93"),Object(I["a"])(Pn,On,kn,!1,null,null,null));Sn.options.__file="Create.vue";var In=Sn.exports,jn=console.log,Tn={name:"Person",components:{Create:In},computed:Object(A["a"])({},Object(N["c"])("person",{currentTab:"getCurrentTab"}),{activeTab:{get:function(){return dc.state.person.currentTab},set:function(t){return dc.dispatch("person/setCurrentTab",t)}}}),methods:Object(A["a"])({qtst:function(){jn(" ------- Quick Test -------"),this.onCreatePerson()},canEdit:function(){return this.$can("comment","persons/list")},onCreatePerson:function(){this.createPerson({data:{store:"person",mode:"post",data:{ruc_cedula:"0708217086001",nombre:"Jesu Cristo",direccion:"#1 Pearly Gates",telefono:"099-444-4719",distribuidor:"si",retencion:"si",tipo:"_04",scabetti:"333",tipo_de_documento:"RUC"}}})}},Object(N["b"])("person",{createPerson:"create",setTab:"setCurrentTab"}))},An=Tn,Nn=Object(I["a"])(An,yn,xn,!1,null,null,null);Nn.options.__file="Layout.vue";var Rn=Nn.exports,$n=[{meta:"Codigo",label:"ID",field:"codigo",centered:!1,width:5,visible:!0,numeric:!0},{meta:"RUC/Cedula",label:"RUC",field:"ruc_cedula",centered:!1,width:14,visible:!0,numeric:!1},{meta:"Nombre",label:"NBR",field:"nombre",centered:!1,width:70,visible:!0,numeric:!1},{meta:"Dirección",label:"DIR",field:"direccion",centered:!1,width:"",visible:!1,numeric:!1},{meta:"Telefono",label:"TLF",field:"telefono",centered:!1,width:18,visible:!0,numeric:!1},{meta:"Distribuidor?",label:"DST",field:"distribuidor",centered:!0,width:3,visible:!1,numeric:!1},{meta:"Retencion?",label:"RET",field:"retencion",centered:!0,width:3,visible:!1,numeric:!1},{meta:"Tipo",label:"TIP",field:"tipo",centered:!0,width:3,visible:!1,numeric:!0},{meta:"Tipo de Documento",label:"DOC",field:"tipo_de_documento",centered:!1,width:27,visible:!1,numeric:!1}],Ln=console.log,Un=[{name:le,path:"list",components:{personsList:_n}}],Mn=[].concat(Un),Fn=[{name:ce,path:"persons",component:Rn,children:Mn}],Bn="codigo",Jn="person",Qn=$()({resource:Jn,idAttribute:Bn,client:X,state:{columns:$n,originalRecord:{},enums:{},personsMap:{},paginator:{s:1,c:100},dirtyData:-1},actions:{fetchAll:function(t){var e=t.dispatch;window.lgr.debug("<<<<<< fetchAll persons >>>>>>");var n={customUrlFnArgs:Qn.state.paginator,config:{category:"Persons",selector:{$and:[{_id:{$gte:"aPerson_1_0000000000000000"}},{_id:{$lt:"aPerson_3_0000000000000000"}}]}}};e("fetchList",n).then(function(t){window.lgr.info(" * * Fetched persons * *"),window.lgr.debug("             >>================================================<<\n            persons response: ".concat(JSON.stringify(t,null,2),"\n          ")),e("setColumns",t.columns),Qn.state.dirtyData=-1}).catch(function(t){window.lgr.error("*** Error while fetching persons :: ".concat(t.message," ***")),t.message.endsWith("401")?e("handle401",null,{root:!0}):e("notifyUser",{txt:"Error while fetching persons :: ".concat(t.message),lvl:"is-danger"},{root:!0})})},setColumns:function(t,e){var n=t.commit;window.lgr.debug("Person.index --\x3e actions.setColumns ".concat(JSON.stringify(e,null,2))),n("tableColumns",e)},setEnums:function(t,e){var n=t.commit;window.lgr.debug("Person.index --\x3e actions.setEnums"),n("enums",e)},setMap:function(t,e){var n=t.commit;window.lgr.debug("Person.index --\x3e actions.setMap"),n("setPersonsMap",e)},setDirtyData:function(t,e){var n=t.commit;window.lgr.debug("Person.index --\x3e actions.setDirtyData"),n("dirtyData",e)},rememberOriginalRecord:function(t,e){var n=t.commit;window.lgr.debug("Person.index --\x3e actions.rememberOriginalRecord"),n("originalRecord",e)},update:function(t,e){var n=t.commit;window.lgr.info("Person.index --\x3e actions.update"),n("update",e)}},getters:{getColumns:function(t){return t.columns},getPersons:function(t){return t.list},getEnums:function(t){return t.enums},getDirtyData:function(t){return t.dirtyData},getPersonsMap:function(t){return t.personsMap},getPaginator:function(t){return t.paginator},getPerson:function(t){return function(e){return t.entities[e]}},getOriginalRecord:function(t){return t.originalRecord}},mutations:{persons:function(t,e){t.entities[e.id]=e.data},enums:function(t,e){t.enums=e},dirtyData:function(t,e){t.dirtyData=e},setPersonsMap:function(t,e){t.personsMap=e},tableColumns:function(t,e){window.lgr.debug("Person.index --\x3e mutation.tableColumns"),t.columns=e},originalRecord:function(t,e){window.lgr.warn("Person.index --\x3e mutations.originalRecord\n        ".concat(JSON.stringify(e,null,2),"\n      ")),t.originalRecord=e},update:function(t,e){window.lgr.warn("Person.index --\x3e mutations.update\n        ".concat(JSON.stringify(e,null,2),"\n      ")),window.lgr.debug(t)}},onUpdateStart:function(t,e){window.lgr.debug("Person.index --\x3e onUpdateStart")},onFetchListSuccess:function(t,e){window.lgr.debug("\n      Parse list success handler >>>>>>>>>>>>>>>>>>>>>>>>>>\n      ".concat(JSON.stringify(t.dirtyData,null,2),"\n    ")),t.dirtyData=-1},customUrlFn:function(t,e){var n=t?"/".concat(t):"",s=e?"s=".concat(e.s,"&c=").concat(e.c):"s=0&c=0",a="".concat(V.server,"/api/").concat(Jn).concat(n,"?").concat(s);return a},parseSingle:function(t){Ln("parseSingle"),Ln(t.data),Ln(dc.state.persons.entities[t.data.itemID]);var e={};return e[Bn]=t.data.itemID,Object.assign({},t,{data:e})},parseList:function(t){var e={},n=[],s={},a=[],i=[];window.lgr.debug("||================================================||\n      persons response: ".concat(JSON.stringify(t,null,2),"\n      persons response length: ").concat(t.length,"\n    "));var o={metadata:!1},r=t.length;while(!o.metadata&&r>=0)r-=1,o=t[r].data;window.lgr.debug("persons meta data: ".concat(JSON.stringify(o,null,2)));var c=o;i=c.enums,a=c.columns;var l=ct(a.map(function(t){return t.meta}));return window.lgr.debug("persons vars: ".concat(JSON.stringify(l,null,2))),r=-1,t.forEach(function(i){r+=1,s=i.data;var o={};s.idib&&(o.version=t[r]._rev,a.forEach(function(t){if(window.lgr.debug("column idx: ".concat(t.idx," ").concat(t.field)),s[t.field]){var e=lt[t.type](s[t.field]);o[t.idx]=e,o[t.field]=e}}),e[s.codigo]=o,Object.keys(o).forEach(function(t){o[t].str&&("boolean"===typeof o[t].raw?o[t]=o[t].raw:o[t]=o[t].str)}),n.push(o))}),dc.dispatch("person/setEnums",i),dc.dispatch("person/setMap",e),Object.assign({},t,{data:n,columns:a,enums:i})}}),Yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-table",{attrs:{data:t.isEmpty?[]:t.products,columns:t.columns,striped:!0,paginated:"","per-page":20,"current-page":1,"opened-detailed":t.defaultOpenedDetails,detailed:"","detail-key":"codigo",focusable:""},on:{"details-open":function(e,n){return t.$toast.open("Expanded "+e.nombre)}},scopedSlots:t._u([{key:"header",fn:function(e){return[n("b-tooltip",{attrs:{position:"is-left",active:!!e.column.meta,label:e.column.meta,dashed:""}},[t._v("\n          "+t._s(e.column.label)+"\n        ")])]}},{key:"detail",fn:function(t){var e=t.row;return[n("product-detail",{attrs:{id:e.codigo}})]}}])},[n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered",staticStyle:{"font-size":"large"}},[n("icon",{attrs:{scale:"3",name:"thumbs-down"}}),n("p",[t._v("No results")])],1)])])],2),n("div",{staticClass:"block"},[t._v("\n        "+t._s(t.refresh)+"\n        "),n("button",{staticClass:"button is-small is-primary",on:{click:function(e){t.columnSelectorOpen=!t.columnSelectorOpen}}},[t._v("\n            Escoger Columnas\n        ")])]),n("b-collapse",{staticClass:"panel",attrs:{open:t.columnSelectorOpen},on:{"update:open":function(e){t.columnSelectorOpen=e}}},[n("ul",[n("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.columns,function(e,s){return n("div",{key:s,staticClass:"control"},[n("li",[n("b-checkbox",{model:{value:e.visible,callback:function(n){t.$set(e,"visible",n)},expression:"column.visible"}},[t._v("\n                "+t._s(e.meta)+"\n              ")])],1)])}))],1)])],1)},qn=[],Vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"level"},t._l(t.columns,function(e){return n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v(t._s(e.meta))]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.prod(t.id)[e.field]))])])])}))])},zn=[],Gn=(console.log,{props:["id"],computed:Object(A["a"])({},Object(N["c"])("product",{prod:"getProduct",columns:"getColumns"}))}),Kn=Gn,Wn=(n("e7e0"),Object(I["a"])(Kn,Vn,zn,!1,null,"272ac2c3",null));Wn.options.__file="Retrieve.vue";var Hn=Wn.exports,Zn={name:"ProductList",mounted:function(){window.lgr.warn("!!!!!!!!!!!!!!!! mounted product list !!!!!!!!!!!!!!!!!!")},beforeMount:function(){window.lgr.warn("\n * * Ready to fetch products * * \n"),this.isLoadingList||this.products.length>0||this.onFetchProducts()},props:{tst:{val:"passed in with props"}},data:function(){var t=[];return{anObj:{tst:"passed in as data"},isFullPage:!1,isEmpty:!1,defaultOpenedDetails:[123],selected:t[1],columnSelectorOpen:!1}},components:{"product-detail":Hn},computed:Object(A["a"])({},Object(N["c"])("product",{products:"list",prod:"getProduct",columns:"getColumns",getDirtyData:"getDirtyData"}),Object(N["c"])({loggedIn:"isAuthenticated"}),Object(N["d"])("product",{isLoadingList:"isFetchingList",isUpdating:"isUpdating",isCreating:"isCreating"}),{refresh:function(){return this.getDirtyData>0&&(window.lgr.error("* * Product list dirty? (".concat(this.getDirtyData,") * *")),this.fetchProducts()),this.getDirtyData>0?"|":"_"}}),methods:Object(A["a"])({},Object(N["b"])(["handle401","notifyUser"]),Object(N["b"])("product",{fetchProducts:"fetchAll",setColumns:"setColumns",setDirtyData:"setDirtyData"}),{onFetchProducts:function(){window.lgr.debug(" * * Try to fetch products * *"),this.fetchProducts()}})},Xn=Zn,ts=Object(I["a"])(Xn,Yn,qn,!1,null,null,null);ts.options.__file="List.vue";var es=ts.exports,ns=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-tabs",[n("b-tab-item",{attrs:{label:"Products"}},[n("router-view",{attrs:{name:"productsList"}})],1)],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1)],1)},ss=[],as=(console.log,{name:"Product"}),is=as,os=Object(I["a"])(is,ns,ss,!1,null,null,null);os.options.__file="Layout.vue";var rs=os.exports,cs=[{meta:"Codigo",label:"ID",field:"codigo",centered:!1,width:8,visible:!0,type:"integer",usage:"rw",numeric:!0,idx:0},{meta:"Nombre",label:"NBR",field:"nombre",centered:!0,width:70,visible:!0,type:"title",usage:"rw",numeric:!1,idx:1},{meta:"Unidad",label:"UNI",field:"unidad",centered:!1,width:16,visible:!0,type:"text",usage:"rw",numeric:!1,idx:2},{meta:"IVA",label:"IVA",field:"iva",centered:!1,width:"4",visible:!0,type:"percent",usage:"r",numeric:!0,idx:3},{meta:"Valor",label:"VAL",field:"valor",centered:!1,width:10,visible:!0,type:"usd",usage:"r",numeric:!0,idx:4},{meta:"Valor Distribuidor",label:"VLD",field:"valor_distribuidor",centered:!1,width:10,visible:!1,type:"usd",usage:"r",numeric:!0,idx:5},{meta:"Porcentaje",label:"PCT",field:"porcentaje",centered:!1,width:4,visible:!1,type:"percent",usage:"r",numeric:!0,idx:6}],ls=console.log,us=[{name:be,path:"list",components:{productsList:es}}],ds=[].concat(us),ms=[{name:fe,path:"products",component:rs,children:ds}],vs="codigo",ps="product",fs=$()({resource:ps,idAttribute:vs,client:X,state:{columns:cs,enums:{},productsMap:{},paginator:{s:1,c:100},dirtyData:-1},actions:{fetchAll:function(t){var e=t.dispatch;ls("<<<<<< fetchAll products >>>>>>");var n={customUrlFnArgs:fs.state.paginator,config:{category:"Products",selector:{$and:[{_id:{$gte:"Product_1_0000000000000000"}},{_id:{$lt:"Product_3_0000000000000000"}}]}}};e("fetchList",n).then(function(t){window.lgr.info(" * * Fetched products * *"),window.lgr.debug("             >>================================================<<\n            products response: ".concat(JSON.stringify(t,null,2),"\n          ")),e("setColumns",t.columns),fs.state.dirtyData=-1}).catch(function(t){window.lgr.error("*** Error while fetching products :: ".concat(t.message," ***")),t.message.endsWith("401")?e("handle401",null,{root:!0}):e("notifyUser",{txt:"Error while fetching products :: ".concat(t.message),lvl:"is-danger"},{root:!0})})},setColumns:function(t,e){var n=t.commit;window.lgr.debug("Product.index --\x3e actions.setColumns ".concat(JSON.stringify(e,null,2))),n("tableColumns",e)},setEnums:function(t,e){var n=t.commit;window.lgr.debug("Product.index --\x3e actions.setEnums"),n("enums",e)},setMap:function(t,e){var n=t.commit;window.lgr.debug("Product.index --\x3e actions.setProdMap"),n("prodMap",e)},setDirtyData:function(t,e){var n=t.commit;window.lgr.debug("Product.index --\x3e actions.setDirtyData"),n("dirtyData",e)}},getters:{getColumns:function(t){return t.columns},getProducts:function(t){return t.list},getEnums:function(t){return t.enums},getDirtyData:function(t){return t.dirtyData},getProductsMap:function(t){return t.productsMap},getPaginator:function(t){return t.paginator},getProduct:function(t){return function(e){return t.entities[e]}}},mutations:{products:function(t,e){ls("".concat(e.id," = ").concat(e.data.codigo,"/").concat(e.data.nombre)),t.entities[e.id]=e.data},enums:function(t,e){t.enums=e},dirtyData:function(t,e){t.dirtyData=e},prodMap:function(t,e){t.productsMap=e},tableColumns:function(t,e){window.lgr.debug("Product.index --\x3e mutation.tableColumns"),t.columns=e}},onFetchListSuccess:function(t,e){window.lgr.error("\n      Parse list success handler >>>>>>>>>>>>>>>>>>>>>>>>>>\n      ".concat(JSON.stringify(t.dirtyData,null,2),"\n    ")),t.dirtyData=-1},customUrlFn:function(t,e){ls("config server --\x3e ".concat(V.server)),ls("client --\x3e ".concat(JSON.stringify(X,null,2))),ls("using paginator --\x3e ".concat(e));var n=t?"/".concat(t):"",s=e?"s=".concat(e.s,"&c=").concat(e.c):"s=0&c=0";ls("using customUrlFn( ".concat(n,", ").concat(s," )")),ls("URI :: ".concat(V.server,"/api/").concat(ps).concat(n,"?").concat(s));var a="".concat(V.server,"/api/").concat(ps).concat(n,"?").concat(s);return a},parseSingle:function(t){ls("parseSingle"),ls(t.data),ls(dc.state.products.entities[t.data.itemID]);var e={};return e[vs]=t.data.itemID,Object.assign({},t,{data:e})},parseList:function(t){var e={},n=[],s={},a=[],i=[];window.lgr.debug("||================================================||\n      products response: ".concat(JSON.stringify(t,null,2),"\n      products response length: ").concat(t.length,"\n    "));var o={name:"none"},r=t.length;while("none"===o.name&&r>=0)r-=1,o=t[r].data;a=o.columns,window.lgr.debug("products meta data: ".concat(JSON.stringify(o,null,2)));var c=ct(a.map(function(t){return t.meta}));return window.lgr.debug("products vars: ".concat(JSON.stringify(c,null,2))),r=-1,t.forEach(function(t){r+=1,s=t.data;var i={};s.idib&&(a.forEach(function(t){if(window.lgr.debug("column idx: ".concat(t.idx," ").concat(t.field)),s[t.field]){var e=lt[t.type](s[t.field]);i[t.idx]=e,i[t.field]=e}}),e[s.codigo]=i,Object.keys(i).forEach(function(t){i[t]=i[t].str||i[t]}),n.push(i))}),-1===i.length?Object.assign({},t,{data:n,columns:a,enums:i}):(dc.dispatch("product/setEnums",i),dc.dispatch("product/setMap",e),Object.assign({},t,{data:n,columns:a,enums:i}))}}),bs=n("53ca"),hs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isBusy,canCancel:!0},on:{"update:active":function(e){t.isBusy=e}}}),n("b-table",{attrs:{data:t.isEmpty?[]:t.formattedInvoices,columns:t.columns,striped:!0,paginated:"","per-page":20,"current-page":1,"opened-detailed":t.defaultOpenedDetails,detailed:"","detail-key":"codigo",focusable:"",narrowed:!0,"mobile-cards":t.hasMobileCards},on:{"details-open":function(e,n){return t.$toast.open("Expanded "+e.nombre)}},scopedSlots:t._u([{key:"header",fn:function(e){return[n("b-tooltip",{attrs:{position:"is-left",active:!!e.column.meta,label:e.column.meta,dashed:""}},[t._v("\n        "+t._s(e.column.label)+"\n      ")])]}},{key:"detail",fn:function(t){var e=t.row;return[n("invoice-detail",{attrs:{id:e.codigo}})]}}])},[n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered",staticStyle:{"font-size":"large"}},[n("icon",{attrs:{scale:"3",name:"thumbs-down"}}),n("p",[t._v("No results")])],1)])])],2),n("div",{staticClass:"control cardMode"},[n("b-switch",{model:{value:t.hasMobileCards,callback:function(e){t.hasMobileCards=e},expression:"hasMobileCards"}},[t._v("Modo tarjeta "),n("small",[t._v("(filas estrechas)")])])],1),n("div",{staticClass:"block"},[n("button",{staticClass:"button is-small is-primary",on:{click:function(e){t.columnSelectorOpen=!t.columnSelectorOpen}}},[t._v("\n        Escoger Columnas\n    ")])]),n("b-collapse",{staticClass:"panel",attrs:{open:t.columnSelectorOpen},on:{"update:open":function(e){t.columnSelectorOpen=e}}},[n("ul",[n("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.columns,function(e,s){return n("div",{key:s,staticClass:"control"},[n("li",[n("b-checkbox",{model:{value:e.visible,callback:function(n){t.$set(e,"visible",n)},expression:"column.visible"}},[t._v("\n              "+t._s(e.meta)+"\n            ")])],1)])}))],1)])],1)},gs=[],Cs=n("826c"),ws=n.n(Cs),_s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("nav",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[n("span",{staticClass:"is-size-6"},[t._v("Registro #"+t._s(t.p(t.id).codigo))])]),n("b-tabs",{model:{value:t.activeSubTab,callback:function(e){t.activeSubTab=e},expression:"activeSubTab"}},[n("b-tab-item",[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-outlined"},[n("b-icon",{attrs:{icon:"eye"}})],1)]),n("invoice-record",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAlter()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-info is-outlined"},[n("b-icon",{attrs:{icon:"edit"}})],1)]),n("invoice-update",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-warning has-text-weight-bold is-outlined"},[n("b-icon",{attrs:{icon:"lock"}})],1)]),n("invoice-auth",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-danger is-outlined"},[n("b-icon",{attrs:{icon:"trash"}})],1)]),t._v('\n        The record for "'+t._s(t.p(t.id).nombre)+'" will be marked for deletion, will no longer appear in the invoices list, but will be kept for historical purposes.\n\n        '),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-info",on:{click:function(e){t.activeSubTab=0}}},[t._v("Go back")])])]),n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-danger"},[t._v("Yes, Delete")])])])])],2)],1)],1)])},ys=[],xs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Codigo")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.codigo))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Fecha")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.fecha))])])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Cliente")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.codigo_cliente))]),n("p",{class:["si"===t.invc.distribuidor?"has-text-info":"is-invisible"]},[t._v("\n            Distribuidor\n          ")])])]),n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Mail")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.email))])])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("b-table",{attrs:{data:t.detail,narrowed:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"cant",label:"Cantidad",width:"10",numeric:""}},[t._v("\n                  "+t._s(e.row.cantidad)+"\n              ")]),n("b-table-column",{attrs:{field:"nombre",label:"Nombre",width:"400"}},[t._v("\n                  ("+t._s(e.row.codigo)+") "+t._s(e.row.nombre)+"\n              ")]),n("b-table-column",{attrs:{field:"nombre",label:"Unidades"}},[t._v("\n                  "+t._s(e.row.unidad)+"\n              ")]),n("b-table-column",{attrs:{field:"precio",label:"Precio",width:"100"}},[t._v("\n                  "+t._s(e.row.precio)+"\n              ")]),n("b-table-column",{attrs:{field:"descuento",label:"Descuento Especial",width:"10"}},[t._v("\n                  "+t._s(e.row.descuento)+"\n              ")]),n("b-table-column",{attrs:{field:"total",label:"Total",width:"100"}},[t._v("\n                  "+t._s(e.row.total)+"\n              ")])]}}])})],1)]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Estado")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.enums[t.invc.estado]))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("b-table",{attrs:{data:t.totals||[],bordered:!0,narrowed:!0,"mobile-cards":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"title"}},[t._v("\n                  "+t._s(e.row.title)+"\n              ")]),n("b-table-column",{attrs:{field:"value",numeric:""}},[t._v("\n                  "+t._s(e.row.value)+"\n              ")])]}}])})],1)])])},Os=[],ks=console.log,Ds={data:function(){var t=[];return{totals:t}},computed:Object(A["a"])({},Object(N["c"])("invoice",{enums:"getEnums"}),{detail:function(){ks("  *************** INVC **********************\n      ");var t=this.invc,e=t.lista_de_items,n="si"===t.distribuidor;ks(this);var s=[];ks("items object"),ks(e);for(var a=0;a<e.length;a+=1){var i=e[a],o=n?i[0].valor_distribuidor:i[0].valor,r=i[1],c=lt.percent(i[2],0);ks("At ".concat(a," -- ").concat(i[0].unidad," (").concat(i[0].codigo,") ").concat(i[0].nombre)),s.push({codigo:i[0].codigo,nombre:i[0].nombre,unidad:i[0].unidad,cantidad:r,precio:o.str,descuento:lt.percent(1-c.raw,0).str,total:lt.usd(o.raw*r-c.raw).str})}return this.totals=[],this.totals.push({title:"Subtotal IVA 12%",value:t.subtotal_iva_12.str}),this.totals.push({title:"Descuento Especial",value:t.descuento_especial.str}),this.totals.push({title:"Valor",value:t.subtotal_descontado.str}),this.totals.push({title:"IVA",value:lt.usd(t.total_calculado.raw-t.subtotal_descontado.raw).str}),this.totals.push({title:"Valor Total",value:t.total_calculado.str}),this.totals.push({title:"Retenido",value:t.retenido.str}),this.totals.push({title:"Total Final",value:t.monto_final.str}),s}}),props:{invc:{type:Object,required:!0,default:function(){return{codigo:9999,ruc_cedula:"34-4545",nombre:"asdf asdf asdf asdf",telefono:"23452345",direccion:"asdfasdf",distribuidor:"si",retencion:"no",tipo_de_documento:"RUC"}}}}},Es=Ds,Ps=(n("c2e7"),Object(I["a"])(Es,xs,Os,!1,null,"23bf70aa",null));Ps.options.__file="Retrieve.vue";var Ss=Ps.exports,Is=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isUpdating,canCancel:!0},on:{"update:active":function(e){t.isUpdating=e}}}),t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.invc},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Invoice")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])])],1)],1)},js=[],Ts=(console.log,{props:["invc"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(N["c"])("invoice",{enums:"getEnums"}),Object(N["d"])("invoice",{isUpdating:"isUpdating"}),{formUid:function(){return"pers_".concat(this.invc.codigo)},typesId:function(){var t=this.enums.DocTypeLookup,e=[];return Object.keys(t).forEach(function(n){var s=t[n];e.push({name:s,value:n,id:n,label:s})}),e}}),methods:Object(A["a"])({},Object(N["b"])("invoice",{saveForm:"saveForm"}))}),As=Ts,Ns=(n("366c"),Object(I["a"])(As,Is,js,!1,null,null,null));Ns.options.__file="Update.vue";var Rs=Ns.exports,$s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.permissionsField},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",[t._v(t._s(t.invc.nombre))]),n("h5",[t._v("Sus Permisos por Recurso")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[t._l(t.resources,function(e){return n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v(t._s(e))]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:e,type:"select",initial:"0",options:t.levels}})],1)])}),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],2)])],1)],1)},Ls=[],Us=console.log,Ms={props:["invc"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(N["c"])("invoice",{enums:"getEnums"}),{permissionsField:function(){return Us("xxxxxxxxxxxxxxxxxxx this.invc xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"),Us(this.invc),Us(this.invc.permissions),this.invc.permissions?this.invc.permissions:{}},formUid:function(){return"pers_".concat(this.invc.codigo)},levels:function(){return We.options},resources:function(){return Us("Resources"),Us(cn),cn}}),methods:Object(A["a"])({},Object(N["b"])("invoice",{saveForm:"saveForm"}))},Fs=Ms,Bs=(n("d224"),Object(I["a"])(Fs,$s,Ls,!1,null,null,null));Bs.options.__file="Permissions.vue";var Js=Bs.exports,Qs={name:"RUDcards",props:["id","distributor"],data:function(){return{activeSubTab:0}},components:{"invoice-record":Ss,"invoice-update":Rs,"invoice-auth":Js},methods:{canAlter:function(){return this.$can("alter","invoice")},canAssign:function(){return this.$can("assign","invoice")}},computed:Object(A["a"])({},Object(N["c"])("invoice",{p:"getInvoice"}))},Ys=Qs,qs=Object(I["a"])(Ys,_s,ys,!1,null,null,null);qs.options.__file="RUDcards.vue";var Vs=qs.exports,zs=console.log,Gs={name:"InvoiceList",beforeMount:function(){var t=this;zs("\n\n\n                  * * Ready to fetch invoices * *\n\n\n      "),zs(Qn.state.list.length),zs(Qn.state.isFetchingList),zs(this.$store);var e=7;switch((Qn.state.list.length>0||Qn.state.isFetchingList)&&(zs("Don't load persons"),e-=4),(fs.state.list.length>0||fs.state.isFetchingList)&&(zs("Don't load products"),e-=2),(this.invoices.length>0||this.isLoadingList)&&(zs("Don't load invoices"),e-=1),e){case 7:case 6:zs("Load all"),this.$store.dispatch("person/fetchAll").then(function(){zs("Loaded persons"),t.$store.dispatch("product/fetchAll").then(function(){zs("Loaded products"),t.onFetchInvoices()})});break;case 5:case 4:zs("Person then invoices"),zs("Load all"),this.$store.dispatch("person/fetchAll").then(function(){zs("Loaded persons"),t.onFetchInvoices()});break;case 3:case 2:zs("Product then invoices"),zs("Load all"),this.$store.dispatch("product/fetchAll").then(function(){zs("Loaded products"),t.onFetchInvoices()});break;case 1:zs("Load invoices"),this.onFetchInvoices();break;default:zs("No loading needed")}},props:{tst:"passed in with props"},data:function(){var t=[];return{anObj:{tst:"passed in as data"},hasMobileCards:!1,isFullPage:!1,isEmpty:!1,defaultOpenedDetails:[4358],selected:t[1],columnSelectorOpen:!1}},components:{"invoice-detail":Vs},computed:Object(A["a"])({},Object(N["c"])("invoice",{invoices:"list",columns:"getColumns"}),Object(N["c"])({loggedIn:"isAuthenticated"}),Object(N["d"])("invoice",{isLoadingList:"isFetchingList",isUpdating:"isUpdating",isCreating:"isCreating"}),{formattedInvoices:function(){return this.invoices.map(function(t){var e={};return Object.entries(t).forEach(function(t){var n=Object(ae["a"])(t,2),s=n[0],a=n[1];e[s]=a.str||a}),e})},isBusy:function(){return this.isLoadingList||this.isUpdating||this.isCreating}}),methods:Object(A["a"])({},Object(N["b"])(["handle401","notifyUser"]),Object(N["b"])("invoice",{fetchInvoices:"fetchAll",setColumns:"setColumns"}),{onFetchInvoices:function(){var t=this;zs(" * * Try to fetch invoices * *"),ws()().interval(100).times(20).condition(function(){return!Qn.state.isFetchingList&&!fs.state.isFetchingList}).done(function(){return t.fetchInvoices()})}})},Ks=Gs,Ws=(n("ecdc"),Object(I["a"])(Ks,hs,gs,!1,null,null,null));Ws.options.__file="List.vue";var Hs=Ws.exports,Zs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("b-tab-item",{attrs:{label:"Invoices"}},[n("router-view",{attrs:{name:"invoicesList"}})],1),n("b-tab-item",{attrs:{visible:t.canEdit(),label:"Add Invoice"}},[n("Create")],1)],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1)],1)},Xs=[],ta=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isCreating,canCancel:!0},on:{"update:active":function(e){t.isCreating=e}}}),n("formulate",{staticClass:"my-form",attrs:{name:"createInvoice"},on:{submit:t.commitForm}},[n("formulate-element",{attrs:{name:"summation",type:"hidden",placeholder:"-1"}}),n("formulate-element",{attrs:{name:"items",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Invoice")]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Cliente")]),n("formulate-element",{attrs:{name:"Persona",validation:"required","element-classes":"nameInput"}},[n("autocomplete-input",{attrs:{items:t.personsId||null},on:{"selection-made":t.setPersona},model:{value:t.Persona,callback:function(e){t.Persona=e},expression:"Persona"}})],1)],1)]),n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Fecha")]),n("formulate-element",{attrs:{name:"InvoiceDate",validation:"required"}},[n("dateselect-input",{model:{value:t.InvoiceDate,callback:function(e){t.InvoiceDate=e},expression:"InvoiceDate"}})],1)],1)]),n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Descuento")]),n("formulate-element",{attrs:{name:"desc",placeholder:"0","element-classes":"resizedTextbox",validation:"isPct(desc)"}})],1)])]),n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column"},[n("label",{staticClass:"label"},[t._v("Itemes")]),n("button",{staticClass:"button is-info",on:{click:t.openModal}},[n("b-icon",{attrs:{icon:"plus"}}),n("span",[t._v("Anadir item")])],1),n("button",{staticClass:"button field is-danger",attrs:{disabled:!t.checkedRows.length},on:{click:t.dropRow}},[n("b-icon",{attrs:{icon:"trash"}}),n("span",[t._v("Borrar seleccionadas")])],1),n("b-modal",{attrs:{active:t.isComponentModalActive,"has-modal-card":""},on:{"update:active":function(e){t.isComponentModalActive=e}}},[n("detailsForm")],1),n("b-table",{attrs:{data:t.tableData,"checked-rows":t.checkedRows,checkable:""},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{label:"Codigo",numeric:""}},[t._v("\n                    "+t._s(e.row.codigo)+"\n                  ")]),n("b-table-column",{attrs:{label:"Producto/Servicio"}},[t._v("\n                    "+t._s(e.row.nombre)+"\n                  ")]),n("b-table-column",{attrs:{label:"Unidad"}},[t._v("\n                    "+t._s(e.row.unidad)+"\n                  ")]),n("b-table-column",{attrs:{label:"Valor",numeric:""}},[t._v("\n                    "+t._s(e.row.valor)+"\n                  ")]),n("b-table-column",{attrs:{label:"IVA",numeric:""}},[t._v("\n                    "+t._s(e.row.iva.str)+"\n                  ")]),n("b-table-column",{attrs:{label:"Cantidad",centered:""}},[t._v("\n                    "+t._s(e.row.cantidad)+"\n                  ")]),n("b-table-column",{attrs:{label:"Total",numeric:""}},[t._v("\n                    "+t._s(e.row.total)+"\n                  ")])]}}])},[n("template",{slot:"footer"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-offset-2 is-narrow-mobile"},[n("div",{staticClass:"box",staticStyle:{width:"125px"}},[t.retention?n("div",{class:["si"===t.retention?"":"strike-out"]},[t._v("\n                          Retencion\n                        ")]):t._e(),t.distributor?n("div",{class:["si"===t.distributor?"":"strike-out"]},[t._v("\n                          Distribuidor\n                        ")]):t._e()])]),n("div",{staticClass:"column is-5"},[n("div",{staticClass:"box"},[n("b-table",{attrs:{data:t.totals},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{width:"180"}},[t._v("\n                                "+t._s(e.row.label)+"\n                            ")]),n("b-table-column",{attrs:{numeric:""}},[t._v("\n                              "+t._s(e.row.value)+"\n                            ")])]}}])})],1)]),n("div",{staticClass:"column is-1"})])])],2),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],1)])])],1)],1)},ea=[],na=(n("4917"),n("f4fb")),sa=n.n(na),aa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"autocomplete"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:t.elemId,attrs:{type:"text",id:t.elemId},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.onChange],blur:t.onBlur,keyup:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.onArrowDown(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.onArrowUp(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onEnter(e):null}]}}),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"autocomplete-choices",attrs:{id:"autocomplete-choices"}},[t.isLoading?n("li",{staticClass:"loading"},[t._v("Loading choices")]):t._l(t.choices,function(e,s){return n("li",{key:s,staticClass:"autocomplete-choice",class:{"is-active":s===t.arrowCounter},on:{click:function(n){t.setChoice(e)}}},[t._v("\n      "+t._s(e)+"\n    ")])})],2)])},ia=[],oa=(n("20d6"),n("386d"),console.log),ra=(console.error,{name:"autocomplete",template:"#autocomplete",props:{elemId:{type:String,required:!0,default:function(){return"autocomplete"}},items:{type:Object,required:!1,default:function(){return{}}},isAsync:{type:Boolean,required:!1,default:!1}},data:function(){return{isOpen:!1,choices:[],search:"",isLoading:!1,arrowCounter:0}},methods:{onChange:function(){this.isAsync?this.isLoading=!0:(this.filterChoices(),this.isOpen=!0)},filterChoices:function(){var t=this;this.choices=this.items.list.filter(function(e){return e.label.toLowerCase().indexOf(t.search.toLowerCase())>-1}).map(function(t){return t.label})},setValue:function(t){oa("elemId ".concat(this.elemId)),oa("elemId ".concat(JSON.stringify(this.$refs,null,2))),this.$refs[this.elemId].value=t},setChoice:function(t){oa("setChoice = ".concat(t)),this.search=t,this.isOpen=!1,this.arrowCounter=this.choices.findIndex(function(e){return e===t}),this.gotOne()},onArrowDown:function(){this.arrowCounter<this.choices.length&&(this.arrowCounter+=1)},onArrowUp:function(){this.arrowCounter>0&&(this.arrowCounter-=1)},gotOne:function(){var t=this;oa(" gotOne \n\n"),this.search=this.choices[this.arrowCounter],this.search&&this.search.length>1&&this.choices.includes(this.search)&&(this.$emit("selection-made",this.items.list.filter(function(e){return e.label.indexOf(t.search)>-1})[0]),oa("Chose ".concat(this.search))),this.arrowCounter=-1},onBlur:function(){},onEnter:function(){oa(" onEnter ".concat(this.isOpen)),this.isOpen&&(this.gotOne(),this.isOpen=!1,this.arrowCounter=-1)},handleClickOutside:function(t){this.$el.contains(t.target)||(this.isOpen=!1,this.arrowCounter=-1,oa(" handleClickOutside "))}},watch:{items:function(t,e){t.length!==e.length&&(this.choices=t,this.isLoading=!1)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}}),ca=ra,la=(n("b295"),Object(I["a"])(ca,aa,ia,!1,null,"316dd063",null));la.options.__file="AutoComplete.vue";var ua=la.exports,da=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-date-picker",{ref:"datePicked",attrs:{formats:t.formats,mode:"single"},on:{input:t.datePick},model:{value:t.theDate,callback:function(e){t.theDate=e},expression:"theDate"}})},ma=[],va=(console.log,{props:{value:{type:[Date,Boolean],default:!1}},created:function(){this.$emit("input",new Date)},methods:{datePick:function(){this.$emit("input",this.theDate)}},data:function(){return{theDate:new Date,formats:{title:"MMMM / YYYY",weekdays:"W",navMonths:"MMM",input:["YYYY-MM-DD","YYYY/MM/DD"],dayPopover:"L",data:["L","YYYY-MM-DD","YYYY/MM/DD"]}}}}),pa=va,fa=Object(I["a"])(pa,da,ma,!1,null,null,null);fa.options.__file="DateSelect.vue";var ba=fa.exports,ha=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[n("formulate",{staticClass:"my-form",attrs:{name:"invoiceDetails"},on:{submit:t.saveForm}},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"title"},[t._v("Item")])]),n("section",{staticClass:"modal-card-body"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-four-fifths"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Producto / Servicio")]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:"code",type:"select",initial:"nombre",options:t.typesId}})],1)]),n("div",{staticClass:"column is-one-fifth"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Cantidad")]),n("formulate-element",{attrs:{name:"qty",placeholder:"cantidad","element-classes":"resizedTextbox"}})],1)])])]),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v("Close")]),n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])],1)},ga=[],Ca=console.log,wa={computed:Object(A["a"])({},Object(N["c"])("product",{products:"list",productsMap:"getProductsMap"}),{typesId:function(){Ca("%%%%%%%%%%%%%%%%%%%% CC %%%%%%%%%%%%%%%%%%"),Ca(this),Ca(this.$store.getters);var t=[],e=this.products;return e&&Object.keys(e).forEach(function(n){var s=e[n];t.push({name:s.nombre,value:s.codigo,id:s.codigo,label:"".concat(s.nombre," (").concat(s.unidad,")")})}),Ca(t),t}}),methods:Object(A["a"])({},Object(N["b"])("invoice",{saveRow:"saveRow"}),{saveForm:function(t){this.saveRow({rowNum:-1,values:t}),this.$parent.close()}})},_a=wa,ya=(n("777f"),Object(I["a"])(_a,ha,ga,!1,null,"0c2d6ab8",null));ya.options.__file="Details.vue";var xa=ya.exports,Oa=console.log,ka={props:["pers"],components:{detailsForm:xa,"autocomplete-input":ua,"dateselect-input":ba},created:function(){this.persons&&this.persons.length>0&&this.productsMap&&Object.keys(this.productsMap).length>0&&this.products&&this.products.length>0||this.$router.push({name:"home"})},data:function(){var t=[];return{totals:t,isComponentModalActive:!1,checkedRows:[],retention:null,distributor:null,myDate:new Date,formats:{title:"MMMM / YYYY",weekdays:"W",navMonths:"MMM",input:["YYYY-MM-DD","YYYY/MM/DD"],dayPopover:"L",data:["L","YYYY-MM-DD","YYYY/MM/DD"]}}},computed:Object(A["a"])({},Object(N["c"])("invoice",{enums:"getEnums"}),Object(N["c"])("product",{products:"list",productsMap:"getProductsMap"}),Object(N["c"])("person",{persons:"list",getPerson:"getPerson"}),Object(N["d"])("invoice",{isCreating:"isCreating",formRows:"formRows"}),Object(d["mapModels"])({Persona:"createInvoice/Persona",InvoiceDate:"createInvoice/InvoiceDate"}),{tableData:function(){var t=this,e=[],n=this.$store.state;if(n.values.createInvoice){var s=n.values.createInvoice;s.Persona=s.Persona||"(0) no one",s.InvoiceDate=s.InvoiceDate||new Date;var a=[{codigo:"codigo",nombre:"nombre",unidad:"unidad",iva:"iva",valor:"$0.00",cantidad:0,total:"$0.00"}];Oa("\n\n\n          tableData() ----------------------------"),Oa(this.productsMap);var i=s.Persona.match(/\(([^)]+)\)/)[1],o=this.getPerson(i);this.retention=o&&o.retencion||null,this.distributor=o&&o.distribuidor||null,this.totals=[];var r=0,c=0,l=0,u={distributor:this.distributor,person:i,discountPct:0,iva0:0,iva12:0,subtotal:0,discount:0,retention:0,total:0};if(this.products.length<1)return a;if(this.formRows.row.length<1)return a;if(this.formRows.row[0].code<0)return a;this.formRows.row.forEach(function(n){Oa("row"),Oa(n);var s=t.productsMap[n.code];Oa(s.porcentaje.raw),t.distributor&&"si"===t.distributor?(r=s.valor_distribuidor.str,c=s.valor_distribuidor.raw,l=lt.percent(s.valor_distribuidor.raw/s.valor.raw)):(r=s.valor.str,c=s.valor.raw,l=lt.percent(1));var a=c*n.qty;Oa(s.iva);var i=0===s.iva.raw?a:0,o=s.iva.raw>0?a:0;u.iva0+=i,u.iva12+=o,u.subtotal+=i+o,e.push({codigo:n.code,nombre:s.nombre,unidad:s.unidad,discount:l,iva:s.iva,valor:r,cantidad:n.qty,total:lt.usd(c*n.qty).str})}),Oa("rows"),Oa(e),u.discountPct=s&&s.desc||0,u.discount=u.discountPct/100*u.subtotal,u.valor=u.subtotal-u.discount,u.iva=.12*u.valor,u.total=u.valor+u.iva,u.final=u.total,u.iva0>0&&this.totals.push({label:"Subtotal IVA  0%",value:lt.usd(u.iva0).str}),this.totals.push({label:"Subtotal IVA 12%",value:lt.usd(u.iva12).str}),this.totals.push({label:"Descuento Especial",value:lt.usd(u.discount).str}),this.totals.push({label:"Valor",value:lt.usd(u.valor).str}),this.totals.push({label:"IVA",value:lt.usd(u.iva).str}),this.totals.push({label:"Valor Total",value:lt.usd(u.total).str}),u.final=u.total,"si"===this.retention&&(u.retention=.01*u.total,u.final=u.total-u.retention,this.totals.push({label:"Retenido",value:lt.usd(u.retention).str})),this.totals.push({label:"Total Final",value:lt.usd(u.final).str}),Oa("summation.iva0 ".concat(u.iva0)),Oa("summation.iva12 ".concat(u.iva12)),Oa("summation.discountPct ".concat(u.discountPct)),Oa("summation.discount ".concat(u.discount)),Oa("summation.valor ".concat(u.valor)),Oa("summation.iva ".concat(u.iva)),Oa("summation.total ".concat(u.total)),Oa("summation.retention ".concat(u.retention)),Oa("summation.final ".concat(u.final)),s.summation=u,s.items=e,Oa(s),Oa(this.$store),Oa(e)}return e},personsId:function(){Oa("%%%%%%%%%%%%%%%% personsId %%%%%%%%%%%%%%%%%% "),Oa(this);var t=[],e=this.persons;return e&&(Oa("prsns"),Object.keys(e).forEach(function(n){var s=e[n];t.push({value:s.codigo,label:"".concat(s.nombre)})})),Oa(t),{list:t,data:function(t){return"(".concat(t.value,") ").concat(t.label)}}}}),methods:Object(A["a"])({},Object(N["b"])("invoice",{saveForm:"saveForm"}),{setPersona:function(t){Oa("persona ".concat(JSON.stringify(t,null,2)))},openModal:function(t){t.preventDefault(),this.isComponentModalActive=!0},dropRow:function(t){var e=this;this.checkedRows.forEach(function(t){e.formRows.row.forEach(function(n,s){n.code===t.codigo&&n.code===t.codigo&&e.formRows.row.splice(s,1)})}),Oa(this.checkedRows),t.preventDefault()},commitForm:function(t){this.saveForm(t)},setItem:function(t){Oa("Item ".concat(t.qty," of ").concat(t.code))}})},Da=ka,Ea=(n("3f47"),Object(I["a"])(Da,ta,ea,!1,null,"6fa630f9",null));Ea.options.__file="Create.vue";var Pa=Ea.exports,Sa=console.log,Ia={name:"Invoice",components:{Create:Pa},computed:Object(A["a"])({},Object(N["c"])("invoice",{currentTab:"getCurrentTab"}),{activeTab:{get:function(){return dc.state.invoice.currentTab},set:function(t){return dc.dispatch("invoice/setCurrentTab",t)}}}),methods:Object(A["a"])({canEdit:function(){return this.$can("comment","invoices/list")},qtst:function(){Sa(" ------- Quick Test -------"),this.onCreateInvoice()}},Object(N["b"])("invoice",{createInvoice:"create",setTab:"setCurrentTab"}))},ja=Ia,Ta=Object(I["a"])(ja,Zs,Xs,!1,null,null,null);Ta.options.__file="Layout.vue";var Aa=Ta.exports,Na=[{meta:"Codigo",label:"COD",field:"codigo",centered:!1,visible:!0,width:5,numeric:!0,type:"integer",usage:"rw",idx:0},{meta:"Fecha",label:"FECH",field:"fecha",centered:!0,visible:!0,width:"10",numeric:!1,type:"date",usage:"rw",idx:1},{meta:"Estado",label:"ESTS",field:"estado",centered:!0,visible:!1,width:10,numeric:!1,type:"text",usage:"rw",idx:2},{meta:"Codigo Cliente",label:"CCLI",field:"codigo_cliente",centered:!0,visible:!0,width:6,numeric:!1,type:"foreignKey1",usage:"rw",idx:3},{meta:"Distribuidor",label:"DIST",field:"distribuidor",centered:!0,visible:!0,width:4,numeric:!1,type:"text",usage:"rw",idx:4},{meta:"Descuento Especial",label:"DESC",field:"descuento_especial",centered:!1,visible:!1,width:12,numeric:!0,type:"percent",usage:"rw",idx:5},{meta:"Lista de Items",label:"ITMS",field:"lista_de_items",centered:!0,visible:!1,width:4,numeric:!0,type:"JSON1",usage:"rw",idx:6},{meta:"Subtotal IVA 12%",label:"IV12",field:"subtotal_iva_12",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:7},{meta:"Subtotal IVA 0%",label:"IV00",field:"subtotal_iva_0",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:8},{meta:"Subtotal Descontado",label:"STDC",field:"subtotal_descontado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:9},{meta:"Total Calculado",label:"TOTL",field:"total_calculado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:10},{meta:"Retenido",label:"RETN",field:"retenido",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:11},{meta:"Monto Final",label:"MNTO",field:"monto_final",centered:!1,visible:!0,width:12,numeric:!0,type:"usd",usage:"rw",idx:12},{meta:"Total Cobrado",label:"COBR",field:"total_cobrado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:13}],Ra=void 0,$a=console.log,La=[{name:we,path:"list",components:{invoicesList:Hs}}],Ua=[].concat(La),Ma=[{name:_e,path:"invoices",component:Aa,children:Ua},{name:ye,path:"invoice/:id",component:Ss}];R["client"].interceptors.request.use(function(t){var e=t,n=window.ls.get(V.tokenName);return null!=n&&(e.headers.Authorization="JWT ".concat(n)),e},function(t){return $a("request failed"),Promise.reject(t)});var Fa={processPersonFK:function(t){var e=Qn.state.entities[t];return e?e.nombre:"Usuario #".concat(t)},processDetailsJSON:function(t){if(!fs.state.entities)return t;if(Object.keys(fs.state.entities).length<1)return t;try{return JSON.parse(t.replace(/'/g,'"')).details.filter(function(t){return t[0]>0}).map(function(t){return[fs.state.entities[t[0]],t[1],t[2]]})}catch(e){return t}}},Ba="codigo",Ja="invoice",Qa=$()({resource:Ja,idAttribute:Ba,urlRoot:"".concat(V.server),client:R["client"],state:{columns:Na,currentTab:0,enums:{},paginator:{s:1,c:1e4},formRows:{row:[]}},actions:{fetchAll:function(t){var e=t.dispatch;$a("<<<<<< fetchAll invoices >>>>>>"),e("fetchList",{customUrlFnArgs:Qa.state.paginator}).then(function(t){$a(" * * Fetched invoices * *"),$a(t.columns),e("setColumns",t.columns)}).catch(function(t){$a("*** Error while fetching invoices :: >".concat(t.message,"<***")),$a(t.message),t.message.endsWith("401")?e("handle401",null,{root:!0}):e("notifyUser",{txt:"Error fetching invoices :: ".concat(t.message),lvl:"is-danger"},{root:!0})})},setColumns:function(t,e){var n=t.commit;window.lgr.info("Invoice.index --\x3e actions.setColumns"),$a(e),n("tableColumns",e)},setCurrentTab:function(t,e){var n=t.commit;window.lgr.info("Invoice.index --\x3e actions.setCurrentTab -- ".concat(e)),n("tab",e)},setEnums:function(t,e){var n=t.commit;window.lgr.info("Invoice.index --\x3e actions.setEnums"),n("enums",e)},updLocal:function(t,e){var n=t.commit;$a("uuuuuuu Update local record uuuuuuuuuu"),$a("".concat(e.data.mode," ").concat(e.data.store," ").concat(e.id)),$a(e.data.data),n("invoice",{id:e.id,data:e.data.data})},newLocal:function(t,e){t.dispatch;$a("uuuuuuu Append new local record uuuuuuuuuu"),$a("".concat(e.data.mode," ").concat(e.data.store))},saveRow:function(t,e){$a("\n\n        Saving row......................");var n=t.rootGetters["product/getProduct"](e.values.code);$a(n),$a(e.values),t.commit("appendItemRow",e.values)},saveForm:function(t,e){var n=t.dispatch;window.lgr.info("Invoice.index --\x3e actions.saveForm"),$a("unununu save form ununununun"),$a(e),$a(Ra);var s=e.items.map(function(t){return[t.codigo,parseInt(t.cantidad,10),t.discount.raw]}),a={data:{mode:"post",store:"invoice",data:{fecha:lt.date(e.InvoiceDate),estado:"REG",codigo_cliente:e.summation.person,distribuidor:e.summation.distributor,descuento_especial:lt.percent(e.summation.discountPct/100).raw,lista_de_items:JSON.stringify({details:s}).split('"').join("'"),subtotal_iva_12:lt.usd(e.summation.iva12).raw,subtotal_iva_0:lt.usd(e.summation.iva0).raw,subtotal_descontado:lt.usd(e.summation.valor).raw,total_calculado:lt.usd(e.summation.total).raw,retenido:lt.usd(e.summation.retention).raw,monto_final:lt.usd(e.summation.final).raw,total_cobrado:0}}};$a("@@@@@@@@@@ pkge @@@@@@@@"),$a(a),n("newLocal",a),n("create",a)},backToListTab:function(t){var e=t.getters;t.dispatch;dc.dispatch("invoice/fetchList",{customUrlFnArgs:e.getPaginator}),dc.dispatch("invoice/setCurrentTab",0)}},getters:{getCurrentTab:function(t){return t.currentTab},getColumns:function(t){return t.columns},getInvoices:function(t){return t.list},getEnums:function(t){return t.enums},getPaginator:function(t){return t.paginator},getInvoice:function(t){return function(e){return t.entities[e]}}},mutations:{tab:function(t,e){window.lgr.debug("Invoice.index --\x3e mutations.tab -- ".concat(e)),t.currentTab=e},invoice:function(t,e){$a("".concat(e.id," = ").concat(e.data.codigo,"/").concat(e.data.nombre)),t.entities[e.id]=e.data},appendItemRow:function(t,e){(!t.formRows.row||!t.formRows.row[0]||t.formRows.row[0].code<0)&&(t.formRows.row=[]),t.formRows.row.push(e)},enums:function(t,e){t.enums=e},tableColumns:function(t,e){window.lgr.debug("Invoice.index --\x3e mutation.tableColumns"),t.columns=e}},customUrlFn:function(t,e){$a(V.server),$a("using paginator --\x3e ".concat(e));var n=t?"/".concat(t):"",s=e?"s=".concat(e.s,"&c=").concat(e.c):"s=0&c=0";$a("using customUrlFn( ".concat(n,", ").concat(s," )")),$a("URI :: ".concat(V.server,"/api/").concat(Ja).concat(n,"?").concat(s));var a="".concat(V.server,"/api/").concat(Ja).concat(n,"?").concat(s);return a},onCreateSuccess:function(){dc.dispatch("invoice/backToListTab"),window.lgr.info("Invoice.index --\x3e mutation.onCreateSuccess OK!")},onUpdateSuccess:function(){dc.dispatch("invoice/backToListTab"),window.lgr.info("Invoice.index --\x3e mutation.onUpdateSuccess OK!")},parseSingle:function(t){$a("parseSingle"),$a(t.data),$a(dc.state.invoice.entities[t.data.itemID]);var e={};return e[Ba]=t.data.itemID,Object.assign({},t,{data:e})},parseList:function(t){var e=t.data[Ja],n=e.data,s=e.titles,a=e.meta,i=e.enums,o=ct(s),r=n.map(function(t,e){var n=t,s={};return a.forEach(function(t,e){n[e]=lt[t.type](n[e],{foreignKey1:{fn:Fa.processPersonFK,vl:n[e]},JSON1:{fn:Fa.processDetailsJSON,vl:n[e]}})}),n.forEach(function(t,e){s[o[e]]=t}),s});return dc.dispatch("invoice/setEnums",i.StatusLookup),Object.assign({},t,{data:r,columns:a,enums:Object(bs["a"])(i)})}}),Ya=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isBusy,canCancel:!0},on:{"update:active":function(e){t.isBusy=e}}}),n("b-table",{attrs:{data:t.isEmpty?[]:t.formattedBottles,columns:t.columns,striped:!0,paginated:"","per-page":20,"current-page":1,"opened-detailed":t.defaultOpenedDetails,detailed:"","detail-key":"codigo",focusable:"",narrowed:!0,"mobile-cards":t.hasMobileCards},on:{"details-open":function(e,n){return t.$toast.open("Expanded "+e.nombre)}},scopedSlots:t._u([{key:"header",fn:function(e){return[n("b-tooltip",{attrs:{position:"is-left",active:!!e.column.meta,label:e.column.meta,dashed:""}},[t._v("\n        "+t._s(e.column.label)+"\n      ")])]}},{key:"detail",fn:function(t){var e=t.row;return[n("bottle-detail",{attrs:{id:e.codigo}})]}}])},[n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered",staticStyle:{"font-size":"large"}},[n("icon",{attrs:{scale:"3",name:"thumbs-down"}}),n("p",[t._v("No results")])],1)])])],2),n("div",{staticClass:"control cardMode"},[n("b-switch",{model:{value:t.hasMobileCards,callback:function(e){t.hasMobileCards=e},expression:"hasMobileCards"}},[t._v("Modo tarjeta "),n("small",[t._v("(filas estrechas)")])])],1),n("div",{staticClass:"block"},[n("button",{staticClass:"button is-small is-primary",on:{click:function(e){t.columnSelectorOpen=!t.columnSelectorOpen}}},[t._v("\n        Escoger Columnas\n    ")])]),n("b-collapse",{staticClass:"panel",attrs:{open:t.columnSelectorOpen},on:{"update:open":function(e){t.columnSelectorOpen=e}}},[n("ul",[n("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.columns,function(e,s){return n("div",{key:s,staticClass:"control"},[n("li",[n("b-checkbox",{model:{value:e.visible,callback:function(n){t.$set(e,"visible",n)},expression:"column.visible"}},[t._v("\n              "+t._s(e.meta)+"\n            ")])],1)])}))],1)])],1)},qa=[],Va=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("nav",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[n("span",{staticClass:"is-size-6"},[t._v("Registro #"+t._s(t.p(t.id).codigo))])]),n("b-tabs",{model:{value:t.activeSubTab,callback:function(e){t.activeSubTab=e},expression:"activeSubTab"}},[n("b-tab-item",[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-outlined"},[n("b-icon",{attrs:{icon:"eye"}})],1)]),n("bottle-record",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAlter()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-info is-outlined"},[n("b-icon",{attrs:{icon:"edit"}})],1)]),n("bottle-update",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-warning has-text-weight-bold is-outlined"},[n("b-icon",{attrs:{icon:"lock"}})],1)]),n("bottle-auth",{attrs:{invc:t.p(t.id)}})],2),n("b-tab-item",{attrs:{visible:t.canAssign()}},[n("template",{slot:"header"},[n("p",{staticClass:"button is-small is-danger is-outlined"},[n("b-icon",{attrs:{icon:"trash"}})],1)]),t._v('\n        The record for "'+t._s(t.p(t.id).nombre)+'" will be marked for deletion, will no longer appear in the bottles list, but will be kept for historical purposes.\n\n        '),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-info",on:{click:function(e){t.activeSubTab=0}}},[t._v("Go back")])])]),n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("a",{staticClass:"button is-danger"},[t._v("Yes, Delete")])])])])],2)],1)],1)])},za=[],Ga=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Codigo")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.codigo))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Fecha")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.fecha))])])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Cliente")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.codigo_cliente))]),n("p",{class:["si"===t.invc.distribuidor?"has-text-info":"is-invisible"]},[t._v("\n            Distribuidor\n          ")])])]),n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Mail")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.invc.email))])])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("b-table",{attrs:{data:t.detail,narrowed:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"cant",label:"Cantidad",width:"10",numeric:""}},[t._v("\n                  "+t._s(e.row.cantidad)+"\n              ")]),n("b-table-column",{attrs:{field:"nombre",label:"Nombre",width:"400"}},[t._v("\n                  ("+t._s(e.row.codigo)+") "+t._s(e.row.nombre)+"\n              ")]),n("b-table-column",{attrs:{field:"nombre",label:"Unidades"}},[t._v("\n                  "+t._s(e.row.unidad)+"\n              ")]),n("b-table-column",{attrs:{field:"precio",label:"Precio",width:"100"}},[t._v("\n                  "+t._s(e.row.precio)+"\n              ")]),n("b-table-column",{attrs:{field:"descuento",label:"Descuento Especial",width:"10"}},[t._v("\n                  "+t._s(e.row.descuento)+"\n              ")]),n("b-table-column",{attrs:{field:"total",label:"Total",width:"100"}},[t._v("\n                  "+t._s(e.row.total)+"\n              ")])]}}])})],1)]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[t._v("Estado")]),n("p",{staticClass:"is-size-5"},[t._v(t._s(t.enums[t.invc.estado]))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("b-table",{attrs:{data:t.totals||[],bordered:!0,narrowed:!0,"mobile-cards":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"title"}},[t._v("\n                  "+t._s(e.row.title)+"\n              ")]),n("b-table-column",{attrs:{field:"value",numeric:""}},[t._v("\n                  "+t._s(e.row.value)+"\n              ")])]}}])})],1)])])},Ka=[],Wa=console.log,Ha={data:function(){var t=[];return{totals:t}},computed:Object(A["a"])({},Object(N["c"])("bottle",{enums:"getEnums"}),{detail:function(){Wa("  *************** INVC **********************\n      ");var t=this.invc,e=t.lista_de_items,n="si"===t.distribuidor;Wa(this);var s=[];Wa("items object"),Wa(e);for(var a=0;a<e.length;a+=1){var i=e[a],o=n?i[0].valor_distribuidor:i[0].valor,r=i[1],c=lt.percent(i[2],0);Wa("At ".concat(a," -- ").concat(i[0].unidad," (").concat(i[0].codigo,") ").concat(i[0].nombre)),s.push({codigo:i[0].codigo,nombre:i[0].nombre,unidad:i[0].unidad,cantidad:r,precio:o.str,descuento:lt.percent(1-c.raw,0).str,total:lt.usd(o.raw*r-c.raw).str})}return this.totals=[],this.totals.push({title:"Subtotal IVA 12%",value:t.subtotal_iva_12.str}),this.totals.push({title:"Descuento Especial",value:t.descuento_especial.str}),this.totals.push({title:"Valor",value:t.subtotal_descontado.str}),this.totals.push({title:"IVA",value:lt.usd(t.total_calculado.raw-t.subtotal_descontado.raw).str}),this.totals.push({title:"Valor Total",value:t.total_calculado.str}),this.totals.push({title:"Retenido",value:t.retenido.str}),this.totals.push({title:"Total Final",value:t.monto_final.str}),s}}),props:{invc:{type:Object,required:!0,default:function(){return{codigo:9999,ruc_cedula:"34-4545",nombre:"asdf asdf asdf asdf",telefono:"23452345",direccion:"asdfasdf",distribuidor:"si",retencion:"no",tipo_de_documento:"RUC"}}}}},Za=Ha,Xa=(n("48bb"),Object(I["a"])(Za,Ga,Ka,!1,null,"b780b8b0",null));Xa.options.__file="Retrieve.vue";var ti=Xa.exports,ei=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isUpdating,canCancel:!0},on:{"update:active":function(e){t.isUpdating=e}}}),t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.invc},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Bottle")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])])],1)],1)},ni=[],si=(console.log,{props:["invc"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(N["c"])("bottle",{enums:"getEnums"}),Object(N["d"])("bottle",{isUpdating:"isUpdating"}),{formUid:function(){return"pers_".concat(this.invc.codigo)},typesId:function(){var t=this.enums.DocTypeLookup,e=[];return Object.keys(t).forEach(function(n){var s=t[n];e.push({name:s,value:n,id:n,label:s})}),e}}),methods:Object(A["a"])({},Object(N["b"])("bottle",{saveForm:"saveForm"}))}),ai=si,ii=(n("4d3c"),Object(I["a"])(ai,ei,ni,!1,null,null,null));ii.options.__file="Update.vue";var oi=ii.exports,ri=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.values?n("code",{staticClass:"my-form my-form--code",domProps:{textContent:t._s(t.values)}}):n("formulate",{staticClass:"my-form",attrs:{name:t.formUid,initial:t.permissionsField},on:{submit:t.saveForm}},[n("formulate-element",{attrs:{name:"codigo",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",[t._v(t._s(t.invc.nombre))]),n("h5",[t._v("Sus Permisos por Recurso")]),n("div",{staticClass:"columns is-mobile is-multiline is-centered"},[t._l(t.resources,function(e){return n("div",{staticClass:"column"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v(t._s(e))]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:e,type:"select",initial:"0",options:t.levels}})],1)])}),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],2)])],1)],1)},ci=[],li=console.log,ui={props:["invc"],data:function(){return{values:!1}},computed:Object(A["a"])({},Object(N["c"])("bottle",{enums:"getEnums"}),{permissionsField:function(){return li("xxxxxxxxxxxxxxxxxxx this.invc xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"),li(this.invc),li(this.invc.permissions),this.invc.permissions?this.invc.permissions:{}},formUid:function(){return"pers_".concat(this.invc.codigo)},levels:function(){return We.options},resources:function(){return li("Resources"),li(cn),cn}}),methods:Object(A["a"])({},Object(N["b"])("bottle",{saveForm:"saveForm"}))},di=ui,mi=(n("fa42"),Object(I["a"])(di,ri,ci,!1,null,null,null));mi.options.__file="Permissions.vue";var vi=mi.exports,pi={name:"RUDcards",props:["id","distributor"],data:function(){return{activeSubTab:0}},components:{"bottle-record":ti,"bottle-update":oi,"bottle-auth":vi},methods:{canAlter:function(){return this.$can("alter","bottle")},canAssign:function(){return this.$can("assign","bottle")}},computed:Object(A["a"])({},Object(N["c"])("bottle",{p:"getBottle"}))},fi=pi,bi=Object(I["a"])(fi,Va,za,!1,null,null,null);bi.options.__file="RUDcards.vue";var hi=bi.exports,gi=console.log,Ci={name:"BottleList",props:{tst:"passed in with props"},data:function(){var t=[];return{anObj:{tst:"passed in as data"},hasMobileCards:!1,isFullPage:!1,isEmpty:!1,defaultOpenedDetails:[4358],selected:t[1],columnSelectorOpen:!1}},components:{"bottle-detail":hi},computed:Object(A["a"])({},Object(N["c"])("bottle",{bottles:"list",columns:"getColumns"}),Object(N["c"])({loggedIn:"isAuthenticated"}),Object(N["d"])("bottle",{isLoadingList:"isFetchingList",isUpdating:"isUpdating",isCreating:"isCreating"}),{formattedBottles:function(){return this.bottles.map(function(t){var e={};return Object.entries(t).forEach(function(t){var n=Object(ae["a"])(t,2),s=n[0],a=n[1];e[s]=a.str||a}),e})},isBusy:function(){return this.isLoadingList||this.isUpdating||this.isCreating}}),methods:Object(A["a"])({},Object(N["b"])(["handle401","notifyUser"]),Object(N["b"])("bottle",{setColumns:"setColumns"}),{onFetchBottles:function(){var t=this;gi(" * * Try to fetch bottles * *"),ws()().interval(100).times(20).condition(function(){return!Qn.state.isFetchingList&&!fs.state.isFetchingList}).done(function(){return t.fetchBottles()})}})},wi=Ci,_i=(n("003a"),Object(I["a"])(wi,Ya,qa,!1,null,null,null));_i.options.__file="List.vue";var yi=_i.exports,xi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"dialog-window"}},[n("div",{staticClass:"container is-fluid",attrs:{id:"header"}},[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left"},[t._m(0),t._m(1),n("div",{staticClass:"level-item"},[n("b-input",{attrs:{placeholder:"codigo de envase"},on:{focus:t.seekCodigoFocus,blur:t.seekCodigoBlur},model:{value:t.seekCodigo,callback:function(e){t.seekCodigo=e},expression:"seekCodigo"}}),n("strong",[t._v(t._s(t.seekIndicator))])],1)]),n("div",{staticClass:"level-right"},[n("p",{staticClass:"level-item"},[n("strong",[t._v(t._s(t.items.length))])]),n("p",{staticClass:"level-item"},[n("a",{staticClass:"button is-danger",on:{click:t.purge}},[t._v("Purge")])])])])]),n("div",{attrs:{id:"scrollable-content"}},[n("virtual-scroller",{staticClass:"virtual-list",attrs:{"page-mode":"",items:t.items||[],"item-height":"24","content-tag":"ul"},scopedSlots:t._u([{key:"default",fn:function(e){return["planta"===e.item.data.ubicacion.toLowerCase()?n("li",{key:e.itemKey},[t._v("\n          "+t._s(e.item.data.codigo)+": Movimientos "+t._s(e.item.data.movements&&e.item.data.movements.length||"_")+" - ubicacion: Planta\n        ")]):n("li",{key:e.itemKey},[t._v("\n          "+t._s(e.item.data.codigo)+": Movimientos "+t._s(e.item.data.movements&&e.item.data.movements.length||"_")+" - ubicacion: "),n("strong",[t._v(t._s(e.item.data.ultimo))])])]}}])})],1),t._v("\n  >"+t._s(t.getRelational)+"<\n  "+t._s(t.relationalData)+"\n")])},Oi=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"level-item"},[n("p",{staticClass:"subtitle is-6 is-primary"},[n("strong",[t._v("Buscar Envase")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"level-item"},[n("p",{staticClass:"subtitle is-7"},[n("strong",[t._v("Codigo")])])])}],ki=(n("7514"),n("3b2b"),console.log),Di=console.error,Ei="codigo de envase",Pi=function(t,e){ki("\n    ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::");var n=new RegExp("^.*","gi");return e!==Ei&&(n=new RegExp("^".concat(e,".*"),"gi")),t.liveFeedStatus="finding",ki("Searching with: ".concat(n," from >").concat(e,"<")),t.$pouch.liveFind({selector:{"data.codigo":{$regex:n},"data.type":"bottle"},sort:[{"data.codigo":"asc"}]}).on("update",function(e,n){var s=e;0===s.doc.data.ultimo?t.getItems(s):t.$pouch.rel.find("aPerson",s.doc.data.ultimo).then(function(e){s.doc.data.ultimo=e.allPersons[0]&&e.allPersons[0].nombre||s.doc.data.ultimo,s.doc.data.extra=e,t.getItems(s)})}).on("ready",function(){ki("###############   Initial query complete.   ##############"),t.$pouch.rel.find("aPerson",12357).then(function(t){ki("prsn 12357"),ki(t)}),t.liveFeedStatus="listening"}).on("cancelled",function(){ki("###############   LiveFind cancelled.   ##############"),t.liveFeedStatus="idle",t.newSearch()}).on("error",function(t){Di("Oh no!",t)})},Si={data:function(){return{items:[],liveFeed:null,liveFeedStatus:"idle",seekCodigo:Ei,seekCodigoIsDirty:!1,seeking:!1,relationalData:"none"}},created:function(){this.liveFeed=Pi(this,Ei)},computed:{getRelational:function(){ki("###############   getRelational   ##############"),this.$pouch.allDocs({include_docs:!0}).then(function(t){ki("====== all Docs ======"),ki(t)}),this.$pouch.rel.find("aPerson",12347).then(function(t){ki("====== Person 12347 ======"),ki(t)})},seekIndicator:function(){return ki("###############   seekIndicator   ##############"),ki(this.seekCodigo),this.seeking?"⟳ Fetching new results":this.seekCodigoIsDirty?"... Typing":"✓ Done"}},watch:{seekCodigo:function(){ki("###############   seekCodigo   ##############"),ki(this.seekCodigo),this.seekCodigoIsDirty=!0,this.items=[],ki(this.liveFeedStatus),this.liveFeedStatus="cancelling",this.liveFeed.cancel()}},methods:{purge:function(){ki("###############   purge   ##############"),this.$pouch.rel.find("aPerson").then(function(t){ki(t)})},newSearch:Object(g["debounce"])(function(){this.seekCodigo!==Ei&&(ki("###############   newSearch   ##############"),this.seeking=!0,setTimeout(function(){ki("setTimeout"),ki(this.seekCodigo),this.seeking=!1,this.seekCodigoIsDirty=!1}.bind(this),2e3),this.liveFeed=Pi(this,this.seekCodigo))},100),getItems:function(t){var e=null;switch(t.action){case"REMOVE":ki("###############   LiveFind remove not implemented   ##############");break;case"UPDATE":e=this.items.findIndex(function(e){return e._id===t.id}),ki("###############   LiveFind update   ##############"),ki(this.items[e]),this.items[e]=t.doc,this.items=this.items.slice();break;default:this.items.push(t.doc)}},seekCodigoFocus:function(){this.seekCodigo===Ei&&(this.seekCodigo="")},seekCodigoBlur:function(){""===this.seekCodigo&&(this.seekCodigo=Ei)}}},Ii=Si,ji=(n("52be"),Object(I["a"])(Ii,xi,Oi,!1,null,null,null));ji.options.__file="Test.vue";var Ti=ji.exports,Ai=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("b-tab-item",{attrs:{label:"Bottles"}},[n("router-view",{attrs:{name:"bottlesList"}})],1),n("b-tab-item",{attrs:{visible:t.canEdit(),label:"Add Bottle"}},[n("Create")],1)],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1)],1)},Ni=[],Ri=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:t.isCreating,canCancel:!0},on:{"update:active":function(e){t.isCreating=e}}}),n("formulate",{staticClass:"my-form",attrs:{name:"createBottle"},on:{submit:t.commitForm}},[n("formulate-element",{attrs:{name:"summation",type:"hidden",placeholder:"-1"}}),n("formulate-element",{attrs:{name:"items",type:"hidden",placeholder:"-1"}}),n("article",{staticClass:"tile is-child box"},[n("h3",{staticClass:"title"},[t._v("Bottle")]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Cliente")]),n("formulate-element",{attrs:{name:"Persona",validation:"required"}},[n("autocomplete-input",{attrs:{options:t.personsId||null},model:{value:t.Persona,callback:function(e){t.Persona=e},expression:"Persona"}})],1)],1)]),n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Fecha")]),n("formulate-element",{attrs:{name:"BottleDate",validation:"required"}},[n("dateselect-input",{model:{value:t.BottleDate,callback:function(e){t.BottleDate=e},expression:"BottleDate"}})],1)],1)]),n("div",{staticClass:"column is-centered"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Descuento")]),n("formulate-element",{attrs:{name:"desc",placeholder:"0","element-classes":"resizedTextbox",validation:"isPct(desc)"}})],1)])]),n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column"},[n("label",{staticClass:"label"},[t._v("Itemes")]),n("button",{staticClass:"button is-info",on:{click:t.openModal}},[n("b-icon",{attrs:{icon:"plus"}}),n("span",[t._v("Anadir item")])],1),n("button",{staticClass:"button field is-danger",attrs:{disabled:!t.checkedRows.length},on:{click:t.dropRow}},[n("b-icon",{attrs:{icon:"trash"}}),n("span",[t._v("Borrar seleccionadas")])],1),n("b-modal",{attrs:{active:t.isComponentModalActive,"has-modal-card":""},on:{"update:active":function(e){t.isComponentModalActive=e}}},[n("detailsForm")],1),n("b-table",{attrs:{data:t.tableData,"checked-rows":t.checkedRows,checkable:""},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{label:"Codigo",numeric:""}},[t._v("\n                    "+t._s(e.row.codigo)+"\n                  ")]),n("b-table-column",{attrs:{label:"Producto/Servicio"}},[t._v("\n                    "+t._s(e.row.nombre)+"\n                  ")]),n("b-table-column",{attrs:{label:"Unidad"}},[t._v("\n                    "+t._s(e.row.unidad)+"\n                  ")]),n("b-table-column",{attrs:{label:"Valor",numeric:""}},[t._v("\n                    "+t._s(e.row.valor)+"\n                  ")]),n("b-table-column",{attrs:{label:"IVA",numeric:""}},[t._v("\n                    "+t._s(e.row.iva.str)+"\n                  ")]),n("b-table-column",{attrs:{label:"Cantidad",centered:""}},[t._v("\n                    "+t._s(e.row.cantidad)+"\n                  ")]),n("b-table-column",{attrs:{label:"Total",numeric:""}},[t._v("\n                    "+t._s(e.row.total)+"\n                  ")])]}}])},[n("template",{slot:"footer"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-offset-2 is-narrow-mobile"},[n("div",{staticClass:"box",staticStyle:{width:"125px"}},[t.retention?n("div",{class:["si"===t.retention?"":"strike-out"]},[t._v("\n                          Retencion\n                        ")]):t._e(),t.distributor?n("div",{class:["si"===t.distributor?"":"strike-out"]},[t._v("\n                          Distribuidor\n                        ")]):t._e()])]),n("div",{staticClass:"column is-5"},[n("div",{staticClass:"box"},[n("b-table",{attrs:{data:t.totals},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{width:"180"}},[t._v("\n                                "+t._s(e.row.label)+"\n                            ")]),n("b-table-column",{attrs:{numeric:""}},[t._v("\n                              "+t._s(e.row.value)+"\n                            ")])]}}])})],1)]),n("div",{staticClass:"column is-1"})])])],2),n("div",{staticClass:"control"},[n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)],1)])])],1)],1)},$i=[],Li=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[n("formulate",{staticClass:"my-form",attrs:{name:"bottleDetails"},on:{submit:t.saveForm}},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"title"},[t._v("Item")])]),n("section",{staticClass:"modal-card-body"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-four-fifths"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Producto / Servicio")]),n("formulate-element",{staticClass:"select is-small is-focused",attrs:{name:"code",type:"select",initial:"nombre",options:t.typesId}})],1)]),n("div",{staticClass:"column is-one-fifth"},[n("div",{staticClass:"control"},[n("label",{staticClass:"label"},[t._v("Cantidad")]),n("formulate-element",{attrs:{name:"qty",placeholder:"cantidad","element-classes":"resizedTextbox"}})],1)])])]),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v("Close")]),n("formulate-element",{attrs:{type:"submit",name:"Save",elementClasses:"button is-info"}})],1)])],1)},Ui=[],Mi=console.log,Fi={computed:Object(A["a"])({},Object(N["c"])("product",{products:"list",productsMap:"getProductsMap"}),{typesId:function(){Mi("%%%%%%%%%%%%%%%%%%%% CC %%%%%%%%%%%%%%%%%%"),Mi(this),Mi(this.$store.getters);var t=[],e=this.products;return e&&Object.keys(e).forEach(function(n){var s=e[n];t.push({name:s.nombre,value:s.codigo,id:s.codigo,label:"".concat(s.nombre," (").concat(s.unidad,")")})}),Mi(t),t}}),methods:Object(A["a"])({},Object(N["b"])("bottle",{saveRow:"saveRow"}),{saveForm:function(t){this.saveRow({rowNum:-1,values:t}),this.$parent.close()}})},Bi=Fi,Ji=(n("1435"),Object(I["a"])(Bi,Li,Ui,!1,null,"02e762fe",null));Ji.options.__file="Details.vue";var Qi=Ji.exports,Yi=console.log,qi=(console.error,{props:["pers"],components:{detailsForm:Qi,"autocomplete-input":ua,"dateselect-input":ba},created:function(){this.persons&&this.persons.length>0&&this.productsMap&&Object.keys(this.productsMap).length>0&&this.products&&this.products.length>0||this.$router.push({name:"home"})},data:function(){var t=[];return{totals:t,isComponentModalActive:!1,checkedRows:[],retention:null,distributor:null,myDate:new Date,formats:{title:"MMMM / YYYY",weekdays:"W",navMonths:"MMM",input:["YYYY-MM-DD","YYYY/MM/DD"],dayPopover:"L",data:["L","YYYY-MM-DD","YYYY/MM/DD"]}}},computed:Object(A["a"])({},Object(N["c"])("bottle",{enums:"getEnums"}),Object(N["c"])("product",{products:"list",productsMap:"getProductsMap"}),Object(N["c"])("person",{persons:"list",getPerson:"getPerson"}),Object(N["d"])("bottle",{isCreating:"isCreating",formRows:"formRows"}),Object(d["mapModels"])({Persona:"createBottle/Persona",BottleDate:"createBottle/BottleDate"}),{tableData:function(){var t=this,e=[],n=this.$store.state;if(n.values.createBottle){var s=n.values.createBottle;s.Persona=s.Persona||"(0) no one",s.BottleDate=s.BottleDate||new Date;var a=[{codigo:"codigo",nombre:"nombre",unidad:"unidad",iva:"iva",valor:"$0.00",cantidad:0,total:"$0.00"}];Yi("\n\n\n          tableData() ----------------------------"),Yi(this.productsMap);var i=s.Persona.match(/\(([^)]+)\)/)[1],o=this.getPerson(i);this.retention=o&&o.retencion||null,this.distributor=o&&o.distribuidor||null,this.totals=[];var r=0,c=0,l=0,u={distributor:this.distributor,person:i,discountPct:0,iva0:0,iva12:0,subtotal:0,discount:0,retention:0,total:0};if(this.products.length<1)return a;if(this.formRows.row.length<1)return a;if(this.formRows.row[0].code<0)return a;this.formRows.row.forEach(function(n){Yi("row"),Yi(n);var s=t.productsMap[n.code];Yi(s.porcentaje.raw),t.distributor&&"si"===t.distributor?(r=s.valor_distribuidor.str,c=s.valor_distribuidor.raw,l=lt.percent(s.valor_distribuidor.raw/s.valor.raw)):(r=s.valor.str,c=s.valor.raw,l=lt.percent(1));var a=c*n.qty;Yi(s.iva);var i=0===s.iva.raw?a:0,o=s.iva.raw>0?a:0;u.iva0+=i,u.iva12+=o,u.subtotal+=i+o,e.push({codigo:n.code,nombre:s.nombre,unidad:s.unidad,discount:l,iva:s.iva,valor:r,cantidad:n.qty,total:lt.usd(c*n.qty).str})}),Yi("rows"),Yi(e),u.discountPct=s&&s.desc||0,u.discount=u.discountPct/100*u.subtotal,u.valor=u.subtotal-u.discount,u.iva=.12*u.valor,u.total=u.valor+u.iva,u.final=u.total,u.iva0>0&&this.totals.push({label:"Subtotal IVA  0%",value:lt.usd(u.iva0).str}),this.totals.push({label:"Subtotal IVA 12%",value:lt.usd(u.iva12).str}),this.totals.push({label:"Descuento Especial",value:lt.usd(u.discount).str}),this.totals.push({label:"Valor",value:lt.usd(u.valor).str}),this.totals.push({label:"IVA",value:lt.usd(u.iva).str}),this.totals.push({label:"Valor Total",value:lt.usd(u.total).str}),u.final=u.total,"si"===this.retention&&(u.retention=.01*u.total,u.final=u.total-u.retention,this.totals.push({label:"Retenido",value:lt.usd(u.retention).str})),this.totals.push({label:"Total Final",value:lt.usd(u.final).str}),Yi("summation.iva0 ".concat(u.iva0)),Yi("summation.iva12 ".concat(u.iva12)),Yi("summation.discountPct ".concat(u.discountPct)),Yi("summation.discount ".concat(u.discount)),Yi("summation.valor ".concat(u.valor)),Yi("summation.iva ".concat(u.iva)),Yi("summation.total ".concat(u.total)),Yi("summation.retention ".concat(u.retention)),Yi("summation.final ".concat(u.final)),s.summation=u,s.items=e,Yi(s),Yi(this.$store),Yi(e)}return e},personsId:function(){Yi("%%%%%%%%%%%%%%%% personsId %%%%%%%%%%%%%%%%%% "),Yi(this);var t=[],e=this.persons;return e&&(Yi("prsns"),Object.keys(e).forEach(function(n){var s=e[n];t.push({value:s.codigo,label:"".concat(s.nombre)})})),Yi(t),{list:t,data:function(t){return"(".concat(t.value,") ").concat(t.label)}}}}),methods:Object(A["a"])({},Object(N["b"])("bottle",{saveForm:"saveForm"}),{openModal:function(t){t.preventDefault(),this.isComponentModalActive=!0},dropRow:function(t){var e=this;this.checkedRows.forEach(function(t){e.formRows.row.forEach(function(n,s){n.code===t.codigo&&n.code===t.codigo&&e.formRows.row.splice(s,1)})}),Yi(this.checkedRows),t.preventDefault()},commitForm:function(t){this.saveForm(t)},setItem:function(t){Yi("Item ".concat(t.qty," of ").concat(t.code))}})}),Vi=qi,zi=(n("f021"),Object(I["a"])(Vi,Ri,$i,!1,null,"07a38249",null));zi.options.__file="CreateBottle.vue";var Gi=zi.exports,Ki=console.log,Wi={name:"Bottle",components:{Create:Gi},computed:Object(A["a"])({},Object(N["c"])("bottle",{currentTab:"getCurrentTab"}),{activeTab:{get:function(){return dc.state.bottle.currentTab},set:function(t){return dc.dispatch("bottle/setCurrentTab",t)}}}),methods:Object(A["a"])({canEdit:function(){return this.$can("comment","bottles/list")},qtst:function(){Ki(" ------- Quick Test -------"),this.onCreateBottle()}},Object(N["b"])("bottle",{createBottle:"create",setTab:"setCurrentTab"}))},Hi=Wi,Zi=Object(I["a"])(Hi,Ai,Ni,!1,null,null,null);Zi.options.__file="Layout.vue";var Xi=Zi.exports,to=[{meta:"Codigo",label:"COD",field:"codigo",centered:!1,visible:!0,width:5,numeric:!0,type:"integer",usage:"rw",idx:0},{meta:"Fecha",label:"FECH",field:"fecha",centered:!0,visible:!0,width:"10",numeric:!1,type:"date",usage:"rw",idx:1},{meta:"Estado",label:"ESTS",field:"estado",centered:!0,visible:!1,width:10,numeric:!1,type:"text",usage:"rw",idx:2},{meta:"Codigo Cliente",label:"CCLI",field:"codigo_cliente",centered:!0,visible:!0,width:6,numeric:!1,type:"foreignKey1",usage:"rw",idx:3},{meta:"Distribuidor",label:"DIST",field:"distribuidor",centered:!0,visible:!0,width:4,numeric:!1,type:"text",usage:"rw",idx:4},{meta:"Descuento Especial",label:"DESC",field:"descuento_especial",centered:!1,visible:!1,width:12,numeric:!0,type:"percent",usage:"rw",idx:5},{meta:"Lista de Items",label:"ITMS",field:"lista_de_items",centered:!0,visible:!1,width:4,numeric:!0,type:"JSON1",usage:"rw",idx:6},{meta:"Subtotal IVA 12%",label:"IV12",field:"subtotal_iva_12",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:7},{meta:"Subtotal IVA 0%",label:"IV00",field:"subtotal_iva_0",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:8},{meta:"Subtotal Descontado",label:"STDC",field:"subtotal_descontado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:9},{meta:"Total Calculado",label:"TOTL",field:"total_calculado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:10},{meta:"Retenido",label:"RETN",field:"retenido",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:11},{meta:"Monto Final",label:"MNTO",field:"monto_final",centered:!1,visible:!0,width:12,numeric:!0,type:"usd",usage:"rw",idx:12},{meta:"Total Cobrado",label:"COBR",field:"total_cobrado",centered:!1,visible:!1,width:12,numeric:!0,type:"usd",usage:"rw",idx:13}],eo=void 0,no=console.log,so=[{name:Ne,path:"list",components:{bottlesList:yi}}],ao=[].concat(so),io=[{name:Re,path:"bottles",component:Xi,children:ao},{name:$e,path:"bottle/:id",component:ti},{name:Ae,path:"bottles/test",component:Ti}];R["client"].interceptors.request.use(function(t){var e=t,n=window.ls.get(V.tokenName);return null!=n&&(e.headers.Authorization="JWT ".concat(n)),e},function(t){return no("request failed"),Promise.reject(t)});var oo={processPersonFK:function(t){var e=Qn.state.entities[t];return e?e.nombre:"Usuario #".concat(t)},processDetailsJSON:function(t){if(!fs.state.entities)return t;if(Object.keys(fs.state.entities).length<1)return t;try{return JSON.parse(t.replace(/'/g,'"')).details.filter(function(t){return t[0]>0}).map(function(t){return[fs.state.entities[t[0]],t[1],t[2]]})}catch(e){return t}}},ro="codigo",co="bottle",lo=$()({resource:co,idAttribute:ro,urlRoot:"".concat(V.server),client:R["client"],state:{columns:to,currentTab:0,enums:{},paginator:{s:1,c:1e4},formRows:{row:[]}},actions:{setColumns:function(t,e){var n=t.commit;window.lgr.info("Bottle.index --\x3e actions.setColumns"),no(e),n("tableColumns",e)},setCurrentTab:function(t,e){var n=t.commit;window.lgr.info("Bottle.index --\x3e actions.setCurrentTab -- ".concat(e)),n("tab",e)},setEnums:function(t,e){var n=t.commit;window.lgr.info("Bottle.index --\x3e actions.setEnums"),n("enums",e)},updLocal:function(t,e){var n=t.commit;no("uuuuuuu Update local record uuuuuuuuuu"),no("".concat(e.data.mode," ").concat(e.data.store," ").concat(e.id)),no(e.data.data),n("bottle",{id:e.id,data:e.data.data})},newLocal:function(t,e){t.dispatch;no("uuuuuuu Append new local record uuuuuuuuuu"),no("".concat(e.data.mode," ").concat(e.data.store))},saveRow:function(t,e){no("\n\n        Saving row......................");var n=t.rootGetters["product/getProduct"](e.values.code);no(n),no(e.values),t.commit("appendItemRow",e.values)},saveForm:function(t,e){var n=t.dispatch;window.lgr.info("Bottle.index --\x3e actions.saveForm"),no("unununu save form ununununun"),no(e),no(eo);var s=e.items.map(function(t){return[t.codigo,parseInt(t.cantidad,10),t.discount.raw]}),a={data:{mode:"post",store:"bottle",data:{fecha:lt.date(e.BottleDate),estado:"REG",codigo_cliente:e.summation.person,distribuidor:e.summation.distributor,descuento_especial:lt.percent(e.summation.discountPct/100).raw,lista_de_items:JSON.stringify({details:s}).split('"').join("'"),subtotal_iva_12:lt.usd(e.summation.iva12).raw,subtotal_iva_0:lt.usd(e.summation.iva0).raw,subtotal_descontado:lt.usd(e.summation.valor).raw,total_calculado:lt.usd(e.summation.total).raw,retenido:lt.usd(e.summation.retention).raw,monto_final:lt.usd(e.summation.final).raw,total_cobrado:0}}};no("@@@@@@@@@@ pkge @@@@@@@@"),no(a),n("newLocal",a),n("create",a)},backToListTab:function(t){var e=t.getters;t.dispatch;dc.dispatch("bottle/fetchList",{customUrlFnArgs:e.getPaginator}),dc.dispatch("bottle/setCurrentTab",0)}},getters:{getCurrentTab:function(t){return t.currentTab},getColumns:function(t){return t.columns},getBottles:function(t){return t.list},getEnums:function(t){return t.enums},getPaginator:function(t){return t.paginator},getBottle:function(t){return function(e){return t.entities[e]}}},mutations:{tab:function(t,e){window.lgr.debug("Bottle.index --\x3e mutations.tab -- ".concat(e)),t.currentTab=e},bottle:function(t,e){no("".concat(e.id," = ").concat(e.data.codigo,"/").concat(e.data.nombre)),t.entities[e.id]=e.data},appendItemRow:function(t,e){(!t.formRows.row||!t.formRows.row[0]||t.formRows.row[0].code<0)&&(t.formRows.row=[]),t.formRows.row.push(e)},enums:function(t,e){t.enums=e},tableColumns:function(t,e){window.lgr.debug("Bottle.index --\x3e mutation.tableColumns"),t.columns=e}},customUrlFn:function(t,e){no(V.server),no("using paginator --\x3e ".concat(e));var n=t?"/".concat(t):"",s=e?"s=".concat(e.s,"&c=").concat(e.c):"s=0&c=0";no("using customUrlFn( ".concat(n,", ").concat(s," )")),no("URI :: ".concat(V.server,"/api/").concat(co).concat(n,"?").concat(s));var a="".concat(V.server,"/api/").concat(co).concat(n,"?").concat(s);return a},onCreateSuccess:function(){dc.dispatch("bottle/backToListTab"),window.lgr.info("Bottle.index --\x3e mutation.onCreateSuccess OK!")},onUpdateSuccess:function(){dc.dispatch("bottle/backToListTab"),window.lgr.info("Bottle.index --\x3e mutation.onUpdateSuccess OK!")},parseSingle:function(t){no("parseSingle"),no(t.data),no(dc.state.bottle.entities[t.data.itemID]);var e={};return e[ro]=t.data.itemID,Object.assign({},t,{data:e})},parseList:function(t){var e=t.data[co],n=e.data,s=e.titles,a=e.meta,i=e.enums,o=ct(s),r=n.map(function(t,e){var n=t,s={};return a.forEach(function(t,e){n[e]=lt[t.type](n[e],{foreignKey1:{fn:oo.processPersonFK,vl:n[e]},JSON1:{fn:oo.processDetailsJSON,vl:n[e]}})}),n.forEach(function(t,e){s[o[e]]=t}),s});return no(" * * Parsed bottles data * * "),no("result"),no(r),dc.dispatch("bottle/setEnums",i.StatusLookup),no(" - - - - - - - - - -  Parsed bottle list  - - - - - - - - - - "),Object.assign({},t,{data:r,columns:a,enums:Object(bs["a"])(i)})}}),uo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar is-transparent",staticStyle:{"background-color":"transparent"}},[n("div",{staticClass:"navbar-brand"},[n("router-link",{attrs:{to:{name:"home"}}},[n("img",{attrs:{src:t.logo,alt:"Iridium Blue Logo"}}),n("span",{staticStyle:{"font-family":"'Advent Pro'","font-size":"48px"},attrs:{"data-cyp":"appTitle"}},[t._v("iridium blue")])]),t._m(0)],1),n("div",{staticClass:"navbar-menu burger-bar",attrs:{id:"burgerBar"}},[n("div",{staticClass:"navbar-start"},[n("Shop"),n("Distributor"),n("Admin"),n("Tests")],1),n("div",{staticClass:"navbar-end"},[n("div",{staticClass:"navbar-item"},[n("div",{staticClass:"field is-grouped"},[n("Authentication")],1)])])])])},mo=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-burger burger",attrs:{id:"burger","data-target":"burgerBar"}},[n("span"),n("span"),n("span")])}],vo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isKnown&&t.isHere?n("div",[n("a",{staticClass:"button is-small",class:t.highLightAdmin,attrs:{"data-cyp":"logOut"},on:{click:t.signOut}},[n("span",{attrs:{name:"icon"}},[n("icon",{attrs:{name:"sign-out-alt"}})],1),t._v(" "+t._s(t.$t("label.signout"))+", "+t._s(t.user)+"\n    ")])]):n("div",[t._v("\n     \n    "),n("a",{staticClass:"button is-small",attrs:{"data-cyp":"logIn"},on:{click:t.logIn}},[n("icon",{attrs:{name:"sign-in-alt"}}),t._v(" "+t._s(t.$t("label.signin"))+"\n    ")],1)])])},po=[],fo=console.log,bo={name:"auth",data:function(){return{tkn:null,axStkn:"unused",isActive:"unused"}},beforeUpdate:function(){this.$store.getters.permissions&&this.access!==this.$store.getters.permissions&&(this.access=this.$store.getters.permissions)},created:function(){var t=this;window.ls.on(V.activityName,function(e){window.lgr.warn("Auth.vue :: Activity updated :: ".concat(e)),t.setActivity(e)}),window.ls.on(V.authName,function(e){fo("\n  ???????????????????\n   Do we ever get here?\n   Authentication vm.created() localStore onChange event\n  ???????????????????"),window.lgr.warn("Auth.vue :: Auth updated :: ".concat(e)),t.setAuth(e)}),this.axStkn=window.ls.get(V.tokenName,0),window.ls.on(V.tokenName,function(e){window.lgr.warn("Auth.vue :: New token value in local store :: ".concat(e)),t.keepTkn({token:e,ability:t.$ability})})},computed:Object(A["a"])({highLightAdmin:function(){return"admin"===this.$store.getters.accessLevel.toString()?"is-warning":""}},Object(N["c"])({jwt:"axsToken",isHere:"isActive",isKnown:"isAuthenticated",user:"nameUser",roles:"permissions",priv:"accessLevel"})),methods:Object(A["a"])({},Object(N["b"])(["keepTkn","logIn","logOut","setActivity","setAuth"]),{signOut:function(){this.logOut(),this.$router.push({name:"home"})},signIn:function(){this.logIn(),window.lgr.info("Auth.vue :: signin '[".concat(this.access,"]'"))}})},ho=bo,go=ho,Co=(n("5582"),Object(I["a"])(go,vo,po,!1,null,null,null));Co.options.__file="Authentication.vue";var wo=Co.exports,_o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable",on:{click:t.shutBurger}},[n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"start"}}},[t._v("\n    Shop\n  ")]),n("div",{staticClass:"navbar-dropdown is-boxed"},[n("router-link",{staticClass:"navbar-item",style:t.canOpen("invoices/list"),attrs:{to:{name:"invoices/list"}}},[t._v("\n      Invoicing\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("products/list"),attrs:{to:{name:"products/list"}}},[t._v("\n      Products\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"},event:""}},[t._v("\n      Payment\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Bottle Returns\n    ")])],1)],1)},yo=[],xo=(console.log,{methods:{canOpen:function(t){return this.$can("only_view",t)?"":"color: bisque;"},shutBurger:function(){E()}}}),Oo=xo,ko=Object(I["a"])(Oo,_o,yo,!1,null,null,null);ko.options.__file="Menu.vue";var Do=ko.exports,Eo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable",on:{click:t.shutBurger}},[n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"start"}}},[t._v("\n    Admin\n  ")]),n("div",{staticClass:"navbar-dropdown is-boxed"},[n("router-link",{staticClass:"navbar-item",style:t.canOpen("persons/list"),attrs:{to:{name:"persons/list"}}},[t._v("\n      User Management\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Accounts Payable\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Accounts Receivable\n    ")])],1)],1)},Po=[],So=(console.log,{methods:{canOpen:function(t){return this.$can("only_view",t)?"":"color: bisque;"},shutBurger:function(){E()}}}),Io=So,jo=Object(I["a"])(Io,Eo,Po,!1,null,null,null);jo.options.__file="Menu.vue";var To=jo.exports,Ao=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable",on:{click:t.shutBurger}},[n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"start"}}},[t._v("\n    Tests\n  ")]),n("div",{staticClass:"navbar-dropdown is-boxed"},[n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Emails\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Profile\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("protected"),attrs:{to:{name:"protected"}}},[t._v("\n      Protected\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("classified"),attrs:{to:{name:"classified"}}},[t._v("\n      Classified\n    ")])],1)],1)},No=[],Ro=(console.log,{methods:{canOpen:function(t){return this.$can("only_view",t)?"":"color: bisque;"},shutBurger:function(){E()}}}),$o=Ro,Lo=Object(I["a"])($o,Ao,No,!1,null,null,null);Lo.options.__file="Menu.vue";var Uo=Lo.exports,Mo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable",on:{click:t.shutBurger}},[n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"start"}}},[t._v("\n    Distributor\n  ")]),n("div",{staticClass:"navbar-dropdown is-boxed"},[n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Sales\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("start"),attrs:{to:{name:"start"}}},[t._v("\n      Bonus\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("bottles/list"),attrs:{to:{name:"bottles/list"}}},[t._v("\n      Bottle Inventory\n    ")]),n("router-link",{staticClass:"navbar-item",style:t.canOpen("bottles/test"),attrs:{to:{name:"bottles/test"}}},[t._v("\n      Bottle test\n    ")])],1)],1)},Fo=[],Bo=(console.log,{methods:{canOpen:function(t){return this.$can("only_view",t)?"":"color: bisque;"},shutBurger:function(){E()}}}),Jo=Bo,Qo=Object(I["a"])(Jo,Mo,Fo,!1,null,null,null);Qo.options.__file="Menu.vue";var Yo=Qo.exports,qo=console.log,Vo={components:{Authentication:wo,Shop:Do,Admin:To,Tests:Uo,Distributor:Yo},data:function(){return{activeTab:0,logo:"".concat("/","img/WaterDrop_50.png")}},mounted:function(){qo("!!!!!!!!!!!!!!!! mounted !!!!!!!!!!!!!!!!!!"),Z.start(this.$loading),this.$store.watch(function(t){return t.dbmgr.categoriesLoading},Z.kill)},methods:{showTab:function(){return!0},shutBurger:function(){qo(E())}}},zo=Vo,Go=(n("f282"),Object(I["a"])(zo,uo,mo,!1,null,"59beaf6e",null));Go.options.__file="NavBar.vue";var Ko=Go.exports,Wo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card-edge"},[n("div",{staticClass:"card"},[n("header",{staticClass:"card-header"},[t._m(0),n("div",{staticClass:"card-header-icon",attrs:{"aria-label":"more options"}},[n("button",{ref:"personsButton",class:t.PersonsButton.class,attrs:{id:"control-button"},on:{click:function(e){t.openShutPersons("toggle")}}},[n("span",{staticClass:"is-size-7"},[t._v(t._s(t.PersonsButton.text))])]),n("button",{ref:"CameraButton",class:t.CameraButton.class,attrs:{id:"control-button"},on:{click:function(e){t.openShutCamera("toggle")}}},[n("span",{staticClass:"is-size-7"},[t._v(t._s(t.CameraButton.text))])])])]),n("div",{staticClass:"card-content"},[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-left"},[t._m(1),n("div",{staticClass:"level-item"},[n("autocomplete-input",{ref:"prsnPckr",attrs:{elemId:"person-picker",items:t.personPicker||null}})],1),t.autocompleteDirty?n("div",{staticClass:"level-item"},[n("a",{staticClass:"button is-small is-black is-inverted",on:{click:t.clearAutoComplete}},[t._m(2)])]):t._e()]),n("div",{staticClass:"level-right"})]),n("b-collapse",{ref:"collapsePersons",attrs:{open:!0}},[n("div",{attrs:{id:"scrollable-content"}},[n("virtual-scroller",{ref:"scroller",staticClass:"virtual-list",attrs:{items:t.items||[],"type-field":"type","item-height":"24","content-tag":"table","page-mode":""},scopedSlots:t._u([{key:"default",fn:function(e){return["chosen"===e.item.type?n("tr",{key:e.itemKey,staticClass:"chosen"},[n("td",{staticClass:"tag is-info persons",on:{click:function(n){t.picked(e)}}},[t._v("\n                      "+t._s(e.item.data.nombre)+" -  \n                      "),n("span",{staticClass:"italic"},[t._v("   "+t._s(e.item.data.email))])])]):t._e(),"person"===e.item.type?n("tr",{key:e.itemKey,staticClass:"person"},[n("td",{staticClass:"persons",on:{click:function(n){t.picked(e)}}},[t._v("\n                      "+t._s(e.item.data.nombre)+" -  \n                      "),n("span",{staticClass:"italic"},[t._v("   "+t._s(e.item.data.email))])])]):t._e()]}}])})],1)])],1),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter",attrs:{id:"drag-column"}},[n("hr"),n("nav",{staticClass:"level"},[n("div",{staticClass:"tags has-addons level-item has-text-centered"},[n("span",{staticClass:"tag is-dark"},[t._v("nosotros")]),n("span",{staticClass:"tag is-outlined tag-inventory"},[n("strong",[t._v(t._s(t.currentUser.nombre||"_____"))])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered control is-small"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newInventoryBottle,expression:"newInventoryBottle"}],staticClass:"input is-small",attrs:{disabled:!t.autocompleteDirty,type:"text",placeholder:"Codigo",id:"inp-esp-envase"},domProps:{value:t.newInventoryBottle},on:{keyup:function(e){if(!("button"in e)&&13!==e.keyCode)return null;t.addNewBottle("Inventory")},focus:function(e){t.closeError(t.UNKNOWN_BOTTLE_ERROR)},input:function(e){e.target.composing||(t.newInventoryBottle=e.target.value)}}})]),n("p",{staticClass:"level-item has-text-centered control is-small"},[n("a",{staticClass:"button is-small",attrs:{disabled:!t.autocompleteDirty,id:"butt-add-inventory-bottle"},on:{click:function(e){t.addNewBottle("Inventory")}}},[t._m(3)])])]),n("div",{staticClass:"container scrollable-container"},[n("Container",{attrs:{"group-name":"1","get-child-payload":t.inventoryPayload,"should-accept-drop":t.shouldAcceptInventory},on:{drop:function(e){t.onDrop("inventory",e)}}},t._l(t.inventory,function(e){return n("Draggable",{key:e.id},[n("div",{class:e.props.className,style:e.props.style,attrs:{id:e.id}},[t._v("\n                    "+t._s(e.data)+"\n                  ")])])}))],1)]),n("div",{staticClass:"column is-one-quarter",attrs:{id:"drag-column"}},[n("hr"),t._m(4),n("div",{staticClass:"trashBin"},[n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("Container",{attrs:{"group-name":"1","should-accept-drop":t.shouldTrash},on:{drop:function(e){t.onDrop("trash",e)}}},[n("Draggable",{staticClass:"icon is-invisible"},[n("i",{staticClass:"far fa-trash-alt"})]),n("Draggable",{staticClass:"icon"},[n("i",{staticClass:"far fa-trash-alt"})])],1)],1)])]),n("div",{staticClass:"container scrollable-container"},[n("Container",{attrs:{"group-name":"1","get-child-payload":t.exchangePayload,"should-accept-drop":t.shouldAcceptExchange},on:{drop:function(e){t.onDrop("exchange",e)}}},t._l(t.exchange,function(e){return n("Draggable",{key:e.id},[n("div",{class:e.props.className,style:e.props.style,attrs:{id:e.id}},[t._v("\n                    "+t._s(e.data)+"\n                  ")])])}))],1),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered control is-small is-primary"},[n("a",{staticClass:"button is-small is-warning",attrs:{disabled:!t.autocompleteDirty,id:"butt-save-moves"},on:{click:t.saveMovements}},[t._m(5)])])])]),n("div",{staticClass:"column is-one-quarter",attrs:{id:"drag-column"}},[n("hr"),n("nav",{staticClass:"level"},[n("div",{staticClass:"tags has-addons level-item has-text-centered"},[n("span",{staticClass:"tag is-dark"},[t._v("cliente")]),n("span",{staticClass:"tag is-outlined tag-customer"},[n("strong",[t._v(t._s(t.personChosen.nombre||"_____"))])])])]),n("nav",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered control is-small"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCustomerBottle,expression:"newCustomerBottle"}],staticClass:"input is-small",attrs:{disabled:!t.autocompleteDirty,type:"text",placeholder:"Codigo",id:"inp-esp-envase"},domProps:{value:t.newCustomerBottle},on:{keyup:function(e){if(!("button"in e)&&13!==e.keyCode)return null;t.addNewBottle("Customer")},focus:function(e){t.closeError(t.UNKNOWN_BOTTLE_ERROR)},input:function(e){e.target.composing||(t.newCustomerBottle=e.target.value)}}})]),n("p",{staticClass:"level-item has-text-centered control is-small"},[n("a",{staticClass:"button is-small",attrs:{disabled:!t.autocompleteDirty,id:"butt-add-customer-bottle"},on:{click:function(e){t.addNewBottle("Customer")}}},[t._m(6)])])]),n("div",{staticClass:"container scrollable-container"},[n("Container",{attrs:{"group-name":"1","get-child-payload":t.customerPayload,"should-accept-drop":t.shouldAcceptCustomer},on:{drop:function(e){t.onDrop("customer",e)}}},t._l(t.customer,function(e){return n("Draggable",{key:e.id},[n("div",{class:e.props.className,style:e.props.style,attrs:{id:e.id}},[t._v("\n                    "+t._s(e.data)+"\n                  ")])])}))],1)])]),n("div",{staticClass:"card-image"},[t._l(t.errors,function(e){return n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[n("b-notification",{attrs:{type:"is-danger"}},[t._v("\n              "+t._s(e)+"\n            ")])],1)}),n("b-collapse",{ref:"collapseCamera",attrs:{open:!0}})],2),t._m(7),n("p",[t._v("currentUser: "+t._s(t.currentUser.id)+"\n               Bottles: "+t._s(t.currentUser.bottles&&t.currentUser.bottles.length)+" ")]),n("p",[t._v("personChosen: "+t._s(t.personChosen.id)+"\n                Bottles: "+t._s(t.personChosen.bottles&&t.personChosen.bottles.length)+" ")])])])])},Ho=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"card-header-title"},[n("span",{staticClass:"is-size-7"},[t._v("Traspaso de Envases")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"level-item"},[n("div",{staticClass:"is-small"},[t._v("Nombre de Persona")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"far fa-trash-alt"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"is-size-7"},[n("strong",[t._v("Especificar Envase")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"level"},[n("div",{staticClass:"tags level-item has-text-centered"},[n("span",{staticClass:"tag is-dark"},[t._v("Intercambio")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"is-size-7"},[n("strong",[t._v("Grabar Movimientos")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"is-size-7"},[n("strong",[t._v("Especificar Envase")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"card-footer"},[n("a",{staticClass:"card-footer-item",attrs:{href:"#"}},[t._v("Save")]),n("a",{staticClass:"card-footer-item",attrs:{href:"#"}},[t._v("Edit")]),n("a",{staticClass:"card-footer-item",attrs:{href:"#"}},[t._v("Delete")])])}],Zo=(n("55dd"),n("ca49")),Xo=n("2909"),tr=function(t,e){var n=e.removedIndex,s=e.addedIndex,a=e.payload;if(null===n&&null===s)return t;var i=Object(Xo["a"])(t),o=a;return null!==n&&(o=i.splice(n,1)[0]),null!==s&&i.splice(s,0,o),i},er=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("QrcodeReader",{on:{decode:t.onDecode,init:t.onInit}},[n("div",{staticClass:"decoded-content"},[t._v(t._s(t.content))]),n("LoadingIndicator",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},nr=[],sr=n("9a3e"),ar=(n("96cf"),n("1da1")),ir=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading-indicator"},[t._v("\n  Loading...\n")])},or=[],rr=(n("6101"),{}),cr=Object(I["a"])(rr,ir,or,!1,null,null,null);cr.options.__file="LoadingIndicator.vue";var lr=cr.exports,ur=console.log,dr={components:{LoadingIndicator:lr},data:function(){return{loading:!1}},methods:{onInit:function(){var t=Object(ar["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,e;case 4:this.$emit("success"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),"NotAllowedError"===t.t0.name?this.$emit("error","To detect and decode QR codes this page needs access to your camera"):"NotFoundError"===t.t0.name?this.$emit("error","Seems like you have no suitable camera on your device."):"NotSupportedError"===t.t0.name?this.$emit("error","Seems like this page is served in non-secure context. Your browser doesn't support that"):"NotReadableError"===t.t0.name?this.$emit("error","Couldn't access your camera. Is it already in use?"):"OverconstrainedError"===t.t0.name?this.$emit("error","Constraints don't match any installed camera. Did you asked for the front camera although there is none?"):(this.$emit("error","UNKNOWN ERROR: ".concat(t.t0.message)),ur(t.t0));case 10:return t.prev=10,this.loading=!1,t.finish(10);case 13:case"end":return t.stop()}},t,this,[[1,7,10,13]])}));return function(e){return t.apply(this,arguments)}}()}},mr={components:{QrcodeReader:sr["QrcodeReader"]},mixins:[dr],data:function(){return{content:""}},methods:{onDecode:function(t){this.content=t}}},vr=mr,pr=(n("7b60"),Object(I["a"])(vr,er,nr,!1,null,"90722470",null));pr.options.__file="Decoder.vue";var fr=pr.exports,br=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"file-select"},[n("div",{staticClass:"select-button"},[t.value?n("span",[t._v("Selected File: "+t._s(t.value.name))]):n("span",[t._v("Select File")])]),n("input",{attrs:{type:"file"},on:{change:t.handleFileChange}})])},hr=[],gr={name:"awesomplete",data:function(){return{model:"",awesomplete:{}}},props:{placeholder:{default:"",type:String,required:!1},list:{default:"",type:Array,required:!0},classes:{default:String,type:String,required:!1}},mounted:function(){var t=this,e=this;this.$nextTick(function(){t.awesomplete=new sa.a(e.$refs.awesomplete,{minChars:3,maxItems:5,list:t.list}),t.$refs.awesomplete.focus()})}},Cr=gr,wr=Object(I["a"])(Cr,br,hr,!1,null,null,null);wr.options.__file="BaseInputText.vue";var _r=wr.exports,yr=console.log,xr=console.error,Or=function(t){var e=t;yr("\n    uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu");var n=new RegExp("^.*","gi");return e.liveFeedStatus="finding",yr("Searching with: ".concat(n)),e.$pouch.liveFind({selector:{"data.type":"person","data.nombre":{$regex:n}},sort:["data.type","data.nombre"]}).on("update",function(t,n){var s=t;e.getItems(s)}).on("ready",function(){yr("###############   Initial query complete.   ##############"),e.liveFeedStatus="listening"}).on("cancelled",function(){yr("###############   LiveFind cancelled.   ##############"),e.liveFeedStatus="idle"}).on("error",function(t){xr("Oh no!",t)})},kr=[],Dr="Lista de Envases",Er={class:"button is-small is-info",text:"Ver Personas"},Pr={class:"button is-small is-info is-outlined",text:"Esconder Personas"},Sr={class:"button is-small is-info",text:"Ver QR"},Ir={class:"button is-small is-info is-outlined",text:"Esconder QR"},jr=99999999,Tr={id:jr,data:"Rastrear envases aqui\n  ",src:"",props:{className:"card",style:{marginLeft:"10px",marginRight:"10px",marginTop:"10px",paddingTop:"20px",backgroundColor:"#fffff0",textAlign:"center"}}},Ar=function(t,e){t.map(function(t,n){return e.includes(t.id)?n:-1}).sort(function(t,e){return-1*(t-e)}).forEach(function(e){return t.splice(e,1)}),t.findIndex(function(t){return t.id===jr})<0&&t.push(Tr)},Nr="Error: Envase desconocido!",Rr={name:"bottle-tasks",data:function(){return{thoseChosen:[],personChosen:{name:null,id:"------",bottles:[]},selectedDemo:"qrDecode",PersonsButton:Pr,CameraButton:Ir,autocompleteDirty:!1,personPicker:{list:[],data:function(t){return{label:"[".concat(t.pos,"] ").concat(t.label),value:t.pos}}},items:kr,inwardOutward:"Recibir de",newCustomerBottle:"",newInventoryBottle:"",PLACEMARKER:Dr,UNKNOWN_BOTTLE_ERROR:Nr,bottles:[Dr],errors:[],currentUser:{id:null,bottles:[]},inventory:[],customer:[],exchange:[Tr],trash:[Tr],fruits:[{codigo:101,nombre:"Apple"},{codigo:102,nombre:"Banana"},{codigo:103,nombre:"Orange"},{codigo:104,nombre:"Mango"},{codigo:105,nombre:"Pear"},{codigo:106,nombre:"Peach"},{codigo:107,nombre:"Grape"},{codigo:108,nombre:"Tangerine"},{codigo:109,nombre:"Pineapple"}]}},methods:{personPicked:function(){var t=this;this.$nextTick(function(){yr("%%%%%%%%%%%%%%%% person picked %%%%%%%%%%%%%%%%%% "),yr(t.$refs.prsnPckr.$el),yr(t.$refs.prsnPckr.$el._value-1);var e=t.$refs.prsnPckr.$el._value-1;yr(e);var n=Object(g["cloneDeep"])(t.items[e]);yr(t.items[e].data.nombre),yr(n.data.nombre),yr(Object(g["cloneDeep"])(t.items[e]).data.nombre),t.$refs.prsnPckr.$el.value=n.data.nombre,t.picked({itemIndex:e})})},clearAutoComplete:function(){var t=this;this.autocompleteDirty=!1,this.thoseChosen.forEach(function(e){t.items[e].type="person"}),this.$refs.prsnPckr.$el.value="",this.personChosen.bottles=[],this.personChosen.nombre=null,this.customer=[],this.exchange=[],this.exchange.push(Tr),this.openShutPersons("open")},addNewBottle:function(t){var e=this;yr("%%%%%%%%%%%%%%%% add new bottle %%%%%%%%%%%%%%%%%% ");var n=this["new".concat(t,"Bottle")].toUpperCase();yr(this.inventory),yr(this.customer),yr(this.exchange),this.$pouch.find({selector:{"data.type":"bottle","data.codigo":n}}).then(function(s){if(s.docs.length<1)return e.openError(Nr),void(e["new".concat(t,"Bottle")]=null);var a=e.inventory.filter(function(t){return t.data===n}),i=e.customer.filter(function(t){return t.data===n}),o=Object(ae["a"])(s.docs,1),r=o[0];if(a.length>0){var c=Object(ae["a"])(a,1);r=c[0],yr("move from inventory ".concat(JSON.stringify(a,null,2))),e.inventory=e.inventory.filter(function(t){return t!==a[0]})}else if(i.length>0){var l=Object(ae["a"])(i,1);r=l[0],yr("move from customer ".concat(JSON.stringify(i,null,2))),e.customer=e.customer.filter(function(t){return t!==i[0]})}else yr("add to exchange ".concat(JSON.stringify(r,null,2))),r={id:parseInt(r.data.id,10),data:r.data.codigo,src:"#".concat(t.slice(0,1)),props:{className:"draggable-item draggable-".concat(t.toLowerCase()," dashed"),style:{textAlign:"center",backgroundColor:"Inventory"===t?"#c0ebfd":"#f0fff0"}}};e.exchange.push(r),e.exchange=e.exchange.filter(function(t){return 99999999!==t.id})}).catch(function(t){e.openError("Error: Búsqueda fallida! (".concat(t,")"))}),this.bottles[0]===this.PLACEMARKER?this.bottles.splice(0,1,n):this.bottles.push(n)},saveMovements:function(){var t=this;yr("%%%%%%%%%%%%%%%% save movements %%%%%%%%%%%%%%%%%% ");var e=parseInt(this.personChosen.idib,10),n=parseInt(this.currentUser.id,10),s="Request",a="BottleExchange",i=this.exchange.filter(function(t){return t.src.match(/C/)}),o=i.map(function(t){return t.id}),r=this.exchange.filter(function(t){return t.src.match(/I/)}),c=r.map(function(t){return t.id});if(o.length>0){var l=this.$pouch.rel.makeDocID({type:s,id:Kt(e,"I")}),u=this.$pouch.rel.parseDocID(l),d={_id:l,data:{id:u.id,type:s,handler:a,inOut:"in",status:"new",bottles:o,customer:e,inventory:n}};yr("movement in ".concat(JSON.stringify(d,null,2))),this.$pouch.put(d).then(function(e){yr("---------- Saved movement IN --------"),Ar(t.exchange,o),i.forEach(function(e){return t.inventory.push(e)}),i.length=0,yr(e)})}if(c.length>0){var m=this.$pouch.rel.makeDocID({type:s,id:Kt(e,"O")}),v=this.$pouch.rel.parseDocID(m),p={_id:m,data:{id:v.id,type:s,handler:a,status:"new",inOut:"out",bottles:c,customer:e,inventory:n}};yr("movement out ".concat(JSON.stringify(p,null,2))),this.$pouch.put(p).then(function(e){yr("---------- Saved movement OUT --------"),Ar(t.exchange,c),r.forEach(function(e){return t.customer.push(e)}),r.length=0,yr(e)})}this.$pouch.rel.find("Movement").then(function(t){yr("wwwwwwwwwwwwwwwww Result wwwwwwwwwwwwwww"),yr(t)})},dropBottle:function(t){this.bottles.splice(this.bottles.indexOf(t),1)},dropBottles:function(){this.bottles=[this.PLACEMARKER]},openShutPersons:function(t){var e=this.$refs.collapsePersons.isOpen;switch(this.$refs.personsButton.blur(),t){case"open":if(e)return void(this.PersonsButton=Pr);break;case"shut":if(!e)return void(this.PersonsButton=Er);break;default:}this.PersonsButton=e?Er:Pr,this.$refs.collapsePersons.toggle()},openShutCamera:function(t){var e=this.$refs.collapseCamera.isOpen;switch(this.$refs.CameraButton.blur(),t){case"open":if(e)return void(this.CameraButton=Ir);break;case"shut":if(!e)return void(this.CameraButton=Sr);break;default:}this.CameraButton=e?Sr:Ir,this.$refs.collapseCamera.toggle()},onDrop:function(t,e){this[t]=tr(this[t],e),"exchange"===t&&(yr("onDrop"),this.exchange.length>1?this.exchange=this.exchange.filter(function(t){return 99999999!==t.id}):this.exchange.length<1&&this.exchange.push(Tr),yr(e))},inventoryPayload:function(t){return this.inventory[t]},exchangePayload:function(t){return this.exchange[t]},customerPayload:function(t){return this.customer[t]},trashPayload:function(t){return this.trash[t]},shouldAcceptCustomer:function(t,e){return yr("shouldAcceptCustomer"),yr(e),"C"===e.src&&this.autocompleteDirty},shouldAcceptInventory:function(t,e){return yr("shouldAcceptInventory"),yr(e),"I"===e.src&&this.autocompleteDirty},shouldAcceptExchange:function(t,e){return yr("shouldAcceptExchange"),yr(e),this.autocompleteDirty},shouldTrash:function(t,e){return yr("shouldTrash"),yr(e.src),"#"===e.src.slice(0,1)},picked:function(t){var e=this;yr("picked ".concat(JSON.stringify(t,null,2))),yr(t);var n=Object(g["cloneDeep"])(this.items[t.itemIndex]);if(this.autocompleteDirty=!0,this.personChosen.nombre===n.data.nombre)this.personChosen.nombre=null,this.items[t.itemIndex].type="person",this.thoseChosen=[],this.openShutPersons("open");else{this.thoseChosen.forEach(function(t){e.items[t].type="person"}),this.thoseChosen.push(t.itemIndex),this.items[t.itemIndex].type="chosen",this.personChosen=n.data,this.$refs.prsnPckr.setValue(this.personChosen.nombre);var s=parseInt(this.personChosen.idib,10),a=this.$pouch.rel.makeDocID({type:"aPerson",id:s});yr(a),this.$pouch.liveFind({selector:{_id:{$eq:a}}}).on("update",function(){yr("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Chosen User Updated ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"),e.$pouch.rel.find("aPerson",s).then(function(t){yr("\n              !!!!!!!!!!!!!!!!  [ picked ]  !!!!!!!!!!!!!!!!!!\n              ".concat(JSON.stringify(e.personChosen,null,2),"\n              ")),yr(t),t.allBottles?(e.customer=t.allBottles.filter(function(e){return t.allPersons[0].bottles.includes(e.id)}).map(function(t){return{id:t.id,data:t.codigo,src:"C",props:{className:"draggable-item draggable-customer ",style:{backgroundColor:"#f0fff0",textAlign:"center"}}}}),yr(e.personChosen)):(e.personChosen.bottles=[],e.customer=[])})}),this.$refs.collapsePersons.toggle(),this.openShutPersons("shut")}},getItems:function(t){var e=null,n=null,s=null,a=null,i=null;switch(t.action){case"REMOVE":yr("###############   LiveFind remove not implemented   ##############");break;case"UPDATE":a=this.$pouch.rel.parseDocID(t.id).id.toString(),e=this.items.findIndex(function(t){return t.data.idib==a}),yr("###############   LiveFind update   ##############"),i=t.doc.data,this.items[e]?this.items[e].data=i:yr("?????????????????????????????????????????????????????????????????????\n              What is wrong with ".concat(JSON.stringify(this.items,null,2),"\n              ?????????????????????????????????????????????????????????????????????")),s=i.codigo,n=this.personPicker.list.findIndex(function(t){return t.value===s});try{this.personPicker.list[n-1].value=s,this.personPicker.list[n-1].label=i.nombre}catch(t){yr("Unexpected missing list item in personPicker\n              pouchData.doc.data.codigo :: ".concat(s,"\n              personPicker.list :: ").concat(n))}break;default:this.items.push({type:"person",data:t.doc.data}),this.personPicker.list.push({pos:this.personPicker.list.length+1,value:t.doc.data.codigo,label:t.doc.data.nombre})}},openError:function(t){this.errors.push(t)},closeError:function(t){var e=this.errors.indexOf(t);this.errors.splice(e,1)},clearErrors:function(){this.errors=[]}},created:function(){this.liveFeed=Or(this)},mounted:function(){var t=this;yr("!!!!!!!!!!!!!!!! mounted !!!!!!!!!!!!!!!!!!"),this.currentUser.id=parseInt(this.$store.state.dbmgr.user.name,10),yr(this.currentUser);var e=this.$pouch.rel.makeDocID({type:"aPerson",id:this.currentUser.id});yr(e),this.$pouch.liveFind({selector:{_id:{$eq:e}}}).on("update",function(){yr("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Current User Updated ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"),t.$pouch.rel.find("aPerson",t.currentUser.id).then(function(e){yr(e),yr(e.allPersons),yr(e.allPersons.length),e.allPersons&&e.allPersons.length>0&&(t.currentUser.bottles=e.allBottles.filter(function(t){return e.allPersons[0].bottles.includes(t.id)}),t.currentUser.nombre=e.allPersons[0].nombre,t.inventory=t.currentUser.bottles.map(function(t){var e={id:t.id,data:t.codigo,src:"I",props:{className:"draggable-item draggable-inventory ",style:{backgroundColor:"#c0ebfd",textAlign:"center"}}};return e}),yr(t.currentUser))})})},components:{Container:Zo["Container"],Draggable:Zo["Draggable"],qrDecode:fr,"autocomplete-input":ua,"base-input":_r},watch:{selectedDemo:"clearErrors"},computed:{draggableItemStyle:function(t,e){return yr("\n        !!!!!!!!!!!!!!!! draggableItemStyle !!!!!!!!!!!!!!!!!!\n        "),yr(t),yr(e),"draggable-item draggable-customer"}}},$r=Rr,Lr=$r,Ur=(n("7ead"),Object(I["a"])(Lr,Wo,Ho,!1,null,"77d28cad",null));Ur.options.__file="BottleTasks.vue";var Mr=Ur.exports,Fr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("help text !!")])},Br=[],Jr={},Qr=Object(I["a"])(Jr,Fr,Br,!1,null,null,null);Qr.options.__file="BottleTasksHelper.vue";var Yr=Qr.exports,qr=console.log,Vr=[{path:"",name:"home",components:{nav_bar:Ko,default:Mr,helper:Yr}}],zr={namespaced:!0,state:{personChosen:"escoger",resetList:!1},getters:{personChosen:function(t){return t.personChosen},resetList:function(t){return t.resetList}},mutations:{setChosenPerson:function(t,e){qr("Set chosen to - ".concat(e)),t.personChosen=e},toggleDirty:function(t){qr("Toggle dirty from - ".concat(t.resetList)),t.resetList=!t.resetList}},actions:{choosePerson:function(t,e){qr("Choosing - ".concat(e)),t.commit("setChosenPerson",e)},unChooseAll:function(t){qr("UN Choosing"),t.commit("toggleDirty")}}},Gr=n("14b7"),Kr=n.n(Gr),Wr=console.log,Hr=function(t){var e=Kr.a.decode(t);return Wr(e),e},Zr=Hr,Xr=1,tc=0,ec=1,nc=0,sc="no token",ac=console.log,ic={accessToken:sc,accessExpiry:null,active:tc,authenticated:nc,nameUser:"",permissions:"",accessLevel:""},oc={axsToken:function(t){return t.accessToken},isActive:function(t){return t.active},isAuthenticated:function(t){return t.authenticated},nameUser:function(t){return t.nameUser},accessExpiry:function(t){return t.accessExpiry},accessLevel:function(t){return t.accessLevel},permissions:function(t){return t.permissions}},rc={saveToken:function(t,e){var n=e.token,s=e.payload;s&&(window.lgr.info("Auth(mutation) => Saving jwt. Permissions :: [".concat(s.permissions,"]")),ac(s.permissions),ac(t),window.ls.set(V.tokenName,n),t.accessToken=n,t.nameUser=s.name,t.permissions=s.permissions,t.accessExpiry=s.exp,t.accessLevel="Iridium Blue"===t.nameUser?"admin":"user",window.ls.set(V.authName,ec),t.authenticated=ec,window.ls.set(V.activityName,ec),t.active=Xr)},toSignedOut:function(t){window.lgr.warn("Auth(mutation) :: Requesting to sign out here"),window.ls.set(V.tokenName,null),t.accessToken=""},activity:function(t,e){window.lgr.warn("Auth(mutation) :: Changing activity state"),t.active=e,window.ls.set(V.activityName,e)},auth:function(t,e){window.lgr.warn("Auth(mutation) :: Changing authentication state"),t.authenticated=e,window.ls.set(V.authName,e)}},cc={keepTkn:function(t,e){var n=e.token,s=e.ability,a=Kr.a.decode(n);a&&(t.dispatch("dbmgr/setUserCredentials",{payload:a}),t.dispatch("dbmgr/connectToRemoteService",{payload:a}),t.dispatch("a12n/resetPermissions",{payload:a,ability:s}),t.commit("saveToken",{token:n,payload:a}))},refreshToken:function(t,e){var n=e,s=sc;ac("--------------  VALIDATE TOKEN ------------------"),ac("pyld"),ac(n),n?ac(Kr.a.decode(n)):n=sc;var a,i=0,o=1,r=2,c=null,l=null,u=null,d=null;ac("check pyld token");try{c=Zr(n),l=Kr.a.decode(n).exp,i+=o}catch(t){ac("Payload token invalid :: ".concat(t))}ac("Check stored token");try{u=window.ls.get(V.tokenName,sc),d=Kr.a.decode(t.getters.axsToken).exp,i+=r}catch(t){ac("Stored token invalid :: ".concat(t))}switch(i){case 1:ac("Committing token from payload"),s=c;break;case 2:ac("Refreshing stored token from payload"),s=u;break;case 3:a=l>d,ac("Refreshing ".concat(a?"payload token":"stored token"," from payload")),s=a?c:u;break;default:}t.commit("saveToken",s)},logIn:function(t){t.commit;var e=t.dispatch;e("setActivity",Xr),e("authenticate")},authenticate:function(t){t.commit,t.dispatch;var e="STATIC_PUB",n="";window.lgr.info("Auth(action) :: Authenticating... ".concat(e)),n="".concat(V.server).concat(V.authPath,"?mode=").concat(e);var s=Object({NODE_ENV:"production",VUE_APP_STATIC_MODE:"STATIC_PUB",VUE_APP_COUCH_PROTOCOL:"https",VUE_APP_COUCH_URI:"yourdb.yourpublic.work",VUE_APP_COUCH_NAME:"ib2018_101",BASE_URL:"/"})[V.testAuthUrlEnvVar];window.lgr.info("Auth(action) :: Faked authentication URL :: ".concat(s)),s&&(n=s),window.location.assign(n),Ol.$route.name.includes("home")||(window.lgr.info("Auth(action) :: Set return route in local storage - ".concat(V.returnRouteName,': "').concat(Ol.$route.name,'"')),window.ls.set(V.returnRouteName,Ol.$route.name))},logOut:function(t){var e=t.commit,n=t.dispatch;n("setActivity",tc),n("setAuth",nc),e("toSignedOut")},setActivity:function(t,e){var n=t.commit;n("activity",e)},setAuth:function(t,e){var n=t.commit;n("auth",e)},handle401:function(t){var e=9e5,n=(new Date).getTime()/1e3,s=t.state.accessExpiry-n;ac("sessionTime  - ".concat(e)),ac("now  - ".concat(n/1e3)),ac("exp  - ".concat(t.state.accessExpiry)),ac("remaining  - ".concat(s));var a=s>1?"expired":"remaining validity (secs): ".concat(s);window.lgr.info("Auth(action) handle401:: Token status : ".concat(a)),t.state.authenticated<1?(window.lgr.info("Auth(action) handle401:: Not logged in."),t.dispatch("logIn")):s<1?(window.lgr.info("Auth(action) handle401:: Expired token."),t.dispatch("notifyUser",{txt:"Your session expired. Logging you in again.",lvl:"is-warning"}),t.dispatch("logIn")):(window.lgr.info("Auth(action) handle401:: Wrong user??"),window.ls.storage.removeItem(V.localStorageNameSpace+V.returnRouteName))}},lc={state:ic,getters:oc,mutations:rc,actions:cc},uc=console.log;s["default"].use(N["a"]);var dc=new N["a"].Store({state:Object(A["a"])({counter:0,isDebug:!1,isError:!1,msgError:{txt:"We got failure happening",lvl:"is-warning"},axsRights:["visitor"],integrityCheck:{person:9999,product:8888,invoice:7777}},Object(d["formulateState"])()()),getters:Object(A["a"])({isDebug:function(t){return t.isDebug},isError:function(t){return t.isError},msgError:function(t){return t.msgError},theRoles:function(t){return window.lgr.debug(t.axsRights),t.axsRights},theCounter:function(t){return{cntr:t.counter,other:"okok"}},theFormData:function(){return{email:"a@b.ca",password_confirmation:"qwer",password:"qwer"}}},Object(d["formulateGetters"])()),mutations:Object(A["a"])({notifyUser:function(t,e){window.lgr.warn(e.txt),uc(t),t.msgError=e,t.isError=!0},debugMode:function(t,e){t.isDebug=e},updateIntegrityCheck:function(t,e){window.lgr.warn(e),t.integrityCheck=e},clearNotifyUser:function(t){t.msgError="",t.isError=!1},axsRole:function(t,e){window.lgr.debug(e.roles),t.axsRights=e.roles},increment:function(t){window.lgr.warn("UU"),t.counter+=1},decrement:function(t){uc("DD"),t.counter-=1},fillFormPerX:function(t){uc("QQQQQ GG QQQQQQ"),uc(t),t.values.person={email:"a@b.es",description:"qwer",name:"qwer"}},fillForm:function(t){uc("QQQQQQQQQQQ"),uc(t),t.values.registration={email:"a@b.c",password_confirmation:"qwer",password:"qwer"}}},Object(d["formulateMutations"])()),actions:{updateIntegrityCheck:function(t,e){var n=t.commit;n("updateIntegrityCheck",e)},notifyUser:function(t,e){var n=t.commit;n("notifyUser",e)},clearNotifyUser:function(t){var e=t.commit;e("clearNotifyUser")},debugMode:function(t,e){var n=t.commit;n("debugMode",e)},setAxsRole:function(t,e){var n=t.commit;n("axsRole",e)},increment:function(t){return uc("QQQQQ  increment QQQQQQ"),uc(t),t.commit("increment")},decrement:function(t){var e=t.commit;e("decrement")},fillForm:function(t){var e=t.commit;e("fillForm")}},modules:{Auth:lc,a12n:on,dbmgr:Wt,person:Qn,product:fs,invoice:Qa,bottle:lo,movement:zr}}),mc=(n("673e"),{id:"es-AR",message:{hello:"Che!"}}),vc={id:"es-419",message:{hello:"Hola!"}},pc={id:"es",sub:[vc,mc],message:{hello:"Saludos amigos!!!"},label:{signup:"Inscribirse",signin:"Ingresar",signout:"Salir"}},fc={id:"en-GB",message:{hello:"Watcha!"}},bc={id:"en-US",message:{hello:"Howdy",damned:"Thrown under a bus"}},hc={id:"en",sub:[bc,fc],message:{hello:"Hello!!!",damned:"Thrown to the wolves"},label:{signup:"Join",signin:"Log in",signout:"Log out"}},gc=[pc,hc],Cc={};gc.forEach(function(t){t.sub.forEach(function(t){Cc[t.id]=t}),Cc[t.id]=t});var wc=Cc,_c=n("8c4f"),yc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-left":"30px"}},[n("h1",[t._v("Some Protected Sections!")]),n("ol",[n("li",[n("h3",[t._v("Read-only view")]),t.$can("only_view","protected")?n("p",{staticStyle:{"margin-left":"30px"}},[t._v("\n        You are allowed to see this text.\n      ")]):t._e()]),n("li",[n("h3",[t._v("Limited Edits")]),t.$can("comment","protected")?n("p",{staticStyle:{"margin-left":"30px"}},[t._v("\n        You are allowed to make some edits.\n      ")]):t._e()]),n("li",[n("h3",[t._v("Any Edits")]),t.$can("alter","protected")?n("p",{staticStyle:{"margin-left":"30px"}},[t._v("\n        You are allowed any edits of this resource.\n      ")]):t._e()]),n("li",[n("h3",[t._v("Alter Privileges")]),t.$can("assign","protected")?n("p",{staticStyle:{"margin-left":"30px"}},[t._v("\n        You are allowed to control access to this resource.\n      ")]):t._e()])]),n("hr"),n("p",[t._v("Unprotected text")]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.$can("only_view","protected"),expression:"$can('only_view', 'protected')"}]},[t._v("Protected text!")]),t._v("\n  "+t._s(t.qtst)+"\n\n  "),n("hr"),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"home"}}},[n("icon",{attrs:{name:"arrow-circle-up"}}),t._v("\n     Home\n  ")],1),n("router-link",{staticClass:"button is-small is-link is-outlined",attrs:{to:{name:"classified"}}},[n("icon",{attrs:{name:"arrow-circle-right"}}),t._v("\n     Classified\n  ")],1)],1)},xc=[],Oc=console.log,kc={computed:{qtst:function(){var t=" ------- Quick Test -------";return Oc(t),Oc(We),Oc(this.$ability),Oc(window.ability),Oc(this.$can("alter","protected")),t}}},Dc=kc,Ec=Object(I["a"])(Dc,yc,xc,!1,null,null,null);Ec.options.__file="Protected.vue";var Pc=Ec.exports,Sc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column is-one-quarter"}),n("Container",{staticClass:"column is-one-quarter",attrs:{"group-name":"1","get-child-payload":t.sourcePayload},on:{drop:function(e){t.onDrop("source",e)}}},t._l(t.source,function(e){return n("Draggable",{key:e.id},[n("div",{staticClass:"draggable-item"},[t._v("\n        "+t._s(e.data)+"\n      ")])])})),n("Container",{staticClass:"column is-one-quarter",attrs:{"group-name":"1","get-child-payload":t.targetPayload},on:{drop:function(e){t.onDrop("target",e)}}},t._l(t.target,function(e){return n("Draggable",{key:e.id},[n("div",{staticClass:"draggable-item"},[t._v("\n        "+t._s(e.data)+"\n      ")])])})),n("div",{staticClass:"column is-one-quarter"})],1)},Ic=[],jc={name:"Groups",components:{Container:Zo["Container"],Draggable:Zo["Draggable"]},data:function(){return{source:[{id:100001,data:"IBAA001"},{id:100005,data:"IBAA005"}],target:[{id:100014,data:"IBAA014"},{id:100015,data:"CLAA015"}]}},methods:{onDrop:function(t,e){this[t]=tr(this[t],e)},sourcePayload:function(t){return this.source[t]},targetPayload:function(t){return this.target[t]}}},Tc=jc,Ac=Object(I["a"])(Tc,Sc,Ic,!1,null,null,null);Ac.options.__file="Classified.vue";var Nc=Ac.exports,Rc=(console.log,[{name:Ee,path:"protected",component:Pc},{name:Pe,path:"classified",component:Nc}]),$c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("NavBar"),n("PseudoAuthorizations"),n("router-view"),n("router-view",{attrs:{name:"helper"}}),n("Footer")],1)},Lc=[],Uc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isDebug?n("div",{attrs:{id:"pauth"}},[n("b-collapse",{attrs:{id:"divTbl",open:!1}},[n("button",{staticClass:"button is-small is-primary",attrs:{slot:"trigger"},slot:"trigger"},[t._v("Authorizations Tester")]),n("div",[n("table",{staticClass:"table is-narrow is-hoverable is-size-6",attrs:{id:"axsCtrl"}},[n("thead",[n("tr",[n("th",{attrs:{id:"colRsrc"}},[t._v("Resource")]),n("th",{attrs:{id:"colPrvlg"}},[t._v("Privilege")])])]),n("tbody",t._l(t.getUserPermissions,function(e,s,a){return n("tr",[n("th",{staticClass:"is-size-7",attrs:{id:"colRsrc"}},[t._v(t._s(s))]),n("td",{attrs:{id:"colPrvlg"}},[n("b-field",[n("b-select",{staticClass:"is-size-7",attrs:{id:s,placeholder:t.axsLvls[0].axs},nativeOn:{change:function(e){return t.updPermissions(e)}},model:{value:t.user.permissions[s],callback:function(e){t.$set(t.user.permissions,s,e)},expression:"user.permissions[key]"}},t._l(t.axsLvls,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                     "+t._s(e.axs)+"\n                    ")])}))],1)],1)])})),n("tfoot",{staticClass:"is-hidden"},[n("tr",[n("th",{attrs:{id:"colRsrc"}},[t._v("Resource")]),n("th",{attrs:{id:"colPrvlg"}},[t._v("Privilege")])])])])])]),t._v("\n\n"+t._s(t.getUserPermissions)+"\n\n  ")],1):t._e()},Mc=[],Fc=console.log,Bc={data:function(){return{axsLvls:We.olvls,axsLvl:{Example:0,Person:3},role:"admin"}},computed:Object(A["a"])({},Object(N["d"])("a12n",["domains","user"]),Object(N["c"])("a12n",["getUserPermissions"]),Object(N["c"])({isDebug:"isDebug"})),methods:Object(A["a"])({},Object(N["b"])("a12n",["changePermissions"]),{onRoleChange:function(){Fc("================================ ".concat(this.domains)),this.changeRole(this.role)},updPermissions:function(t){this.changePermissions({change:{resource:t.target.id,setting:t.target.value},ability:this.$ability})}})},Jc=Bc,Qc=(n("975e"),Object(I["a"])(Jc,Uc,Mc,!1,null,"2e069d99",null));Qc.options.__file="PseudoAuthorizations.vue";var Yc=Qc.exports,qc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",[n("b-notification",{attrs:{type:t.msgError.lvl,"has-icon":"",active:t.isError},on:{"update:active":function(e){t.isError=e}}},[t._v("\n      "+t._s(t.msgError.txt)+"\n    ")])],1),n("div",{staticClass:"control"},[n("b-switch",{attrs:{type:"is-danger"},model:{value:t.aclDebug,callback:function(e){t.aclDebug=e},expression:"aclDebug"}},[t._v("\n      Debug\n    ")])],1),t.aclDebug?n("div",[n("div",{staticClass:"mdl-grid"},[n("div",{staticClass:"mdl-cell mdl-cell--3-col mdl-cell mdl-cell--1-col-tablet mdl-cell--hide-phone"},[n("router-link",{staticClass:"mdl-button mdl-js-button mdl-button--fab mdl-button--colored",attrs:{to:{name:"persons"}}},[n("i",{staticClass:"material-icons"},[t._v("Persons")])]),n("router-link",{staticClass:"mdl-button mdl-js-button mdl-button--fab mdl-button--colored",attrs:{to:{name:"ohv"}}},[n("i",{staticClass:"material-icons"},[t._v("Old Home ")])])],1)]),n("a",{staticClass:"button is-small"},[t._v(t._s(t.isHere))]),n("a",{staticClass:"button is-small"},[t._v(t._s(t.isKnown))]),t._m(0),n("div",[t._v('\n      User status :: " '+t._s(t.getExpiry())+' "\n    ')]),n("a",{staticClass:"button is-small",on:{click:t.qtst}},[t._v("\n      Quick Tests\n    ")])]):n("div",{staticClass:"is-small"},[t._v("Version :: v"+t._s(t.theVersion))])])},Vc=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"content"},[n("b",[t._v("Privileges:")]),t._v("\n      { { access } }\n    ")])}],zc=console.log,Gc={methods:{getExpiry:function(){try{var t=new Date(1e3*Kr.a.decode(this.tkn).exp),e=new Date;return"Token expiry at ".concat(t.getDate()," ").concat(t.toTimeString(),"  vs  ").concat(e.getDate()," ").concat(e.toTimeString())}catch(t){return"Logged out"}},qtst:function(){zc(" ------- Quick Test -------")}},computed:Object(A["a"])({aclDebug:{get:function(){return this.$store&&this.$store.state&&this.$store.state.isDebug||!1},set:function(){zc(this),this.$store.dispatch("debugMode",this.$store.state.isDebug=!this.$store.state.isDebug)}},theVersion:function(){return window.version}},Object(N["c"])({tkn:"axsToken",isHere:"isActive",isKnown:"isAuthenticated",isError:"isError",msgError:"msgError"}))},Kc=Gc,Wc=Object(I["a"])(Kc,qc,Vc,!1,null,null,null);Wc.options.__file="Footer.vue";var Hc=Wc.exports,Zc={components:{PseudoAuthorizations:Yc,NavBar:Ko,Authentication:wo,Footer:Hc}},Xc=Zc,tl=(n("63fe"),Object(I["a"])(Xc,$c,Lc,!1,null,"0b628fa2",null));tl.options.__file="BaseLayer.vue";var el=tl.exports,nl=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},sl=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("Email Subscriptions")])])}],al={},il=Object(I["a"])(al,nl,sl,!1,null,null,null);il.options.__file="UserEmailsSubscriptions.vue";var ol=il.exports,rl=(console.log,[]),cl=[{path:"emails",name:"emails",components:{nav_bar:Ko,default:ol},props:{nav_bar:{setTab:"Admin"}}}],ll=rl.concat(Rc).concat(Fn).concat(ms).concat(Ma).concat(io).concat(Vr).concat(cl),ul=[{path:"",name:"start",component:el,children:ll}];s["default"].use(_c["a"]);var dl=console.log,ml=[],vl=ml.concat(ul),pl=function(t,e,n){if(window.lgr&&window.lgr.info("Guard: processServerSideChanges."),dc&&dc.state&&dc.state.Auth&&dc.state.Auth.accessToken.length>10){var s="".concat(V.server,"/api/metadata"),a={headers:{Accept:"application/json, text/plain, */*",Authorization:"JWT ".concat(dc.state.Auth.accessToken)}};Tt.a.get(s,a).then(function(t){var e=t.data.metadata.checks,n=dc.state.integrityCheck;Object.keys(e).forEach(function(t){e[t]!==n[t]&&(n[t]=e[t],dl("will call -- store.dispatch('".concat(t,"/fetchAll')")),dc.dispatch("".concat(t,"/fetchAll")),dc.dispatch("updateIntegrityCheck",n))})}).catch(function(t){dl("*** Error while fetching metadata :: >".concat(t.message,"<***")),dl(t.message),t.message.endsWith("401")?dc.dispatch("handle401",null,{root:!0}):dc.dispatch("notifyUser",{txt:"Error fetching invoices :: ".concat(t.message),lvl:"is-danger"},{root:!0})})}return null},fl=function(t,e,n){return window.lgr&&window.lgr.info("Guard: clearErrorNotification."),dc.dispatch("clearNotifyUser"),null},bl=[];bl=bl.concat(pl).concat(fl).concat(tn);var hl=new _c["a"]({routes:vl});hl.beforeEach(function(t,e,n){dl("Router.beforeEach ==> Routing from '".concat(e.name,"' to '").concat(t.name,"'. Params '").concat(e.params,"').")),dl(t),dl(e),dl("beforeEachTasks.length ".concat(bl.length)),dl(bl);var s=null;bl.forEach(function(a){null===s&&(s=a(t,e,n))}),null===s?n():n(s)});var gl=hl,Cl=console.log;s["default"].use(ot),s["default"].use(r["b"],Ze),s["default"].component("Can",r["a"]),s["default"].use(l.a,V.logger),s["default"].use(a["a"]),s["default"].use(o.a,{namespace:"vuesppwa-"}),s["default"].use(f.a,{defaultIconPack:"fa"}),s["default"].use(h.a),s["default"].use(m.a,{rules:{isPct:function(t){var e=t.value;return!C.a.inRange(e||0,0,101)&&"Value ".concat(e," is not in range 0 to 100.")}}}),s["default"].use(w["a"]),s["default"].component("icon",u["a"]),s["default"].config.productionTip=V.productionTip;var wl=wc,_l=navigator.languages[0]||"en",yl=new a["a"]({locale:_l.split("-")[0]||"en",fallbackLocale:"en",messages:wl});Object(v["sync"])(dc,gl);var xl=new s["default"]({el:"#app",i18n:yl,router:gl,store:dc,beforeCreate:function(){Cl("<<<<<<<<<< beforeCreate >>>>>>>>>>>"),window.lgr=this.$log,window.ls=this.$ls,window.ability=this.$ability,this.$store.dispatch("dbmgr/rememberDbMgr",{dbmgr:this.$pouch});var t=this.$route.query.tkn?this.$route.query.tkn:this.$ls.get(V.tokenName);Cl("<<<<<<<<<< keeping token >>>>>>>>>>>"),this.$store.dispatch("keepTkn",{token:t,ability:this.$ability}),Cl("<<<<<<<<<< Checking if all data loaded >>>>>>>>>>>"),this.$store.dispatch("dbmgr/collectCategoryCounts")},created:function(){Cl("<<<<<<<<<< created >>>>>>>>>>>"),window.version=V.version,this.$log.info("microservice = ".concat(V.server)),Cl("\n      !!!!!!!!!?  returnToExitPoint  ?!!!!!!!!!");var t=window.localStorage,e=V.localStorageNameSpace+V.returnRouteName,n=JSON.parse(t.getItem(e));if(n){var s=n.value;s&&s.length>0&&!s.includes("home")&&(Cl("\n    !!!!!!!!!?  return to ".concat(s,"  !!!!!!!!!")),Cl(this.$router.push({name:s})),t.removeItem(e))}},render:function(t){return t(T)}}),Ol=e["default"]=xl},5764:function(t,e,n){},6101:function(t,e,n){"use strict";var s=n("44f7"),a=n.n(s);a.a},"63fe":function(t,e,n){"use strict";var s=n("f1c5"),a=n.n(s);a.a},"777f":function(t,e,n){"use strict";var s=n("bf52"),a=n.n(s);a.a},"7b60":function(t,e,n){"use strict";var s=n("9ca1"),a=n.n(s);a.a},"7ead":function(t,e,n){"use strict";var s=n("398e"),a=n.n(s);a.a},"852f":function(t,e,n){},9294:function(t,e,n){},"975e":function(t,e,n){"use strict";var s=n("9294"),a=n.n(s);a.a},"9be0":function(t,e,n){},"9ca1":function(t,e,n){},b295:function(t,e,n){"use strict";var s=n("852f"),a=n.n(s);a.a},b7fe:function(t,e,n){},ba60:function(t,e,n){},bce2:function(t,e,n){},be54:function(t,e,n){"use strict";var s=n("2615"),a=n.n(s);a.a},bf52:function(t,e,n){},c21b:function(t,e,n){},c2e7:function(t,e,n){"use strict";var s=n("e514"),a=n.n(s);a.a},c9ea:function(t,e,n){},d224:function(t,e,n){"use strict";var s=n("c9ea"),a=n.n(s);a.a},d662:function(t,e,n){},d78e:function(t,e,n){"use strict";var s=n("df27"),a=n.n(s);a.a},d8f1:function(t,e,n){},d968:function(t,e,n){},da9c:function(t,e,n){},df27:function(t,e,n){},e514:function(t,e,n){},e7e0:function(t,e,n){"use strict";var s=n("3e91"),a=n.n(s);a.a},ecdc:function(t,e,n){"use strict";var s=n("bce2"),a=n.n(s);a.a},ee67:function(t,e,n){},f021:function(t,e,n){"use strict";var s=n("ba60"),a=n.n(s);a.a},f1c5:function(t,e,n){},f282:function(t,e,n){"use strict";var s=n("0ccb"),a=n.n(s);a.a},fa42:function(t,e,n){"use strict";var s=n("d968"),a=n.n(s);a.a}});
//# sourceMappingURL=app.30037798.js.map